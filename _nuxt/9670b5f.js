(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{433:function(e,t,n){"use strict";n(4);var r={data:function(){return{dialog:!1,resolve:null,reject:null,message:null,title:null,options:{color:"primary",width:290,zIndex:200}}},computed:{show:{get:function(){return this.dialog},set:function(e){this.dialog=e,!1===e&&this.cancel()}}},methods:{open:function(title,e,t){var n=this;return this.dialog=!0,this.title=title,this.message=e,this.options=Object.assign(this.options,t),new Promise((function(e,t){n.resolve=e,n.reject=t}))},agree:function(){this.resolve(!0),this.dialog=!1},cancel:function(){this.reject(!0),this.dialog=!1}}},o=n(57),c=n(75),l=n.n(c),d=n(104),v=n(412),f=n(409),h=n(566),m=n(426),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{style:{zIndex:e.options.zIndex},attrs:{"max-width":e.options.width},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancel(t)}},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("h2",{staticClass:"pl-6 pt-3 pb-2"},[e._v(e._s(e.title))]),e._v(" "),n("v-card-text",{directives:[{name:"show",rawName:"v-show",value:!!e.message,expression:"!!message"}]},[e._v(" "+e._s(e.message)+" ")]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:e.options.color,text:""},nativeOn:{click:function(t){return e.agree(t)}}},[e._v(" ใช่ ")]),e._v(" "),n("v-btn",{attrs:{color:"grey",text:""},nativeOn:{click:function(t){return e.cancel(t)}}},[e._v(" ไม่ ")])],1)],1)],1)}),[],!1,null,null,null);t.a=component.exports;l()(component,{VBtn:d.a,VCard:v.a,VCardActions:f.a,VCardText:f.c,VDialog:h.a,VSpacer:m.a})},631:function(e,t,n){"use strict";n.r(t);n(139),n(38);var r=n(5),o={data:function(){return{assignModal:!1,status:[{label:"พักรายการ",value:"pending"},{label:"ทำรายการสำเร็จ",value:"success"},{label:"ยกเลิกรายการ",value:"cancel"}],selectStatus:"pending"}},watch:{selectStatus:function(e){this.$emit("updateStatus",e)}}},c=n(57),l=n(75),d=n.n(l),v=n(412),f=n(511),h=n(105),m=n(113),x=n(423),w=n(436),_=n(426),k=n(531),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{color:"grey lighten-4",flat:"",tile:""}},[n("v-row",{class:"second-nav cusblue1 "+(this.$vuetify.breakpoint.xsOnly?"pb-2":""),attrs:{height:"55",align:"center",justify:"center",dense:"",flat:""}},[n("h1",{staticClass:"font-weight-medium col-sm-4 col-12"},[e._v("POS")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-subheader",{directives:[{name:"show",rawName:"v-show",value:!this.$vuetify.breakpoint.smAndDown,expression:"!this.$vuetify.breakpoint.smAndDown"}],staticClass:"cus-subhead"},[e._v("\n      สถานะ :\n    ")]),e._v(" "),n("v-select",{staticClass:"rounded-lg cus-input",attrs:{items:e.status,"item-text":"label","item-value":"value","menu-props":{closeOnContentClick:!0},"background-color":"cusblue3","item-color":"cusblue",label:"ทั้งหมด",dark:"",filled:"",rounded:"","single-line":"",dense:"",flat:"","hide-details":""},scopedSlots:e._u([{key:"prepend-item",fn:function(){return[n("v-list-item",{style:""===e.selectStatus?"background-color: #e2f5fc":"",attrs:{ripple:""},on:{click:function(t){e.selectStatus=""}}},[n("v-list-item-content",[n("v-list-item-title",{class:""===e.selectStatus?"cusblue--text":""},[e._v("\n              แสดงทั้งหมด\n            ")])],1)],1),e._v(" "),n("v-divider",{staticClass:"mt-2"})]},proxy:!0}]),model:{value:e.selectStatus,callback:function(t){e.selectStatus=t},expression:"selectStatus"}})],1)],1)}),[],!1,null,null,null),S=component.exports;d()(component,{VCard:v.a,VDivider:f.a,VListItem:h.a,VListItemContent:m.a,VListItemTitle:m.b,VRow:x.a,VSelect:w.a,VSpacer:_.a,VSubheader:k.a});var y={components:{confirmDialog:n(433).a},props:{posQueue:{type:Array,required:!1,default:null},state:{type:String,required:!0}},data:function(){return{confirmDel:!1,checkout:!1,headers:[{text:"ลำดับ",value:"id",align:"center",width:"100",sortable:!1,class:"font-weight-bold"},{text:"POS Number",value:"posNumber",align:"center",width:"150",sortable:!1,class:"font-weight-bold"},{text:"Create AT",value:"createAt",align:"center",width:"",sortable:!1},{text:"State",value:"state",align:"center",width:"",sortable:!1},{text:"Receipt No",value:"receiptNumber",align:"center",width:"",sortable:!1},{text:"Final Price",value:"finalPrice",align:"center",width:"",sortable:!1},{text:"Remark",value:"remark",align:"center",width:"",sortable:!1},{text:"Action",value:"action",align:"center",width:"",sortable:!1}]}},methods:{orderNum:function(data,e){return data.map((function(e){return e.id})).indexOf(e)+1},delPOS:function(e){var t=this;this.$refs.confirm.open("คุณแน่ใจหรือไม่?","คุณแน่ใจหรือไม่ที่จะลบข้อมูลนี้",{width:290,color:"red"}).then((function(n){t.$axios.$delete("/api/pos/".concat(e),{progress:!1}).then((function(n){t.$emit("deletePOS",e)})).catch((function(e){alert(e)}))})).catch((function(){}))}}},O=n(104),V=n(508),$=n(171),C=Object(c.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-data-table",{staticClass:"elevation-4 overflow-y-auto",attrs:{headers:e.headers,items:e.posQueue,"disable-pagination":"","hide-default-footer":"",height:"calc(100vh - 160px)","fixed-header":""},scopedSlots:e._u([{key:"item.id",fn:function(t){var r=t.item;return[n("div",{staticClass:"text-center"},[e._v("\n        "+e._s(e.orderNum(e.posQueue,r.id))+"\n      ")])]}},{key:"item.posNumber",fn:function(t){var r=t.item;return[n("div",{staticClass:"font-weight-medium"},[n("nuxt-link",{staticClass:"bold-owner text-decoration-none text-truncate",attrs:{to:"/pos/"+r.id}},[e._v("\n          "+e._s(r.posNumber)+"\n          "),n("v-icon",{attrs:{color:"cusblue2",small:""}},[e._v("mdi-chevron-right")])],1)],1)]}},{key:"item.createAt",fn:function(t){var n=t.item;return[e._v("\n      "+e._s(e.$moment(n.createAt).format("DD/MM/YYYY"))+"\n    ")]}},{key:"item.action",fn:function(t){var r=t.item;return[n("v-btn",{attrs:{disabled:"cancel"===r.state,icon:"",depressed:"","x-small":""},on:{click:function(t){return e.delPOS(r.id)}}},[n("v-icon",[e._v("mdi-trash-can")])],1)]}}],null,!0)}),e._v(" "),n("confirmDialog",{ref:"confirm"})],1)}),[],!1,null,null,null),P=C.exports;d()(C,{VBtn:O.a,VDataTable:V.a,VIcon:$.a});var N={components:{posQueueNav:S,posQueue:P},asyncData:function(e){return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$axios,e.params,t.next=3,n.$get("/api/pos?state=pending",{progress:!1});case 3:return r=t.sent,t.abrupt("return",{pos:r.results});case 5:case"end":return t.stop()}}),t)})))()},data:function(){return{select:"pending"}},methods:{addPosQueue:function(){var e=this;this.$axios.$post("/api/pos",null,{progress:!1}).then((function(t){e.$router.push("/pos/"+t.id)})).catch((function(e){alert(e)}))},updateStatus:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.select=e,n.next=3,t.$axios.$get("/api/pos?".concat(""!==e?"state=".concat(e):"states=pending&states=success&states=cancel"),{progress:!1});case 3:r=n.sent,t.pos=r.results;case 5:case"end":return n.stop()}}),n)})))()},deletePOS:function(e){var t=this.pos.findIndex((function(t){return t.id===e}));this.pos.splice(t,1)}}},j=Object(c.a)(N,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("posQueueNav",{on:{updateStatus:e.updateStatus}}),e._v(" "),n("div",{staticClass:"custom-container"},[n("posQueue",{attrs:{"pos-queue":e.pos,state:e.select},on:{deletePOS:e.deletePOS}})],1),e._v(" "),n("v-btn",{attrs:{color:"cusblue2",fixed:"",fab:"",large:"",dark:"",bottom:"",right:""},on:{click:function(t){return t.stopPropagation(),e.addPosQueue(t)}}},[n("v-icon",[e._v("mdi-plus")])],1)],1)}),[],!1,null,null,null);t.default=j.exports;d()(j,{VBtn:O.a,VIcon:$.a})}}]);