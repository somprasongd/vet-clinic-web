(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{387:function(e,t,r){"use strict";var n={data:function(){return{lists:[{title:"ระบบ",list:[{name:"สถานพยาบาล",link:"/setting/hospital"},{name:"ผู้ใช้งาน",link:"/setting/users"}]},{title:"ตัวช่วย",list:[{name:"Chief Complaint",link:"/setting/Chief-Complaint"},{name:"Differencial Diagnosis",link:"/setting/Differential-Diagnosis"},{name:"History Ranking",link:"/setting/History-Ranking"},{name:"Physical Examination",link:"/setting/Physical-Examination"}]},{title:"รายการตรวจ",list:[{name:"รายการตรวจ",link:"/setting/check"}]}]}}},l=r(55),o=r(74),c=r.n(o),d=r(353),v=r(351),f=r(393),m=r(157),h=r(158),k=r(99),x=r(108),component=Object(l.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",e._l(e.lists,(function(t){return r("v-card",{key:t.index,staticClass:"mb-3 elevation-4"},[r("v-card-title",{staticClass:"pa-0 pl-5 pt-3"},[e._v(e._s(t.title))]),e._v(" "),r("v-divider"),e._v(" "),r("v-list",{staticClass:"pa-0",attrs:{dense:""}},e._l(t.list,(function(t){return r("v-list-item",{key:t.index,attrs:{link:"",to:t.link}},[r("v-icon",{staticClass:"mr-3",attrs:{color:"cusblue3","x-small":""}},[e._v("mdi-record")]),e._v(" "),r("v-list-item-content",[e._v("\n          "+e._s(t.name)+"\n        ")])],1)})),1)],1)})),1)}),[],!1,null,null,null);t.a=component.exports;c()(component,{VCard:d.a,VCardTitle:v.d,VDivider:f.a,VIcon:m.a,VList:h.a,VListItem:k.a,VListItemContent:x.a})},388:function(e,t,r){"use strict";var n=r(55),l=r(74),o=r.n(l),c=r(364),d=r(366),component=Object(n.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("v-row",{staticClass:"cusblue1 px-10",attrs:{align:"center",justify:"center",dense:""}},[t("v-col",{attrs:{cols:"12"}},[t("h1",{staticClass:"font-weight-medium"},[this._v("ตั้งค่า")])])],1)}),[],!1,null,null,null);t.a=component.exports;o()(component,{VCol:c.a,VRow:d.a})},558:function(e,t,r){"use strict";r.r(t);r(109);var n=r(388),l=r(387),o=(r(222),r(28),r(30),{props:{alluser:{default:null,type:Array,required:!1}},data:function(){return{search:"",userList:this.alluser,confirmDel:!1,newItemDialog:!1,listItem:null,confirmID:null}},computed:{filterUser:function(){var e=this;return this.alluser.filter((function(t){return t.username.toLowerCase().includes(e.search.toLowerCase())}))}},methods:{confirmDialog:function(e){this.confirmDel=!0,this.confirmID=e},deleteUser:function(e){var t=this;this.confirmDel=!1,this.$axios.$delete("/api/users/".concat(e)).then((function(r){t.$emit("removed",e)})).catch((function(e){console.log(e)}))}}}),c=r(55),d=r(74),v=r.n(d),f=r(154),m=r(353),h=r(351),k=r(364),x=r(460),y=r(393),_=r(157),w=r(99),C=r(159),U=r(108),V=r(366),$=r(369),D=r(417),A=r(550),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h3",{staticClass:"pl-5 pt-3 font-weight-medium"},[e._v("ผู้ใช้งาน")]),e._v(" "),r("v-divider",{staticClass:"darker-divider"}),e._v(" "),r("v-row",{staticClass:"pt-3",attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("v-card",{staticClass:"elevation-4",attrs:{height:"540"}},[r("div",{staticClass:"px-7 py-5"},[r("v-text-field",{staticClass:"rounded-lg",attrs:{color:"cusblue",label:"ค้นหา","append-icon":"mdi-magnify",outlined:"","single-line":"",dense:"",flat:"","hide-details":"",autocomplete:"off"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),r("div",{staticClass:"px-7 py-5"},[r("v-card-title",{staticClass:"pa-0 px-3 py-1"},[e._v(" User List ")]),e._v(" "),r("v-divider"),e._v(" "),r("v-virtual-scroll",{attrs:{items:e.filterUser,"item-height":50,height:"400  "},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.item;return[r("v-list-item",{staticClass:"pa-0 px-5"},[r("v-list-item-content",[r("v-list-item-title",[e._v("\n                    "+e._s(n.username)+"\n                  ")])],1),e._v(" "),r("v-list-item-action",[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"6"}},[r("v-btn",{staticClass:"mr-1",attrs:{icon:"","x-small":""},on:{click:function(t){return e.$emit("edituser",n.id)}}},[r("v-icon",{attrs:{color:"black"}},[e._v("mdi-pencil")])],1)],1),e._v(" "),r("v-col",{attrs:{cols:"6"}},[r("v-btn",{staticClass:"ml-1",attrs:{icon:"","x-small":""},on:{click:function(t){return e.confirmDialog(n.id)}}},[r("v-icon",{attrs:{color:"black"}},[e._v("mdi-trash-can")])],1)],1)],1)],1)],1)]}}])})],1)]),e._v(" "),r("v-dialog",{attrs:{"max-width":"290"},model:{value:e.confirmDel,callback:function(t){e.confirmDel=t},expression:"confirmDel"}},[r("v-card",[r("h2",{staticClass:"pl-6 pt-3 pb-2"},[e._v("คุณแน่ใจหรือไม่?")]),e._v(" "),r("v-card-text",[e._v(" คุณแน่ใจหรือไม่ที่จะลบข้อมูลนี้ ")]),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"red",text:""},on:{click:function(t){return e.deleteUser(e.confirmID)}}},[e._v("\n              ลบ\n            ")]),e._v(" "),r("v-btn",{attrs:{color:"grey",text:""},on:{click:function(t){e.confirmDel=!1}}},[e._v("\n              ยกเลิก\n            ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null),O=component.exports;v()(component,{VBtn:f.a,VCard:m.a,VCardActions:h.a,VCardText:h.c,VCardTitle:h.d,VCol:k.a,VDialog:x.a,VDivider:y.a,VIcon:_.a,VListItem:w.a,VListItemAction:C.a,VListItemContent:U.a,VListItemTitle:U.b,VRow:V.a,VSpacer:$.a,VTextField:D.a,VVirtualScroll:A.a});r(10),r(7),r(6),r(4),r(8);var L=r(2),I=(r(16),r(22),r(515),r(44),r(33),r(37),r(17),r(18),r(48),r(11));function E(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,l=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw l}}}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var j={props:{alert:{type:Boolean,required:!0},defaultrole:{default:null,type:Array,required:!1},disable:{type:Boolean,required:!0}},data:function(){return{selected:null,enableValidate:!1,overBtn:!0,lessBtn:!0,rankList:{},alerts:!1}},computed:{selectedRank:function(){var e=[],t=[];for(var r in this.rankList)!0===this.rankList[r].active&&(e.push(this.rankList[r]),t.push(this.rankList[r].id));return 0===t.length&&this.enableValidate?(this.alerts=!0,this.$emit("error",!0)):(this.alerts=!1,this.$emit("error",!1)),this.$emit("rank",t),e},allRank:function(){var e,t=[];for(e in this.rankList)!1===this.rankList[e].active&&t.push(this.rankList[e]);return t}},watch:{defaultrole:function(){var e=this;null===this.defaultrole?this.resetRole():(this.selected=null,setTimeout((function(){e.roleDefault()}),100))},selected:function(){this.enableValidate=!0,null==this.selected?(this.overBtn=!0,this.lessBtn=!0):!1===this.selected.active?(this.overBtn=!1,this.lessBtn=!0):!0===this.selected.active?(this.overBtn=!0,this.lessBtn=!1):(this.overBtn=!1,this.lessBtn=!1)},alert:function(){this.alerts=!0}},created:function(){var e=this;return Object(I.a)(regeneratorRuntime.mark((function t(){var r,n,l,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("/api/master/user-roles");case 2:r=t.sent,n=[],l=E(r.results);try{for(l.s();!(o=l.n()).done;)c=o.value,n.push({id:c.id,label:c.label,active:!1})}catch(e){l.e(e)}finally{l.f()}e.rankList=n,e.defaultrole&&e.roleDefault();case 8:case"end":return t.stop()}}),t)})))()},methods:{roleDefault:function(){var e,t=this,r=E(this.defaultrole);try{var n=function(){var r=e.value,n=t.rankList.findIndex((function(e){return e.id===r.id}));t.rankList[n].active=!0};for(r.s();!(e=r.n()).done;)n()}catch(e){r.e(e)}finally{r.f()}},resetRole:function(){for(var e in this.enableValidate=!1,this.selected=null,this.rankList)this.rankList[e].active=!1},clickSelect:function(){var e=this,t=this.rankList.findIndex((function(t){return t.id===e.selected.id}));this.rankList[t].active=!this.rankList[t].active,this.selected=null,this.overBtn=!0,this.lessBtn=!0}}},S=r(465),B=r(551),P=r(46),T=Object(c.a)(j,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-item-group",{model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[r("v-row",{attrs:{align:"center",justify:"center",dense:this.$vuetify.breakpoint.xsOnly}},[r("v-col",{attrs:{cols:"12",sm:"5"}},[r("v-card",{staticClass:"elevation-4",attrs:{height:"180",disabled:e.disable}},[r("v-card-title",{staticClass:"pa-0 pl-5 pt-3"},[e._v(" สิทธิทั้งหมด ")]),e._v(" "),r("v-divider"),e._v(" "),r("v-row",{attrs:{dense:""}},e._l(e.allRank,(function(t,i){return r("v-item",{key:t.index,staticClass:"col-6",attrs:{value:t},scopedSlots:e._u([{key:"default",fn:function(n){var l=n.active,o=n.toggle;return[r("div",{class:i%2==1?"pt-3 pl-3 pr-6":"pt-3 pl-6 pr-3"},[r("v-card",{staticClass:"text-center elevation-0",attrs:{color:l?"cusblue":"grey lighten-2",light:"",height:"22","max-width":"95"},on:{click:function(e){return o()}}},[r("span",{class:l?"white--text text-uppercase":"black--text text-uppercase"},[e._v("\n                  "+e._s(t.label)+"\n                ")])])],1)]}}],null,!0)})})),1)],1)],1),e._v(" "),r("v-col",{staticClass:"px-2",attrs:{cols:"12",sm:"1"}},[r("v-row",{attrs:{"no-gutters":this.$vuetify.breakpoint.xsOnly}},[r("v-col",{attrs:{cols:"6",sm:"12"}},[r("div",{staticClass:"text-center"},[r("v-btn",{staticClass:"cusblue2 white--text",attrs:{disabled:e.overBtn,fab:"",small:"",depressed:""},on:{click:e.clickSelect}},[r("v-icon",[e._v(e._s(this.$vuetify.breakpoint.xsOnly?"mdi-chevron-down":"mdi-chevron-right"))])],1)],1)]),e._v(" "),r("v-col",{attrs:{cols:"6",sm:"12"}},[r("div",{staticClass:"text-center"},[r("v-btn",{staticClass:"cusblue2 white--text",attrs:{disabled:e.lessBtn,fab:"",small:"",depressed:""},on:{click:e.clickSelect}},[r("v-icon",[e._v(e._s(this.$vuetify.breakpoint.xsOnly?"mdi-chevron-up":"mdi-chevron-left"))])],1)],1)])],1)],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"5"}},[r("v-card",{staticClass:"elevation-4",attrs:{height:"180",disabled:e.disable}},[r("v-card-title",{staticClass:"pa-0 pl-5 pt-3"},[r("span",{class:e.alerts?"red--text":""},[e._v("สิทธิที่เลือก")]),e._v(" "),r("v-chip",{directives:[{name:"show",rawName:"v-show",value:e.alerts,expression:"alerts"}],staticClass:"ma-2",attrs:{color:"red",outlined:"",pill:"","x-small":""}},[e._v("\n            กรุณาเลือกสิทธิ\n          ")])],1),e._v(" "),r("v-divider"),e._v(" "),r("v-row",{attrs:{dense:""}},e._l(e.selectedRank,(function(t,i){return r("v-item",{key:t.index,staticClass:"col-6",attrs:{value:t},scopedSlots:e._u([{key:"default",fn:function(n){var l=n.active,o=n.toggle;return[r("div",{class:i%2==1?"pt-3 pl-3 pr-6":"pt-3 pl-6 pr-3"},[r("v-card",{staticClass:"text-center elevation-0",attrs:{color:l?"cusblue":"grey lighten-2",light:"",height:"22","max-width":"95"},on:{click:function(e){return o()}}},[r("span",{class:l?"white--text text-uppercase":"black--text text-uppercase"},[e._v(e._s(t.label))])])],1)]}}],null,!0)})})),1)],1)],1)],1)],1)}),[],!1,null,null,null),M=T.exports;function F(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function z(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?F(Object(source),!0).forEach((function(t){Object(L.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):F(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}v()(T,{VBtn:f.a,VCard:m.a,VCardTitle:h.d,VChip:S.a,VCol:k.a,VDivider:y.a,VIcon:_.a,VItem:B.a,VItemGroup:P.b,VRow:V.a});var N={components:{roleSelect:M},props:{alluser:{default:null,type:Array,required:!1}},data:function(){var e=this;return{color:"cusblue",assignModal:!1,valid:!0,loading:!1,alert:!1,error:"",roleAlert:!1,defaultRole:[],avatar:"",newAvatar:"",addUser:{id:"",name:"",username:"",email:"",password:"",confirm:"",profile:"",isAdmin:!1,rank:[]},rules:{name:[function(e){return!!e||"กรุณากรอกชื่อ"},function(e){return e&&e.length>=2||"กรุณากรอกชื่อขั้นต่ำ 2 ตัวอักษร"},function(e){return e&&e.length<=100||"ไม่ควรกรอกชื่อเกิน 100 ตัวอักษร"}],username:[function(e){return!!e||"กรุณากรอกชื่อผู้ใช้"},function(e){return e&&e.length>=3||"กรุณากรอกชื่อผู้ใช้ขั้นต่ำ 3 ตัวอักษร"},function(e){return/^[a-z0-9]+$/i.test(e)||"สามารถใช้ตัวอักษรภาษาอังกฤษและตัวเลขเท่านั้น"},function(e){return e&&e.length<=50||"ไม่ควรกรอกชื่อผู้ใช้เกิน 50 ตัวอักษร"},function(t){return t&&e.checkDuplicate(t)||"ชื่อผูัใช้นี้ถูกใช้งานแล้ว"}],email:[function(e){return!!e||"กรุณากรอกอีเมล์"},function(e){return e&&e.length<=50||"ไม่ควรกรอกอีเมล์เกิน 50 ตัวอักษร"},function(e){return/.+@.+\..+/.test(e)||"กรุณากรอกอีเมล์ให้ถูกรูปแบบ"}],password:[function(e){return!!e||"กรุณากรอกรหัสผ่าน"},function(e){return e&&e.length>=5||"รหัสผ่านต้องมีมากกว่าหรือเท่ากับ 5 ตัวอักษร"},function(e){return e&&e.length<=50||"รหัสผ่านต้องมีน้อยหรือเท่ากับ 50 ตัวอักษร"}],password1:[function(e){return e&&e.length>=5||"รหัสผ่านต้องมีมากกว่าหรือเท่ากับ 5 ตัวอักษร"},function(e){return e&&e.length<=50||"รหัสผ่านต้องมีน้อยหรือเท่ากับ 50 ตัวอักษร"}],confirm:[function(t){return t===e.addUser.password||"รหัสผ่านไม่ตรงกัน"}]}}},computed:{userAvatar:function(){return""!==this.newAvatar?this.newAvatar:null==this.avatar?r(223):this.avatar}},watch:{assignModal:function(){var e=this;!1===this.assignModal&&setTimeout((function(){e.defaultRole=null,e.$refs.form.reset(),e.alert=!1,e.addUser.id="",e.avatar=""}),150)}},methods:{roleError:function(e){this.valid=!e},onEnter:function(e){this.$refs[e].focus()},addRank:function(e){this.addUser.rank=e},checkDuplicate:function(e){var t=this;return""===this.addUser.id?!this.alluser.some((function(t){return t.username===e})):!this.alluser.some((function(r){return r.username===e&&r.id!==t.addUser.id}))},onFilePicked:function(e){void 0!==e?(this.addUser.profile=e,this.newAvatar=URL.createObjectURL(e)):this.newAvatar=""},open:function(e){var t=this;Number.isInteger(e)?this.$axios.$get("/api/users/".concat(e),{progress:!1}).then((function(r){t.addUser={id:r.id,name:r.name,username:r.username,email:r.email,password:"",confirm:"",isAdmin:r.isAdmin,rank:r.roles},t.defaultRole=r.roles,t.avatar="".concat("https://api.vet-clinic.somprasongd.work","/api/users/").concat(e,"/avatar"),t.assignModal=!0})):this.assignModal=!0},submitUser:function(){var e=this;if(this.$refs.form.validate()&&0!==this.addUser.rank.length){this.roleAlert=!1,this.loading=!0;var t=z({},this.addUser);this.$axios.$post("/api/users",{username:t.username.toLowerCase(),name:t.name,email:t.email,password:t.password,isAdmin:t.isAdmin,roles:t.rank}).then((function(t){setTimeout((function(){e.$refs.form.reset(),e.assignModal=!1,e.$emit("response",t),e.loading=!1}),500)})).catch((function(t){e.requestError(t)}))}else this.roleAlert=!0},updateUser:function(){var e=this;if(this.$refs.form.validate()&&0!==this.addUser.rank.length){this.roleAlert=!1,this.loading=!0;var t=z({},this.addUser),r={username:t.username.toLowerCase(),name:t.name,email:t.email,password:""===t.password?null:t.password,isAdmin:t.isAdmin,roles:t.rank};this.$axios.$put("/api/users/".concat(t.id),r).then((function(r){null===e.avatar&&void 0===t.profile?e.deleteProfile(t.id,r):void 0!==t.profile?e.uploadProfile(t.id,t.profile,r):e.updateSuccess(r)})).catch((function(t){e.requestError(t)}))}else 0===this.addUser.rank.length&&(this.roleAlert=!0)},uploadProfile:function(e,img,t){var r=this,n=new FormData;n.append("avatar",img),this.$axios.$post("/api/users/".concat(e,"/avatar"),n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(data){r.updateSuccess(t)})).catch((function(e){r.requestError(e)}))},deleteProfile:function(e,t){var r=this;this.$axios.$delete("/api/users/".concat(e,"/avatar")).then((function(data){r.updateSuccess(t)})).catch((function(e){r.requestError(e)}))},updateSuccess:function(e){var t=this;setTimeout((function(){t.assignModal=!1,t.$refs.form.reset(),t.$emit("update",e),t.loading=!1}),500)},requestError:function(e){this.alert=!0,this.error=e.response.data.error.message,this.loading=!1}}},H=r(517),J=r(156),G=r(462),K=r(552),Q=r(420),W=r(221),X=r(155),Y=Object(c.a)(N,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-dialog",{attrs:{"max-width":"700",scrollable:""},model:{value:e.assignModal,callback:function(t){e.assignModal=t},expression:"assignModal"}},[n("v-card",[n("h2",{staticClass:"pa-5 pb-2"},[e._v("\n        "+e._s(""==e.addUser.id?"เพิ่ม":"แก้ไข")+"\n      ")]),e._v(" "),n("v-divider",{staticClass:"darker-divider"}),e._v(" "),n("v-card-text",{staticClass:"px-7"},[n("v-form",{ref:"form",attrs:{"lazy-validation":"",disabled:e.loading,autocomplete:"off"},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{ref:"name",attrs:{color:e.color,rules:e.rules.name,label:"name",type:"text"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onEnter("username")}},model:{value:e.addUser.name,callback:function(t){e.$set(e.addUser,"name",t)},expression:"addUser.name"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{ref:"username",attrs:{disabled:""!=e.addUser.id,color:e.color,rules:e.rules.username,label:"username",type:"text"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onEnter("email")}},model:{value:e.addUser.username,callback:function(t){e.$set(e.addUser,"username",t)},expression:"addUser.username"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{ref:"email",attrs:{color:e.color,rules:e.rules.email,label:"email",type:"email"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onEnter("password")}},model:{value:e.addUser.email,callback:function(t){e.$set(e.addUser,"email",t)},expression:"addUser.email"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{ref:"password",attrs:{color:e.color,rules:""==e.addUser.id?e.rules.password:""!==e.addUser.password?e.rules.password1:[],label:""==e.addUser.id?"password":"password (not required)",type:"password"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onEnter("confirm")}},model:{value:e.addUser.password,callback:function(t){e.$set(e.addUser,"password",t)},expression:"addUser.password"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{ref:"confirm",attrs:{color:e.color,rules:e.rules.confirm,label:"confirm password",type:"password"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitUser(t)}},model:{value:e.addUser.confirm,callback:function(t){e.$set(e.addUser,"confirm",t)},expression:"addUser.confirm"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-checkbox",{attrs:{color:e.color,label:"ผู้ดูแลระบบ"},model:{value:e.addUser.isAdmin,callback:function(t){e.$set(e.addUser,"isAdmin",t)},expression:"addUser.isAdmin"}})],1),e._v(" "),""!==e.addUser.id?n("v-col",{staticClass:"row",attrs:{cols:"12"}},[n("v-avatar",{staticClass:"mx-3",attrs:{size:"41"}},[n("v-img",{attrs:{src:e.userAvatar,"lazy-src":r(223)}})],1),e._v(" "),n("v-file-input",{attrs:{label:"Profile Image (not requied)",color:"cusblue","prepend-icon":"",accept:"image/*","hide-details":"",outlined:"",dense:""},on:{change:e.onFilePicked},scopedSlots:e._u([{key:"append-outer",fn:function(){return[n("v-icon",{attrs:{color:"red"},on:{click:function(t){e.avatar=null}}},[e._v("mdi-trash-can")])]},proxy:!0}],null,!1,3364045741)})],1):e._e()],1),e._v(" "),n("roleSelect",{attrs:{alert:e.roleAlert,defaultrole:e.defaultRole,disable:e.loading},on:{rank:e.addRank,error:e.roleError}}),e._v(" "),n("v-alert",{attrs:{dense:"",text:"",color:"red",transition:"scroll-y-transition",dismissible:""},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[e._v("\n            "+e._s(e.error)+"\n          ")])],1)],1),e._v(" "),n("v-divider"),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{staticClass:"cusblue2--text text-none",attrs:{text:"",disabled:e.loading},on:{click:function(t){e.assignModal=!1}}},[e._v("Cancel")]),e._v(" "),n("v-btn",{staticClass:"cusblue2--text text-none",attrs:{text:"",disabled:!e.valid||e.loading},on:{click:function(t){""==e.addUser.id?e.submitUser():e.updateUser()}}},[n("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"mr-2",attrs:{indeterminate:"",color:"cusblue2",size:15,width:2}}),e._v("\n          "+e._s(""==e.addUser.id?"Save":"Update")+"\n        ")],1)],1)],1)],1)],1)}),[],!1,null,null,null),Z=Y.exports;v()(Y,{VAlert:H.a,VAvatar:J.a,VBtn:f.a,VCard:m.a,VCardActions:h.a,VCardText:h.c,VCheckbox:G.a,VCol:k.a,VDialog:x.a,VDivider:y.a,VFileInput:K.a,VForm:Q.a,VIcon:_.a,VImg:W.a,VProgressCircular:X.a,VRow:V.a,VSpacer:$.a,VTextField:D.a});var ee={components:{settingNav:n.a,settingTab:l.a,userForm:O,userDialog:Z},data:function(){return{allUser:[]}},mounted:function(){var e=this;this.$axios.get("/api/users").then((function(t){e.allUser=t.data.results}))},methods:{openUserDialog:function(e){this.$refs.userDialog.open(e)},addRespone:function(e){this.allUser.push(e)},updateRespone:function(e){var t=this.allUser.findIndex((function(t){return t.id===e.id}));this.allUser.splice(t,1,e)},removeUser:function(e){var t=this.allUser.findIndex((function(t){return t.id===e}));this.allUser.splice(t,1)}}},te=Object(c.a)(ee,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("settingNav"),e._v(" "),r("div",{staticClass:"custom-container"},[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"4",sm:"3",md:"2"}},[r("settingTab")],1),e._v(" "),r("v-col",{staticClass:"pl-5",attrs:{cols:"8",sm:"9",md:"10"}},[r("userForm",{attrs:{alluser:e.allUser},on:{removed:e.removeUser,edituser:e.openUserDialog}})],1)],1)],1),e._v(" "),r("userDialog",{ref:"userDialog",attrs:{alluser:e.allUser},on:{response:e.addRespone,update:e.updateRespone}}),e._v(" "),r("v-btn",{attrs:{color:"cusblue2",fixed:"",fab:"",large:"",dark:"",bottom:"",right:""},on:{click:function(t){return t.stopPropagation(),e.openUserDialog(t)}}},[r("v-icon",[e._v("mdi-plus")])],1)],1)}),[],!1,null,null,null);t.default=te.exports;v()(te,{VBtn:f.a,VCol:k.a,VIcon:_.a,VRow:V.a})}}]);