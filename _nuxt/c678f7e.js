(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{484:function(t,e,n){"use strict";n(4);var o={data:function(){return{dialog:!1,resolve:null,reject:null,message:null,title:null,options:{color:"primary",width:290,zIndex:200}}},computed:{show:{get:function(){return this.dialog},set:function(t){this.dialog=t,!1===t&&this.cancel()}}},methods:{open:function(title,t,e){var n=this;return this.dialog=!0,this.title=title,this.message=t,this.options=Object.assign(this.options,e),new Promise((function(t,e){n.resolve=t,n.reject=e}))},agree:function(){this.resolve(!0),this.dialog=!1},cancel:function(){this.reject(!0),this.dialog=!1}}},r=n(39),l=n(50),c=n.n(l),d=n(110),v=n(184),f=n(62),x=n(480),h=n(476),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{style:{zIndex:t.options.zIndex},attrs:{"max-width":t.options.width},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.cancel(e)}},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("v-card",[n("h2",{staticClass:"pl-6 pt-3 pb-2"},[t._v(t._s(t.title))]),t._v(" "),n("v-card-text",{directives:[{name:"show",rawName:"v-show",value:!!t.message,expression:"!!message"}]},[t._v(" "+t._s(t.message)+" ")]),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:t.options.color,text:""},nativeOn:{click:function(e){return t.agree(e)}}},[t._v(" ใช่ ")]),t._v(" "),n("v-btn",{attrs:{color:"grey",text:""},nativeOn:{click:function(e){return t.cancel(e)}}},[t._v(" ไม่ ")])],1)],1)],1)}),[],!1,null,null,null);e.a=component.exports;c()(component,{VBtn:d.a,VCard:v.a,VCardActions:f.a,VCardText:f.c,VDialog:x.a,VSpacer:h.a})},491:function(t,e,n){var content=n(492);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(13).default)("5c8fbe94",content,!0,{sourceMap:!1})},492:function(t,e,n){(e=n(12)(!1)).push([t.i,".v-textarea textarea{align-self:stretch;flex:1 1 auto;line-height:1.75rem;max-width:100%;min-height:32px;outline:none;padding:0;width:100%}.v-textarea .v-text-field__prefix,.v-textarea .v-text-field__suffix{padding-top:2px;align-self:start}.v-textarea.v-text-field--box .v-text-field__prefix,.v-textarea.v-text-field--box textarea,.v-textarea.v-text-field--enclosed .v-text-field__prefix,.v-textarea.v-text-field--enclosed textarea{margin-top:24px}.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) textarea,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) textarea,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) textarea,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) textarea{margin-top:10px}.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) .v-label,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) .v-label,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) .v-label,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) .v-label{top:18px}.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense textarea,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense textarea,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense textarea,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense textarea{margin-top:6px}.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__prepend-outer,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__prepend-outer,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__prepend-outer,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__prepend-outer{align-self:flex-start;margin-top:8px}.v-textarea.v-text-field--solo{align-items:flex-start}.v-textarea.v-text-field--solo .v-input__append-inner,.v-textarea.v-text-field--solo .v-input__append-outer,.v-textarea.v-text-field--solo .v-input__prepend-inner,.v-textarea.v-text-field--solo .v-input__prepend-outer{align-self:flex-start;margin-top:12px}.v-application--is-ltr .v-textarea.v-text-field--solo .v-input__append-inner{padding-left:12px}.v-application--is-rtl .v-textarea.v-text-field--solo .v-input__append-inner{padding-right:12px}.v-textarea--auto-grow textarea{overflow:hidden}.v-textarea--no-resize textarea{resize:none}.v-textarea.v-text-field--enclosed .v-text-field__slot{align-self:stretch}.v-application--is-ltr .v-textarea.v-text-field--enclosed .v-text-field__slot{margin-right:-12px}.v-application--is-rtl .v-textarea.v-text-field--enclosed .v-text-field__slot{margin-left:-12px}.v-application--is-ltr .v-textarea.v-text-field--enclosed .v-text-field__slot textarea{padding-right:12px}.v-application--is-rtl .v-textarea.v-text-field--enclosed .v-text-field__slot textarea{padding-left:12px}",""]),t.exports=e},497:function(t,e,n){"use strict";var o={data:function(){return{sendDoctor:!1,doctor:this.$store.state.form.doctor,visitId:"",oldDoc:"",newDoc:"",loading:!1}},created:function(){var t=this;0===this.$store.state.form.doctor.length&&this.$store.dispatch("form/addDoctor").then((function(e){t.doctor=e}))},methods:{open:function(t,e){this.visitId=e,this.oldDoc=t,this.sendDoctor=!0},submitSend:function(){var t=this;this.loading=!0,this.$axios.$patch("/api/visits/".concat(this.visitId),{doctorId:""===this.newDoc?null:this.newDoc},{progress:!1}).then((function(e){setTimeout((function(){t.sendDoctor=!1,t.loading=!1,t.$emit("updateDoctor",e)}),500)})).catch((function(e){t.loading=!1,alert(e)}))}}},r=n(39),l=n(50),c=n.n(l),d=n(110),v=n(184),f=n(62),x=n(480),h=n(462),m=n(112),_=n(120),k=n(183),C=n(518),w=n(476),y=n(457),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{"max-width":"450",scrollable:"",fullscreen:this.$vuetify.breakpoint.xsOnly,transition:"dialog-transition"},model:{value:t.sendDoctor,callback:function(e){t.sendDoctor=e},expression:"sendDoctor"}},[n("v-card",[n("h2",{staticClass:"pa-5 pb-2"},[t._v("ส่งต่อ")]),t._v(" "),n("v-divider"),t._v(" "),n("v-card-text",[n("v-text-field",{attrs:{label:"แพทย์ผู้ตรวจ (เดิม)",disabled:""},model:{value:t.oldDoc,callback:function(e){t.oldDoc=e},expression:"oldDoc"}}),t._v(" "),n("v-select",{attrs:{items:t.doctor,"item-text":"name","item-value":"id",color:"cusblue","item-color":"cusblue",label:"แพทย์ผู้ตรวจ (ใหม่)",disabled:t.loading,"menu-props":{closeOnContentClick:!0}},scopedSlots:t._u([{key:"prepend-item",fn:function(){return[n("v-list-item",{style:""===t.newDoc?"background-color: #e2f5fc":"",attrs:{ripple:""},on:{click:function(e){t.newDoc=""}}},[n("v-list-item-content",[n("v-list-item-title",{class:""===t.newDoc?"cusblue--text":""},[t._v("\n                ไม่ระบุแพทย์\n              ")])],1)],1),t._v(" "),n("v-divider",{staticClass:"mt-2"})]},proxy:!0}]),model:{value:t.newDoc,callback:function(e){t.newDoc=e},expression:"newDoc"}})],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"cusblue2",disabled:t.loading,text:""},on:{click:function(e){t.sendDoctor=!1}}},[t._v("\n        ไม่ส่ง\n      ")]),t._v(" "),n("v-btn",{attrs:{color:"cusblue2",disabled:t.loading,text:""},on:{click:t.submitSend}},[n("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"mr-2",attrs:{indeterminate:"",color:"cusblue2",size:15,width:2}}),t._v("\n        ยืนยัน\n      ")],1)],1)],1)],1)}),[],!1,null,null,null);e.a=component.exports;c()(component,{VBtn:d.a,VCard:v.a,VCardActions:f.a,VCardText:f.c,VDialog:x.a,VDivider:h.a,VListItem:m.a,VListItemContent:_.a,VListItemTitle:_.b,VProgressCircular:k.a,VSelect:C.a,VSpacer:w.a,VTextField:y.a})},521:function(t,e,n){"use strict";n(11),n(9),n(6),n(4),n(10);var o=n(1),r=(n(17),n(491),n(457)),l=n(3);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var d=Object(l.a)(r.a);e.a=d.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(t){return!isNaN(parseFloat(t))}},rows:{type:[Number,String],default:5,validator:function(t){return!isNaN(parseInt(t,10))}}},computed:{classes:function(){return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle},r.a.options.computed.classes.call(this))},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{lazyValue:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var t=this;setTimeout((function(){t.autoGrow&&t.calculateInputHeight()}),0)},methods:{calculateInputHeight:function(){var input=this.$refs.input;if(input){input.style.height="0";var t=input.scrollHeight,e=parseInt(this.rows,10)*parseFloat(this.rowHeight);input.style.height=Math.max(e,t)+"px"}},genInput:function(){var input=r.a.options.methods.genInput.call(this);return input.tag="textarea",delete input.data.attrs.type,input.data.attrs.rows=this.rows,input},onInput:function(t){r.a.options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}})},562:function(t,e,n){"use strict";n(11),n(9),n(6),n(4),n(10);var o=n(1);n(51);function r(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var l={data:function(){return{sendCheckDialog:!1,doctor:this.$store.state.form.doctor,priority:this.$store.state.form.priority,loading:!1,alert:!1,error:"",sendCheck:{petId:"",type:"",time:"",status:"",doctor:"",important:1,weight:"",temp:"",do:{check:[],other:{text:"",enabled:!1}},problem:"",appointId:""},valid:!0,rules:{important:[function(t){return!!t||"กรุณาเลือกความสำคัญ"}],weight:[function(t){return!!t||"กรุณากรอกน้ำหนัก"},function(t){return/^[0-9]*\.?[0-9]{1,2}$/.test(t)||"กรุณากรอกตัวเลขเท่านั้น"},function(t){return t&&t.split(".")[0].length<=3||"ไม่ควรกรอกน้ำหนักเกิน 3 หลัก"}],temp:[function(t){return/^[0-9]*\.?[0-9]{1,2}$/.test(t)||"กรุณากรอกตัวเลขเท่านั้น"},function(t){return!t||t.split(".")[0].length<=3||"ไม่ควรกรอกอุณหภูมิเกิน 3 หลัก"}]}}},watch:{sendCheckDialog:function(){!1===this.sendCheckDialog&&this.$refs.form.reset()}},mounted:function(){var t=this;0===this.$store.state.form.doctor.length&&this.$store.dispatch("form/addDoctor").then((function(e){t.doctor=e})),0===this.$store.state.form.priority.length&&this.$store.dispatch("form/addPriority").then((function(e){t.priority=e}))},methods:{open:function(t,e){this.sendCheck.petId=t,this.sendCheckDialog=!0,this.sendCheck.doctor=this.$store.getters.loggedInUser.roles.some((function(t){return 2===t.id}))?this.$store.getters.loggedInUser.id:""},open1:function(t,e,n){this.sendCheck.petId=t,this.sendCheck.doctor=null!==e?e:"",this.sendCheck.appointId=n,this.sendCheckDialog=!0},submitCheck:function(){var t=this;if(this.$refs.form.validate()){this.loading=!0;var e=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?r(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):r(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},this.sendCheck);e.do.other.enabled&&""!==e.do.other.text&&e.do.check.push(e.do.other.text);var n={petId:e.petId,doctorId:""===e.doctor?null:e.doctor,visitPriorityId:e.important,weight:e.weight,temp:""===e.temp?null:e.temp,visitCause:e.do.check.join(", "),note:e.problem,appointId:""===e.appointId?null:e.appointId};this.$axios.$post("/api/visits",n,{progress:!1}).then((function(n){setTimeout((function(){t.loading=!1,t.alert=!1,t.sendCheckDialog=!1,""!==e.appointId&&t.$emit("updateAppoint",{appointId:e.appointId,respone:n})}),500)})).catch((function(e){t.loading=!1,t.alert=!0,t.error=e.response.data.error.message}))}}}},c=n(39),d=n(50),v=n.n(d),f=n(474),x=n(110),h=n(184),m=n(62),_=n(483),k=n(470),C=n(480),w=n(462),y=n(475),D=n(185),$=n(112),V=n(120),S=n(183),I=n(472),O=n(518),T=n(476),j=n(457),N=n(521),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-dialog",{attrs:{"max-width":"700",scrollable:"",fullscreen:this.$vuetify.breakpoint.xsOnly},model:{value:t.sendCheckDialog,callback:function(e){t.sendCheckDialog=e},expression:"sendCheckDialog"}},[n("v-card",[n("h2",{staticClass:"pa-5 pb-2"},[t._v("ส่งตรวจ")]),t._v(" "),n("v-btn",{staticClass:"mt-4",attrs:{icon:"",absolute:"",right:""},on:{click:function(e){t.sendCheckDialog=!1}}},[n("v-icon",[t._v("mdi-close")])],1),t._v(" "),n("v-divider",{staticClass:"darker-divider"}),t._v(" "),n("v-card-text",[n("v-form",{ref:"form",attrs:{"lazy-validation":"",autocomplete:"off"},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{cols:"6"}},[n("v-select",{attrs:{disabled:t.loading,items:t.doctor,"item-text":"name","item-value":"id",color:"cusblue","item-color":"cusblue",label:"แพทย์ผู้ตรวจ","menu-props":{closeOnContentClick:!0}},scopedSlots:t._u([{key:"prepend-item",fn:function(){return[n("v-list-item",{style:""===t.sendCheck.doctor?"background-color: #e2f5fc":"",attrs:{ripple:""},on:{click:function(e){t.sendCheck.doctor=""}}},[n("v-list-item-content",[n("v-list-item-title",{class:""===t.sendCheck.doctor?"cusblue--text":""},[t._v("\n                        ไม่ระบุแพทย์\n                      ")])],1)],1),t._v(" "),n("v-divider",{staticClass:"mt-2"})]},proxy:!0}]),model:{value:t.sendCheck.doctor,callback:function(e){t.$set(t.sendCheck,"doctor",e)},expression:"sendCheck.doctor"}})],1),t._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-select",{attrs:{disabled:t.loading,items:t.priority,"item-text":"label","item-value":"id",color:"cusblue",label:"ความสำคัญ",rules:t.rules.important},model:{value:t.sendCheck.important,callback:function(e){t.$set(t.sendCheck,"important",e)},expression:"sendCheck.important"}})],1),t._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{disabled:t.loading,color:"cusblue",label:"นำหนัก / kg",rules:t.rules.weight},model:{value:t.sendCheck.weight,callback:function(e){t.$set(t.sendCheck,"weight",e)},expression:"sendCheck.weight"}})],1),t._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{disabled:t.loading,color:"cusblue",label:"อุณหภูมิ / F°",rules:t.rules.temp},model:{value:t.sendCheck.temp,callback:function(e){t.$set(t.sendCheck,"temp",e)},expression:"sendCheck.temp"}})],1),t._v(" "),n("v-col",{attrs:{cols:"6",sm:"4"}},[n("v-checkbox",{staticClass:"mx-2",attrs:{disabled:t.loading,value:"ดูอาการ",label:"ดูอาการ"},model:{value:t.sendCheck.do.check,callback:function(e){t.$set(t.sendCheck.do,"check",e)},expression:"sendCheck.do.check"}})],1),t._v(" "),n("v-col",{attrs:{cols:"6",sm:"4"}},[n("v-checkbox",{staticClass:"mx-2",attrs:{disabled:t.loading,value:"ทำแผล",label:"ทำแผล"},model:{value:t.sendCheck.do.check,callback:function(e){t.$set(t.sendCheck.do,"check",e)},expression:"sendCheck.do.check"}})],1),t._v(" "),n("v-col",{attrs:{cols:"6",sm:"4"}},[n("v-checkbox",{staticClass:"mx-2",attrs:{disabled:t.loading,value:"ฟังผลตรวจ",label:"ฟังผลตรวจ Lab"},model:{value:t.sendCheck.do.check,callback:function(e){t.$set(t.sendCheck.do,"check",e)},expression:"sendCheck.do.check"}})],1),t._v(" "),n("v-col",{attrs:{cols:"6",sm:"4"}},[n("v-checkbox",{staticClass:"mx-2",attrs:{disabled:t.loading,value:"ฉีดยา",label:"ฉีดยา"},model:{value:t.sendCheck.do.check,callback:function(e){t.$set(t.sendCheck.do,"check",e)},expression:"sendCheck.do.check"}})],1),t._v(" "),n("v-col",{attrs:{cols:"6",sm:"4"}},[n("v-checkbox",{staticClass:"mx-2",attrs:{disabled:t.loading,value:"ให้น้ำเกลือ",label:"ให้น้ำเกลือ"},model:{value:t.sendCheck.do.check,callback:function(e){t.$set(t.sendCheck.do,"check",e)},expression:"sendCheck.do.check"}})],1),t._v(" "),n("v-col",{attrs:{cols:"6",sm:"4"}},[n("v-checkbox",{staticClass:"mx-2",attrs:{disabled:t.loading,value:"Xray / Ultrasound",label:"Xray / Ultrasound"},model:{value:t.sendCheck.do.check,callback:function(e){t.$set(t.sendCheck.do,"check",e)},expression:"sendCheck.do.check"}})],1),t._v(" "),n("v-col",{staticClass:"px-3",attrs:{cols:"12"}},[n("v-row",{attrs:{align:"center","no-gutters":""}},[n("v-checkbox",{staticClass:"shrink mr-2 mt-0",attrs:{disabled:t.loading,"hide-details":"",label:"อื่นๆ"},model:{value:t.sendCheck.do.other.enabled,callback:function(e){t.$set(t.sendCheck.do.other,"enabled",e)},expression:"sendCheck.do.other.enabled"}}),t._v(" "),n("v-text-field",{staticClass:"mt-5",attrs:{color:"cusblue",dense:"",disabled:!t.sendCheck.do.other.enabled||t.loading},model:{value:t.sendCheck.do.other.text,callback:function(e){t.$set(t.sendCheck.do.other,"text",e)},expression:"sendCheck.do.other.text"}})],1)],1),t._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-textarea",{attrs:{disabled:t.loading,color:"cusblue",label:"Note","auto-grow":"","row-height":"24",rows:"1"},model:{value:t.sendCheck.problem,callback:function(e){t.$set(t.sendCheck,"problem",e)},expression:"sendCheck.problem"}})],1)],1),t._v(" "),n("v-alert",{attrs:{dense:"",text:"",color:"red",transition:"scroll-y-transition",dismissible:""},model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[t._v("\n            "+t._s(t.error)+"\n          ")])],1)],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"cusblue2",disabled:t.loading,text:""},on:{click:function(e){t.sendCheckDialog=!1}}},[t._v("\n          ไม่ส่ง\n        ")]),t._v(" "),n("v-btn",{attrs:{color:"cusblue2",disabled:!t.valid||t.loading,text:""},on:{click:t.submitCheck}},[n("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"mr-2",attrs:{indeterminate:"",color:"cusblue2",size:15,width:2}}),t._v("\n          ส่ง\n        ")],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.a=component.exports;v()(component,{VAlert:f.a,VBtn:x.a,VCard:h.a,VCardActions:m.a,VCardText:m.c,VCheckbox:_.a,VCol:k.a,VDialog:C.a,VDivider:w.a,VForm:y.a,VIcon:D.a,VListItem:$.a,VListItemContent:V.a,VListItemTitle:V.b,VProgressCircular:S.a,VRow:I.a,VSelect:O.a,VSpacer:T.a,VTextField:j.a,VTextarea:N.a})},625:function(t,e,n){"use strict";n.r(e);n(122),n(40);var o=n(7),r=(n(17),{props:{queueCount:{type:Number,required:!1,default:0}},data:function(){return{selectType:1,selectDoctor:"",type:this.$store.state.form.visitType,doctor:this.$store.state.form.doctor}},watch:{selectType:function(t){this.$emit("selectType",t),localStorage.visitType=t},selectDoctor:function(t){this.$emit("selectDoctor",t),localStorage.visitDoctor=t}},created:function(){var t=this;0===this.$store.state.form.doctor.length&&this.$store.dispatch("form/addDoctor").then((function(e){t.doctor=e})),0===this.$store.state.form.visitType.length&&this.$store.dispatch("form/addVisitType").then((function(e){t.type=e}))},mounted:function(){void 0!==localStorage.visitType&&(this.selectType=parseInt(localStorage.visitType)),void 0!==localStorage.visitDoctor&&(this.selectDoctor=this.defaultDoctor())},methods:{defaultDoctor:function(){return this.$store.getters.loggedInUser.roles.some((function(t){return 2===t.id}))?this.$store.getters.loggedInUser.id:parseInt(localStorage.visitDoctor)||""}}}),l=n(39),c=n(50),d=n.n(c),v=n(184),f=n(462),x=n(112),h=n(120),m=n(472),_=n(518),k=n(476),C=n(523),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{attrs:{color:"grey lighten-4",flat:"",tile:""}},[n("v-row",{class:"second-nav cusblue1 "+(this.$vuetify.breakpoint.xsOnly?"pb-2":""),attrs:{height:"55",align:"center",justify:"center",dense:"",flat:""}},[n("h1",{staticClass:"font-weight-medium col-sm-2 col-12"},[t._v("คิว ("+t._s(t.queueCount)+")")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-subheader",{directives:[{name:"show",rawName:"v-show",value:!this.$vuetify.breakpoint.smAndDown,expression:"!this.$vuetify.breakpoint.smAndDown"}],staticClass:"cus-subhead"},[t._v("ประเภทการตรวจ :\n    ")]),t._v(" "),n("v-select",{staticClass:"rounded-lg cus-input mr-3",attrs:{items:t.type,"item-text":"label","item-value":"id","background-color":"cusblue3","item-color":"cusblue",dark:"",filled:"",rounded:"","single-line":"",dense:"",flat:"","hide-details":""},model:{value:t.selectType,callback:function(e){t.selectType=e},expression:"selectType"}}),t._v(" "),n("v-subheader",{directives:[{name:"show",rawName:"v-show",value:!this.$vuetify.breakpoint.smAndDown,expression:"!this.$vuetify.breakpoint.smAndDown"}],staticClass:"cus-subhead"},[t._v("แพทย์ผู้ตรวจ :\n    ")]),t._v(" "),n("v-select",{staticClass:"rounded-lg cus-input",attrs:{items:t.doctor,"item-text":"name","item-value":"id","menu-props":{closeOnContentClick:!0},"background-color":"cusblue3","item-color":"cusblue",label:"ทั้งหมด",dark:"",filled:"",rounded:"","single-line":"",dense:"",flat:"","hide-details":""},scopedSlots:t._u([{key:"prepend-item",fn:function(){return[n("v-list-item",{style:""===t.selectDoctor?"background-color: #e2f5fc":"",attrs:{ripple:""},on:{click:function(e){t.selectDoctor=""}}},[n("v-list-item-content",[n("v-list-item-title",{class:""===t.selectDoctor?"cusblue--text":""},[t._v("\n              แสดงทั้งหมด\n            ")])],1)],1),t._v(" "),n("v-divider",{staticClass:"mt-2"})]},proxy:!0}]),model:{value:t.selectDoctor,callback:function(e){t.selectDoctor=e},expression:"selectDoctor"}})],1)],1)}),[],!1,null,null,null),w=component.exports;d()(component,{VCard:v.a,VDivider:f.a,VListItem:x.a,VListItemContent:h.a,VListItemTitle:h.b,VRow:m.a,VSelect:_.a,VSpacer:k.a,VSubheader:C.a});var y=n(16),D=n(497),$=n(86),V=n.n($),S={data:function(){return{assignModal:!1,id:"",date:"",time:"",countTime:"",dateNum:"",price:"",loading:!1}},methods:{open:function(t,e){this.id=t,this.date=V()(e).format("DD/MM/YYYY"),this.time=V()(e).format("HH:mm:ss");var n=V()(),o=V.a.duration(n.diff(e));this.countTime="".concat(o.days()," วัน ").concat(o.hours()," ชั่วโมง ").concat(o.minutes()," นาที"),parseInt(o.hours())>=1?this.dateNum=parseInt(o.days())+1:this.dateNum=o.days(),this.assignModal=!0},isNumber:function(t){var e=t.keyCode?t.keyCode:t.which;(e<48||e>57)&&t.preventDefault()},takeHome:function(){var t=this;this.loading=!0;var data={qty:this.dateNum,price:""===this.price?0:this.price};this.$axios.$patch("/api/visit/".concat(this.id,"/status/take-home"),data,{progress:!1}).then((function(e){setTimeout((function(){t.loading=!1,t.assignModal=!1}),500)})).catch((function(e){alert(e),t.loading=!1}))}}},I=n(110),O=n(62),T=n(470),j=n(480),N=n(183),P=n(457),A=Object(l.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-dialog",{attrs:{"max-width":"450",scrollable:"",fullscreen:this.$vuetify.breakpoint.xsOnly,transition:"dialog-transition"},model:{value:t.assignModal,callback:function(e){t.assignModal=e},expression:"assignModal"}},[n("v-card",[n("h2",{staticClass:"pa-5 pb-2"},[t._v("รับกลับบ้าน")]),t._v(" "),n("v-divider"),t._v(" "),n("v-card-text",[n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{disabled:"",color:"cusblue",label:"วันที่รับฝาก"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{disabled:"",color:"cusblue",label:"เวลารับฝาก"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),t._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{disabled:"",color:"cusblue",label:"สรุประยะเวลา"},model:{value:t.countTime,callback:function(e){t.countTime=e},expression:"countTime"}})],1),t._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{disabled:t.loading,color:"cusblue",label:"จำนวนวันฝาก"},on:{keypress:function(e){return t.isNumber(e)}},model:{value:t.dateNum,callback:function(e){t.dateNum=e},expression:"dateNum"}})],1),t._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{disabled:t.loading,color:"cusblue",label:"ราคาต่อวัน"},on:{keypress:function(e){return t.isNumber(e)}},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}})],1)],1)],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"cusblue2",disabled:t.loading,text:""},on:{click:function(e){t.assignModal=!1}}},[t._v("\n          ยกเลิก\n        ")]),t._v(" "),n("v-btn",{attrs:{color:"cusblue2",disabled:t.loading,text:""},on:{click:function(e){return t.takeHome()}}},[n("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"mr-2",attrs:{indeterminate:"",color:"cusblue2",size:15,width:2}}),t._v("\n          ตกลง\n        ")],1)],1)],1)],1)],1)}),[],!1,null,null,null),M=A.exports;d()(A,{VBtn:I.a,VCard:v.a,VCardActions:O.a,VCardText:O.c,VCol:T.a,VDialog:j.a,VDivider:f.a,VProgressCircular:N.a,VRow:m.a,VSpacer:k.a,VTextField:P.a});var H=n(484),U={components:{sendDoctorDialog:D.a,takeHomeDialog:M,confirmDialog:H.a},props:{dessert:{default:null,type:Array,required:!1}},data:function(){return{offset:!1,dialog:!1,sendDoctor:!1,headers:[{text:"ลำดับ",align:"center",sortable:!1,value:"id",class:"font-weight-bold"},{text:"เจ้าของ",value:"name",sortable:!1},{text:"สัตว์เลี้ยง",value:"pet",sortable:!1},{text:"ระยะเวลา",value:"time",sortable:!1},{text:"ความสำคัญ",value:"important",sortable:!1},{text:"แพทย์",value:"doctor",sortable:!1},{text:"สถานะ",value:"status",align:"left",sortable:!1},{text:"Action",value:"action",align:"center",sortable:!1}]}},computed:{},methods:{permission:function(t){var e=this,n=function(n){if(e.$store.getters.loggedInUser.roles.some((function(e){return e.id===t[n]}))||e.$store.getters.loggedInUser.isAdmin)return{v:!0}};for(var o in t){var r=n(o);if("object"===Object(y.a)(r))return r.v}return!1},backHome:function(t,e){this.$refs.takeHomeDialog.open(t,e)},openSendDocs:function(t,e){this.$refs.sendDoctor.open(t,e)},updateSend:function(t){this.$emit("update",t)},orderNum:function(data,t){return data.map((function(t){return t.id})).indexOf(t)+1},getColor:function(t){return 1===t?"rgb(255, 98, 98)":2===t?"rgb(255, 191, 72)":3===t?"rgb(79, 155, 255)":4===t?"rgb(214, 185, 81)":9===t?"rgb(255, 145, 98)":"rgb(87, 243, 87)"},updateStatus:function(t,e,n){var o=this;this.$refs.confirm.open("ยืนยัน".concat(2===e?"เข้ารับการตรวจ":3===e?"การรอผลตรวจ":4===e?"การรายงานผล":7===e?"การจบการรับบริการ":8===e&&9===n?"ยกเลิกการฝาก":8===e?"ยกเลิกการรักษา":"การจบการรักษา","?"),"ต้องการยืนยัน".concat(2===e?"เข้ารับการตรวจ":3===e?"การรอผลตรวจ":4===e?"การรายงานผล":7===e?"การจบการรับบริการ":8===e&&9===n?"ยกเลิกการฝากเลี้ยง":8===e?"ยกเลิกการรักษา":"การจบการรักษา","ใช่หรือไม่"),{width:290,color:8===e?"red":3===e?"primary":4===e?"rgb(214, 185, 81)":"green"}).then((function(n){o.$axios.$patch("/api/visits/".concat(t),{visitStatusId:e},{progress:!1}).then((function(n){2===e?o.$router.push("/queue/".concat(t)):8===e?(o.$emit("delete",t),o.cancelQueueDialog=!1):o.$emit("updateStatus",{visitId:t,visitStatusId:e})})).catch((function(t){alert(t)}))})).catch((function(){}))},discharge:function(t){var e=this;this.$refs.confirm.open("ยืนยันการจบการรับชำระ?","ต้องการยืนยันรับชำระเงินใช่หรือไม่",{width:300,color:"green"}).then((function(n){e.$axios.$patch("/api/visits/".concat(t,"/status/discharge"),null,{progress:!1}).then((function(n){void 0!==n.id&&e.$store.getters.loggedInUser.roles.some((function(t){return 6===t.id}))?e.$router.push("/pos/"+n.id):e.$emit("delete",t)})).catch((function(t){alert(t)}))})).catch((function(){}))}}},z=n(461),L=n(636),E=n(185),R=n(187),F=n(463),Q=Object(l.a)(U,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-data-table",{staticClass:"elevation-4 overflow-y-auto",attrs:{headers:t.headers,items:t.dessert,"disable-pagination":"","hide-default-footer":"","fixed-header":"",height:"calc(100vh - 160px)"},scopedSlots:t._u([{key:"item.id",fn:function(e){var o=e.item;return[n("div",{staticClass:"text-center"},[t._v("\n        "+t._s(t.orderNum(t.dessert,o.id))+"\n      ")])]}},{key:"item.name",fn:function(e){var o=e.item;return[t.permission([2,3,4,5])&&6!==o.visitStatus.id?n("div",{staticClass:"font-weight-medium"},[t.$store.getters.loggedInUser.roles.some((function(t){return 3===t.id||4===t.id||5===t.id}))&&1===o.visitStatus.id&&!t.permission([2])?n("span",[t._v("\n          "+t._s(o.pet.owner.name)+"\n        ")]):n("nuxt-link",{staticClass:"bold-owner text-decoration-none text-truncate",attrs:{to:t.$store.getters.loggedInUser.roles.some((function(t){return 3===t.id||4===t.id||5===t.id}))&&!t.permission([2])?"/queue/"+o.id+"/checklist":"/queue/"+o.id}},[t._v("\n          "+t._s(o.pet.owner.name)+"\n          "),n("v-icon",{attrs:{color:"cusblue2",small:""}},[t._v("mdi-chevron-right")])],1)],1):n("div",[t._v(t._s(o.pet.owner.name))])]}},{key:"item.pet",fn:function(e){var o=e.item;return[n("div",[t._v(t._s(o.pet.name+" ("+o.pet.type+")"))])]}},{key:"item.time",fn:function(e){var o=e.item;return[n("div",[t._v(t._s(t.$moment(o.visitAt).fromNow()))])]}},{key:"item.important",fn:function(e){var o=e.item;return[n("div",[t._v(t._s(o.visitPriority.label))])]}},{key:"item.doctor",fn:function(e){var o=e.item;return[n("div",[t._v(t._s(null!==o.doctor?o.doctor.name:""))])]}},{key:"item.status",fn:function(e){var o=e.item;return[n("v-chip",{attrs:{color:t.getColor(o.visitStatus.id),dark:"",small:"",label:""}},[t._v("\n        "+t._s(o.visitStatus.label)+"\n      ")])]}},{key:"item.action",fn:function(e){var o=e.item;return[n("v-menu",{attrs:{"offset-x":t.offset,"nudge-left":"200"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,l=e.attrs;return[n("v-btn",t._g(t._b({attrs:{color:"cusblue2 white--text",disabled:1===o.visitStatus.id&&!t.permission([1,2])||2===o.visitStatus.id&&!t.permission([2,3,4])||3===o.visitStatus.id&&!t.permission([2,3,4])||4===o.visitStatus.id&&!t.permission([2,3,4])||6===o.visitStatus.id&&!t.permission([1,2,6]),icon:"",depressed:""}},"v-btn",l,!1),r),[n("v-icon",[t._v("mdi-dots-horizontal-circle")])],1)]}}],null,!0)},[t._v(" "),n("v-list",{attrs:{width:"200"}},[n("v-list-item",[n("h4",[t._v("Action")])]),t._v(" "),n("v-divider"),t._v(" "),1===o.visitType.id||2===o.visitType.id?n("div",[1===o.visitStatus.id?n("div",[t.permission([2])?n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:""},on:{click:function(e){return t.updateStatus(o.id,2,o.visitStatus.id)}}},[t._v("\n                เข้ารับการตรวจ\n              ")]):t._e(),t._v(" "),t.permission([1,2])?n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:""},on:{click:function(e){return t.openSendDocs(null!==o.doctor?o.doctor.name:"none",o.id)}}},[t._v("\n                ส่งต่อ\n              ")]):t._e(),t._v(" "),t.permission([1,2])?n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:""},on:{click:function(e){return t.updateStatus(o.id,8,o.visitStatus.id)}}},[t._v("\n                ยกเลิกการรักษา\n              ")]):t._e()],1):2===o.visitStatus.id?n("div",[t.permission([2,3,4])?n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:""},on:{click:function(e){return t.updateStatus(o.id,3,o.visitStatus.id)}}},[t._v("\n                รอผลตรวจ\n              ")]):t._e(),t._v(" "),t.permission([2])?n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:""},on:{click:function(e){return t.updateStatus(o.id,6,o.visitStatus.id)}}},[t._v("\n                จบการรักษา\n              ")]):t._e()],1):3===o.visitStatus.id?n("div",[t.permission([2,3,4])?n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:""},on:{click:function(e){return t.updateStatus(o.id,4,o.visitStatus.id)}}},[t._v("\n                รายงานผล\n              ")]):t._e(),t._v(" "),t.permission([2])?n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:""},on:{click:function(e){return t.updateStatus(o.id,6,o.visitStatus.id)}}},[t._v("\n                จบการรักษา\n              ")]):t._e()],1):4===o.visitStatus.id?n("div",[t.permission([2,3,4])?n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:""},on:{click:function(e){return t.updateStatus(o.id,3,o.visitStatus.id)}}},[t._v("\n                รอผลตรวจ\n              ")]):t._e(),t._v(" "),t.permission([2])?n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:""},on:{click:function(e){return t.updateStatus(o.id,6,o.visitStatus.id)}}},[t._v("\n                จบการรักษา\n              ")]):t._e()],1):n("div",[t.permission([1,2,6])?n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:""},on:{click:function(e){return t.discharge(o.id)}}},[t._v("\n                รับชำระเงิน\n              ")]):t._e(),t._v(" "),t.permission([2])?n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:""},on:{click:function(e){return t.updateStatus(o.id,7,o.visitStatus.id)}}},[t._v("\n                จบการรับบริการ\n              ")]):t._e()],1)]):n("div",[t.permission([1,2,6])?n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:""},on:{click:function(e){return t.backHome(o.id,o.visitAt)}}},[t._v("\n              รับกลับบ้าน\n            ")]):t._e(),t._v(" "),t.permission([1,2])?n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:""},on:{click:function(e){return t.updateStatus(o.id,8,o.visitStatus.id)}}},[t._v("\n              ยกเลิก\n            ")]):t._e()],1)],1)],1)]}}],null,!0)}),t._v(" "),n("sendDoctorDialog",{ref:"sendDoctor",on:{updateDoctor:t.updateSend}}),t._v(" "),n("takeHomeDialog",{ref:"takeHomeDialog"}),t._v(" "),n("confirmDialog",{ref:"confirm"})],1)}),[],!1,null,null,null),B=Q.exports;d()(Q,{VBtn:I.a,VChip:z.a,VDataTable:L.a,VDivider:f.a,VIcon:E.a,VList:R.a,VListItem:x.a,VMenu:F.a});n(21),n(24),n(26);var Y={components:{sendcheckDialog:n(562).a},data:function(){return{assignModal:!1,menuDate:!1,offset:!0,date:null,appointQueue:[],ownerName:""}},computed:{selectDate:function(){return this.date?V()(this.date).format("DD/MM/YYYY"):null},appointFilter:function(){var t=this;return this.appointQueue.filter((function(e){return e.pet.owner.name.toLowerCase().includes(t.ownerName.toLowerCase())}))}},watch:{date:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$get("/api/appoints?date=".concat(t.date),{progress:!1});case 3:n=e.sent,t.appointQueue=n.results,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}},mounted:function(){this.date=(new Date).toISOString().substr(0,10)},methods:{sendCheck:function(t,e,n){var o=this;this.assignModal=!1,setTimeout((function(){o.$refs.checkDialog.open1(t,e,n)}),150)},UpdateAppoint:function(t){var e=this.appointQueue.findIndex((function(e){return e.id===t.appointId}));this.appointQueue.splice(e,1),this.$emit("updateVisit",t.respone)}}},G=n(635),J=n(67),X=Object(l.a)(Y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-btn",{key:t.$nuxt.$route.path,attrs:{color:"cusblue2",fixed:"",fab:"",large:"",dark:"",bottom:"",right:""},on:{click:function(e){e.stopPropagation(),t.assignModal=!0}}},[n("v-icon",[t._v("mdi-calendar-month")])],1),t._v(" "),n("v-dialog",{attrs:{"max-width":"450",scrollable:"",fullscreen:this.$vuetify.breakpoint.xsOnly},model:{value:t.assignModal,callback:function(e){t.assignModal=e},expression:"assignModal"}},[n("v-card",[n("h2",{staticClass:"pa-5 pb-2"},[t._v("ตารางนัดหมาย")]),t._v(" "),n("v-btn",{staticClass:"mt-4",attrs:{icon:"",absolute:"",right:""},on:{click:function(e){t.assignModal=!1}}},[n("v-icon",[t._v("mdi-close")])],1),t._v(" "),n("v-divider"),t._v(" "),n("div",{staticClass:"px-10 pb-10"},[n("v-row",{attrs:{align:"center",justify:"center",dense:""}},[n("v-col",{attrs:{cols:"12"}},[n("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[n("v-text-field",t._g(t._b({attrs:{color:"cusblue","append-icon":"mdi-calendar-month","background-color":"white",label:"วันที่นัดหมาย",readonly:"","hide-details":""},model:{value:t.selectDate,callback:function(e){t.selectDate=e},expression:"selectDate"}},"v-text-field",r,!1),o))]}}]),model:{value:t.menuDate,callback:function(e){t.menuDate=e},expression:"menuDate"}},[t._v(" "),n("v-date-picker",{ref:"picker",attrs:{color:"cusblue",min:"1950-01-01",locale:"th"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1),t._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{color:"cusblue","background-color":"white",label:"ชื่อ","hide-details":""},model:{value:t.ownerName,callback:function(e){t.ownerName=e},expression:"ownerName"}})],1)],1)],1),t._v(" "),n("v-divider",{staticClass:"darker-divider"}),t._v(" "),n("v-card-text",{staticClass:"pa-0",staticStyle:{height:"350px"}},[0!==t.appointQueue.length&&t.appointQueue!==[]?n("div",t._l(t.appointFilter,(function(e){return n("v-menu",{key:e.id,attrs:{"offset-x":t.offset,"max-width":"200"},scopedSlots:t._u([{key:"activator",fn:function(o){var r=o.on,l=o.attrs;return[n("v-list-item",t._g(t._b({staticClass:"py-5 px-10",staticStyle:{"border-bottom":"1px solid rgb(204, 204, 204)"},attrs:{link:""}},"v-list-item",l,!1),r),[n("v-row",{attrs:{align:"center",justify:"center","no-gutters":""}},[n("v-col",{staticClass:"font-weight-medium",attrs:{cols:"3"}},[t._v("เจ้าของ")]),t._v(" "),n("v-col",{staticClass:"font-weight-medium text-center",attrs:{cols:"1"}},[t._v(":")]),t._v(" "),n("v-col",{staticClass:"font-weight-medium",attrs:{cols:"8"}},[t._v("\n                    "+t._s(e.pet.owner.name)+"\n                  ")]),t._v(" "),n("v-col",{attrs:{cols:"3"}},[t._v("แพทย์")]),t._v(" "),n("v-col",{staticClass:"text-center",attrs:{cols:"1"}},[t._v(":")]),t._v(" "),n("v-col",{attrs:{cols:"8"}},[t._v("\n                    "+t._s(null!==e.doctor?e.doctor.name:"")+"\n                  ")]),t._v(" "),n("v-col",{attrs:{cols:"3"}},[t._v("สัตว์เลี้ยง")]),t._v(" "),n("v-col",{staticClass:"text-center",attrs:{cols:"1"}},[t._v(":")]),t._v(" "),n("v-col",{attrs:{cols:"8"}},[t._v("\n                    "+t._s(e.pet.name+"("+e.pet.type+")")+"\n                  ")]),t._v(" "),n("v-col",{attrs:{cols:"3"}},[t._v("นัดเพื่อ")]),t._v(" "),n("v-col",{staticClass:"text-center",attrs:{cols:"1"}},[t._v(":")]),t._v(" "),n("v-col",{attrs:{cols:"8"}},[t._v(t._s(e.cause))]),t._v(" "),n("v-col",{attrs:{cols:"3"}},[t._v("เวลา")]),t._v(" "),n("v-col",{staticClass:"text-center",attrs:{cols:"1"}},[t._v(":")]),t._v(" "),n("v-col",{attrs:{cols:"8"}},[t._v(t._s(e.appointTime)+" น.")])],1)],1)]}}],null,!0)},[t._v(" "),n("v-list",{staticClass:"pa-0"},[n("div",{staticClass:"px-2 pt-3"},[n("h3",[t._v("ยืนยันเข้ารับบริการ?")]),t._v(" "),n("v-divider"),t._v(" "),n("v-card-actions",{staticClass:"pa-0 pt-2"},[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"cusblue2",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n                    ยกเลิก\n                  ")]),t._v(" "),n("v-btn",{attrs:{color:"cusblue2",text:""},on:{click:function(n){return n.stopPropagation(),t.sendCheck(e.pet.id,null!==e.doctor?e.doctor.id:"",e.id)}}},[t._v("\n                    ตกลง\n                  ")])],1)],1)])],1)})),1):n("v-sheet",{attrs:{height:"100%",tile:""}},[n("v-row",{staticClass:"fill-height",attrs:{align:"center",justify:"center","no-gutters":""}},[n("span",{staticClass:"grey--text"},[t._v("Not Found Appoint")])])],1)],1)],1)],1),t._v(" "),n("sendcheckDialog",{ref:"checkDialog",on:{updateAppoint:t.UpdateAppoint}})],1)}),[],!1,null,null,null),K=X.exports;d()(X,{VBtn:I.a,VCard:v.a,VCardActions:O.a,VCardText:O.c,VCol:T.a,VDatePicker:G.a,VDialog:j.a,VDivider:f.a,VIcon:E.a,VList:R.a,VListItem:x.a,VMenu:F.a,VRow:m.a,VSheet:J.a,VSpacer:k.a,VTextField:P.a});var W={components:{queueNav:w,queueTable:B,queueDialog:K},validate:function(t){var e=t.store;return e.getters.loggedInUser.roles.some((function(t){return 1===t.id||2===t.id||3===t.id||4===t.id||5===t.id||6===t.id}))||e.getters.loggedInUser.isAdmin},asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$axios,e.next=3,n.$get("/api/visits",{progress:!1});case 3:return o=e.sent,e.abrupt("return",{visit:o.results});case 5:case"end":return e.stop()}}),e)})))()},data:function(){return{vsType:1,doctor:this.defaultDoctor()}},computed:{visitor:function(){var t=this;return this.visit.filter((function(e){return""===t.doctor?e.visitType.id===t.vsType:null!==e.doctor?e.visitType.id===t.vsType&&e.doctor.id===t.doctor:void 0}))}},methods:{defaultDoctor:function(){return this.$store.getters.loggedInUser.roles.some((function(t){return 2===t.id}))?this.$store.getters.loggedInUser.id:""},Type:function(select){this.vsType=select},Doctor:function(select){this.doctor=select},updateVisit:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("/api/visits",{progress:!1});case 2:n=t.sent,e.visit=n.results;case 4:case"end":return t.stop()}}),t)})))()},deleteQueue:function(t){var e=this,n=this.visit.findIndex((function(e){return e.id===t}));setTimeout((function(){e.visit.splice(n,1)}),200)}}},Z=Object(l.a)(W,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("queueNav",{attrs:{"queue-count":t.visit.length},on:{selectType:t.Type,selectDoctor:t.Doctor}}),t._v(" "),n("div",{staticClass:"custom-container"},[n("queueTable",{attrs:{dessert:t.visitor},on:{update:t.updateVisit,delete:t.deleteQueue,updateStatus:t.updateVisit}})],1),t._v(" "),n("queueDialog",{on:{updateVisit:t.updateVisit}})],1)}),[],!1,null,null,null);e.default=Z.exports}}]);