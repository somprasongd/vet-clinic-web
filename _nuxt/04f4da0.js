(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{487:function(e,t,n){"use strict";n(4);var o={data:function(){return{isShowDialog:!1,resolve:null,reject:null,message:null,title:null,options:{color:"primary",width:290,zIndex:200}}},methods:{open:function(title,e,t){var n=this;return this.isShowDialog=!0,this.$nextTick((function(){return n.$refs.cancelDialog.$el.focus()})),this.title=title,this.message=e,this.options=Object.assign(this.options,t),new Promise((function(e,t){n.resolve=e,n.reject=t}))},agree:function(){this.isShowDialog=!1,this.resolve(!0),this.$emit("onOk")},cancel:function(){this.isShowDialog=!1,this.resolve(!1),this.$emit("onCancel")}}},r=n(41),l=n(50),c=n.n(l),d=n(110),v=n(183),h=n(62),f=n(463),m=n(480),component=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{style:{zIndex:e.options.zIndex},attrs:{"max-width":e.options.width},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancel(t)}},model:{value:e.isShowDialog,callback:function(t){e.isShowDialog=t},expression:"isShowDialog"}},[n("v-card",[n("h2",{staticClass:"pl-6 pt-3 pb-2"},[e._v(e._s(e.title))]),e._v(" "),n("v-card-text",{directives:[{name:"show",rawName:"v-show",value:!!e.message,expression:"!!message"}]},[e._v(" "+e._s(e.message)+" ")]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{ref:"btnOk",attrs:{color:e.options.color,text:""},nativeOn:{click:function(t){return e.agree(t)}}},[e._v("\n        ใช่\n      ")]),e._v(" "),n("v-btn",{ref:"cancelDialog",attrs:{color:"grey",text:""},nativeOn:{click:function(t){return e.cancel(t)}}},[e._v("\n        ไม่\n      ")])],1)],1)],1)}),[],!1,null,null,null);t.a=component.exports;c()(component,{VBtn:d.a,VCard:v.a,VCardActions:h.a,VCardText:h.c,VDialog:f.a,VSpacer:m.a})},489:function(e,t,n){"use strict";var o=n(124),r=n(59),l=n(123),c=n(0),d=n(3),v=Object(d.a)(o.a,Object(r.a)("windowGroup","v-window-item","v-window"));t.a=v.extend().extend().extend({name:"v-window-item",directives:{Touch:l.a},props:{disabled:Boolean,reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},value:{required:!1}},data:function(){return{isActive:!1,inTransition:!1}},computed:{classes:function(){return this.groupClasses},computedTransition:function(){return this.windowGroup.internalReverse?void 0!==this.reverseTransition?this.reverseTransition||"":this.windowGroup.computedTransition:void 0!==this.transition?this.transition||"":this.windowGroup.computedTransition}},methods:{genDefaultSlot:function(){return this.$slots.default},genWindowItem:function(){return this.$createElement("div",{staticClass:"v-window-item",class:this.classes,directives:[{name:"show",value:this.isActive}],on:this.$listeners},this.genDefaultSlot())},onAfterTransition:function(){this.inTransition&&(this.inTransition=!1,this.windowGroup.transitionCount>0&&(this.windowGroup.transitionCount--,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=void 0)))},onBeforeTransition:function(){this.inTransition||(this.inTransition=!0,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=Object(c.g)(this.windowGroup.$el.clientHeight)),this.windowGroup.transitionCount++)},onTransitionCancelled:function(){this.onAfterTransition()},onEnter:function(e){var t=this;this.inTransition&&this.$nextTick((function(){t.computedTransition&&t.inTransition&&(t.windowGroup.transitionHeight=Object(c.g)(e.clientHeight))}))}},render:function(e){var t=this;return e("transition",{props:{name:this.computedTransition},on:{beforeEnter:this.onBeforeTransition,afterEnter:this.onAfterTransition,enterCancelled:this.onTransitionCancelled,beforeLeave:this.onBeforeTransition,afterLeave:this.onAfterTransition,leaveCancelled:this.onTransitionCancelled,enter:this.onEnter}},this.showLazyContent((function(){return[t.genWindowItem()]})))}})},493:function(e,t,n){var content=n(494);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(13).default)("5c8fbe94",content,!0,{sourceMap:!1})},494:function(e,t,n){(t=n(12)(!1)).push([e.i,".v-textarea textarea{align-self:stretch;flex:1 1 auto;line-height:1.75rem;max-width:100%;min-height:32px;outline:none;padding:0;width:100%}.v-textarea .v-text-field__prefix,.v-textarea .v-text-field__suffix{padding-top:2px;align-self:start}.v-textarea.v-text-field--box .v-text-field__prefix,.v-textarea.v-text-field--box textarea,.v-textarea.v-text-field--enclosed .v-text-field__prefix,.v-textarea.v-text-field--enclosed textarea{margin-top:24px}.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) textarea,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) textarea,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) textarea,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) textarea{margin-top:10px}.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) .v-label,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) .v-label,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) .v-label,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) .v-label{top:18px}.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense textarea,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense textarea,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense textarea,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense textarea{margin-top:6px}.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__prepend-outer,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__prepend-outer,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__prepend-outer,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__prepend-outer{align-self:flex-start;margin-top:8px}.v-textarea.v-text-field--solo{align-items:flex-start}.v-textarea.v-text-field--solo .v-input__append-inner,.v-textarea.v-text-field--solo .v-input__append-outer,.v-textarea.v-text-field--solo .v-input__prepend-inner,.v-textarea.v-text-field--solo .v-input__prepend-outer{align-self:flex-start;margin-top:12px}.v-application--is-ltr .v-textarea.v-text-field--solo .v-input__append-inner{padding-left:12px}.v-application--is-rtl .v-textarea.v-text-field--solo .v-input__append-inner{padding-right:12px}.v-textarea--auto-grow textarea{overflow:hidden}.v-textarea--no-resize textarea{resize:none}.v-textarea.v-text-field--enclosed .v-text-field__slot{align-self:stretch}.v-application--is-ltr .v-textarea.v-text-field--enclosed .v-text-field__slot{margin-right:-12px}.v-application--is-rtl .v-textarea.v-text-field--enclosed .v-text-field__slot{margin-left:-12px}.v-application--is-ltr .v-textarea.v-text-field--enclosed .v-text-field__slot textarea{padding-right:12px}.v-application--is-rtl .v-textarea.v-text-field--enclosed .v-text-field__slot textarea{padding-left:12px}",""]),e.exports=t},498:function(e,t,n){var content=n(502);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(13).default)("50788f08",content,!0,{sourceMap:!1})},502:function(e,t,n){(t=n(12)(!1)).push([e.i,".v-autocomplete.v-input>.v-input__control>.v-input__slot{cursor:text}.v-autocomplete input{align-self:center}.v-autocomplete.v-select.v-input--is-focused input{min-width:64px}.v-autocomplete:not(.v-input--is-focused).v-select--chips input{max-height:0;padding:0}.v-autocomplete--is-selecting-index input{opacity:0}.v-autocomplete.v-text-field--enclosed:not(.v-text-field--solo):not(.v-text-field--single-line):not(.v-text-field--outlined) .v-select__slot>input{margin-top:24px}.v-autocomplete.v-text-field--enclosed:not(.v-text-field--solo):not(.v-text-field--single-line):not(.v-text-field--outlined).v-input--dense .v-select__slot>input{margin-top:20px}.v-autocomplete:not(.v-input--is-disabled).v-select.v-text-field input{pointer-events:inherit}.v-autocomplete__content.v-menu__content,.v-autocomplete__content.v-menu__content .v-card{border-radius:0}",""]),e.exports=t},509:function(e,t,n){"use strict";n(11),n(9),n(6),n(4),n(10);var o=n(1),r=(n(17),n(493),n(460)),l=n(3);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var d=Object(l.a)(r.a);t.a=d.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(e){return!isNaN(parseFloat(e))}},rows:{type:[Number,String],default:5,validator:function(e){return!isNaN(parseInt(e,10))}}},computed:{classes:function(){return function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle},r.a.options.computed.classes.call(this))},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{lazyValue:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var e=this;setTimeout((function(){e.autoGrow&&e.calculateInputHeight()}),0)},methods:{calculateInputHeight:function(){var input=this.$refs.input;if(input){input.style.height="0";var e=input.scrollHeight,t=parseInt(this.rows,10)*parseFloat(this.rowHeight);input.style.height=Math.max(t,e)+"px"}},genInput:function(){var input=r.a.options.methods.genInput.call(this);return input.tag="textarea",delete input.data.attrs.type,input.data.attrs.rows=this.rows,input},onInput:function(e){r.a.options.methods.onInput.call(this,e),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(e){this.isFocused&&13===e.keyCode&&e.stopPropagation(),this.$emit("keydown",e)}}})},523:function(e,t,n){"use strict";var o=n(489);t.a=o.a.extend({name:"v-tab-item",props:{id:String},methods:{genWindowItem:function(){var e=o.a.options.methods.genWindowItem.call(this);return e.data.domProps=e.data.domProps||{},e.data.domProps.id=this.id||this.value,e}}})},524:function(e,t,n){"use strict";n(11),n(9),n(6),n(4),n(10),n(54);var o=n(1),r=(n(498),n(504)),l=n(460),c=n(45),d=n(0);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function h(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f=h(h({},r.b),{},{offsetY:!0,offsetOverflow:!0,transition:!1});t.a=r.a.extend({name:"v-autocomplete",props:{allowOverflow:{type:Boolean,default:!0},autoSelectFirst:{type:Boolean,default:!1},filter:{type:Function,default:function(e,t,n){return n.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1}},hideNoData:Boolean,menuProps:{type:r.a.options.props.menuProps.type,default:function(){return f}},noFilter:Boolean,searchInput:{type:String,default:void 0}},data:function(){return{lazySearch:this.searchInput}},computed:{classes:function(){return h(h({},r.a.options.computed.classes.call(this)),{},{"v-autocomplete":!0,"v-autocomplete--is-selecting-index":this.selectedIndex>-1})},computedItems:function(){return this.filteredItems},selectedValues:function(){var e=this;return this.selectedItems.map((function(t){return e.getValue(t)}))},hasDisplayedItems:function(){var e=this;return this.hideSelected?this.filteredItems.some((function(t){return!e.hasItem(t)})):this.filteredItems.length>0},currentRange:function(){return null==this.selectedItem?0:String(this.getText(this.selectedItem)).length},filteredItems:function(){var e=this;return!this.isSearching||this.noFilter||null==this.internalSearch?this.allItems:this.allItems.filter((function(t){var n=Object(d.r)(t,e.itemText),text=null!=n?String(n):"";return e.filter(t,String(e.internalSearch),text)}))},internalSearch:{get:function(){return this.lazySearch},set:function(e){this.lazySearch=e,this.$emit("update:search-input",e)}},isAnyValueAllowed:function(){return!1},isDirty:function(){return this.searchIsDirty||this.selectedItems.length>0},isSearching:function(){return this.multiple&&this.searchIsDirty||this.searchIsDirty&&this.internalSearch!==this.getText(this.selectedItem)},menuCanShow:function(){return!!this.isFocused&&(this.hasDisplayedItems||!this.hideNoData)},$_menuProps:function(){var e=r.a.options.computed.$_menuProps.call(this);return e.contentClass="v-autocomplete__content ".concat(e.contentClass||"").trim(),h(h({},f),e)},searchIsDirty:function(){return null!=this.internalSearch&&""!==this.internalSearch},selectedItem:function(){var e=this;return this.multiple?null:this.selectedItems.find((function(i){return e.valueComparator(e.getValue(i),e.getValue(e.internalValue))}))},listData:function(){var data=r.a.options.computed.listData.call(this);return data.props=h(h({},data.props),{},{items:this.virtualizedItems,noFilter:this.noFilter||!this.isSearching||!this.filteredItems.length,searchInput:this.internalSearch}),data}},watch:{filteredItems:"onFilteredItemsChanged",internalValue:"setSearch",isFocused:function(e){e?(document.addEventListener("copy",this.onCopy),this.$refs.input&&this.$refs.input.select()):(document.removeEventListener("copy",this.onCopy),this.updateSelf())},isMenuActive:function(e){!e&&this.hasSlot&&(this.lazySearch=void 0)},items:function(e,t){t&&t.length||!this.hideNoData||!this.isFocused||this.isMenuActive||!e.length||this.activateMenu()},searchInput:function(e){this.lazySearch=e},internalSearch:"onInternalSearchChanged",itemText:"updateSelf"},created:function(){this.setSearch()},destroyed:function(){document.removeEventListener("copy",this.onCopy)},methods:{onFilteredItemsChanged:function(e,t){var n=this;e!==t&&(this.setMenuIndex(-1),this.$nextTick((function(){n.internalSearch&&(1===e.length||n.autoSelectFirst)&&(n.$refs.menu.getTiles(),n.setMenuIndex(0))})))},onInternalSearchChanged:function(){this.updateMenuDimensions()},updateMenuDimensions:function(){this.isMenuActive&&this.$refs.menu&&this.$refs.menu.updateDimensions()},changeSelectedIndex:function(e){this.searchIsDirty||(this.multiple&&e===d.x.left?-1===this.selectedIndex?this.selectedIndex=this.selectedItems.length-1:this.selectedIndex--:this.multiple&&e===d.x.right?this.selectedIndex>=this.selectedItems.length-1?this.selectedIndex=-1:this.selectedIndex++:e!==d.x.backspace&&e!==d.x.delete||this.deleteCurrentItem())},deleteCurrentItem:function(){var e=this.selectedIndex,t=this.selectedItems[e];if(this.isInteractive&&!this.getDisabled(t)){var n=this.selectedItems.length-1;if(-1!==this.selectedIndex||0===n){var o=e!==this.selectedItems.length-1?e:e-1;this.selectedItems[o]?this.selectItem(t):this.setValue(this.multiple?[]:void 0),this.selectedIndex=o}else this.selectedIndex=n}},clearableCallback:function(){this.internalSearch=void 0,r.a.options.methods.clearableCallback.call(this)},genInput:function(){var input=l.a.options.methods.genInput.call(this);return input.data=Object(c.a)(input.data,{attrs:{"aria-activedescendant":Object(d.p)(this.$refs.menu,"activeTile.id"),autocomplete:Object(d.p)(input.data,"attrs.autocomplete","off")},domProps:{value:this.internalSearch}}),input},genInputSlot:function(){var slot=r.a.options.methods.genInputSlot.call(this);return slot.data.attrs.role="combobox",slot},genSelections:function(){return this.hasSlot||this.multiple?r.a.options.methods.genSelections.call(this):[]},onClick:function(e){this.isInteractive&&(this.selectedIndex>-1?this.selectedIndex=-1:this.onFocus(),this.isAppendInner(e.target)||this.activateMenu())},onInput:function(e){if(!(this.selectedIndex>-1)&&e.target){var t=e.target,n=t.value;t.value&&this.activateMenu(),this.internalSearch=n,this.badInput=t.validity&&t.validity.badInput}},onKeyDown:function(e){var t=e.keyCode;r.a.options.methods.onKeyDown.call(this,e),this.changeSelectedIndex(t)},onSpaceDown:function(e){},onTabDown:function(e){r.a.options.methods.onTabDown.call(this,e),this.updateSelf()},onUpDown:function(e){e.preventDefault(),this.activateMenu()},selectItem:function(e){r.a.options.methods.selectItem.call(this,e),this.setSearch()},setSelectedItems:function(){r.a.options.methods.setSelectedItems.call(this),this.isFocused||this.setSearch()},setSearch:function(){var e=this;this.$nextTick((function(){e.multiple&&e.internalSearch&&e.isMenuActive||(e.internalSearch=!e.selectedItems.length||e.multiple||e.hasSlot?null:e.getText(e.selectedItem))}))},updateSelf:function(){(this.searchIsDirty||this.internalValue)&&(this.valueComparator(this.internalSearch,this.getValue(this.internalValue))||this.setSearch())},hasItem:function(e){return this.selectedValues.indexOf(this.getValue(e))>-1},onCopy:function(e){if(-1!==this.selectedIndex){var t=this.selectedItems[this.selectedIndex],n=this.getText(t);e.clipboardData.setData("text/plain",n),e.clipboardData.setData("text/vnd.vuetify.autocomplete.item+plain",n),e.preventDefault()}}}})},537:function(e,t,n){"use strict";n(11),n(9),n(6),n(4),n(10);var o=n(1),r=(n(42),n(7)),l=n(86),c=n.n(l);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var v={data:function(){return{petId:"",appointDialog:!1,valid:!1,loading:!1,alert:!1,error:"",oldAppointDialog:!1,oldAppoint:[],menuDate:!1,AppointDate:!1,AppointTime:!1,appointType:this.$store.state.form.appointType,doctor:this.$store.state.form.doctor,plusBtn:[{text:"+3",value:3},{text:"+5",value:5},{text:"+7",value:7},{text:"+30",value:30}],sendAppoint:{petId:"",appointDate:"",appointTime:"",doctor:"",cause:"",remark:"",fromVisitId:""},rules:{appointDate:[function(e){return!!e||"กรุณาเลือกวันที่นัด"}],appointTime:[function(e){return!!e||"กรุณาเลือกเวลานัด"}],cause:[function(e){return!!e||"กรุณากรอกสาเหตุการนัด"},function(e){return e.length<=1e3||"ไม่ควรกรอกสาเหตุการนัด 1000 ตัวอักษร"}],remark:[function(e){return e.length<=1e3||"ไม่ควรกรอกหมายเหตุเกิน 1000 ตัวอักษร"}]}}},computed:{selectDate:function(){return this.sendAppoint.appointDate?c()(this.sendAppoint.appointDate).format("DD/MM/YYYY"):null}},mounted:function(){var e=this;0===this.$store.state.form.doctor.length&&this.$store.dispatch("form/addDoctor").then((function(t){e.doctor=t})),0===this.$store.state.form.appointType.length&&this.$store.dispatch("form/addappointType").then((function(t){e.appointType=t}))},methods:{open:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.sendAppoint.petId=e,t.sendAppoint.appointDate=(new Date).toISOString().substr(0,10),t.sendAppoint.appointTime=c()().format("HH:mm"),n.next=5,t.$axios.$get("/api/appoints?petId=".concat(e),{progress:!1});case 5:0!==(o=n.sent).results.length?(t.oldAppoint=o.results,t.oldAppointDialog=!0):t.appointDialog=!0;case 7:case"end":return n.stop()}}),n)})))()},addText:function(text){this.sendAppoint.cause=this.sendAppoint.cause+text},showAddDialog:function(){var e=this;this.oldAppointDialog=!1,setTimeout((function(){e.appointDialog=!0}),150)},plusDate:function(e){this.sendAppoint.appointDate=c()(this.sendAppoint.appointDate).add(e,"days").format("YYYY-MM-DD")},submitAppoint:function(){var e=this;if(this.$refs.form.validate()){this.loading=!0;var t=function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},this.sendAppoint),n={petId:t.petId,doctorId:""===t.doctor?null:t.doctor,appointDate:t.appointDate,appointTime:t.appointTime,cause:t.cause,remark:t.remark,fromVisitId:void 0!==this.$route.params.queue?parseInt(this.$route.params.queue):null};this.$axios.$post("/api/appoints",n,{progress:!1}).then((function(t){e.successSubmit(t,n.petId)})).catch((function(t){e.errorSubmit(t)}))}},successSubmit:function(e,t){var n=this;setTimeout((function(){n.loading=!1,n.alert=!1,n.appointDialog=!1,n.sendAppoint.cause="",n.sendAppoint.remark="",n.$refs.form.resetValidation(),n.$emit("updateAppoint",{appointDate:e.appointDate,petId:t})}),500)},errorSubmit:function(e){this.loading=!1,this.alert=!0,this.error=e.response.data.error.message}}},h=n(41),f=n(50),m=n.n(f),x=n(486),k=n(110),_=n(183),y=n(62),D=n(464),w=n(473),C=n(638),I=n(463),O=n(465),S=n(479),$=n(184),V=n(112),T=n(120),j=n(466),A=n(175),P=n(475),E=n(504),N=n(480),M=n(483),F=n(523),Y=n(484),z=n(460),B=n(509),L=n(648),component=Object(h.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-dialog",{attrs:{"max-width":"800",scrollable:"",fullscreen:this.$vuetify.breakpoint.xsOnly},model:{value:e.appointDialog,callback:function(t){e.appointDialog=t},expression:"appointDialog"}},[n("v-card",[n("h2",{staticClass:"pa-5 pb-2"},[e._v("ทำนัด")]),e._v(" "),n("v-btn",{staticClass:"mt-4",attrs:{icon:"",absolute:"",right:""},on:{click:function(t){e.appointDialog=!1}}},[n("v-icon",[e._v("mdi-close")])],1),e._v(" "),n("v-divider",{staticClass:"darker-divider"}),e._v(" "),n("v-card-text",[n("v-form",{ref:"form",attrs:{"lazy-validation":"",autocomplete:"off"},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-col",{attrs:{cols:"12"}},[n("v-select",{attrs:{disabled:e.loading,items:e.doctor,"item-text":"name","item-value":"id",color:"cusblue","item-color":"cusblue",label:"แพทย์ผู้ตรวจ","menu-props":{closeOnContentClick:!0}},scopedSlots:e._u([{key:"prepend-item",fn:function(){return[n("v-list-item",{style:""===e.sendAppoint.doctor?"background-color: #e2f5fc":"",attrs:{ripple:""},on:{click:function(t){e.sendAppoint.doctor=""}}},[n("v-list-item-content",[n("v-list-item-title",{class:""===e.sendAppoint.doctor?"cusblue--text":""},[e._v("\n                        ไม่ระบุแพทย์\n                      ")])],1)],1),e._v(" "),n("v-divider",{staticClass:"mt-2"})]},proxy:!0}]),model:{value:e.sendAppoint.doctor,callback:function(t){e.$set(e.sendAppoint,"doctor",t)},expression:"sendAppoint.doctor"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,r=t.attrs;return[n("v-text-field",e._g(e._b({ref:"bd",attrs:{disabled:e.loading,rules:e.rules.selectDate,label:"วันที่นัด",color:"cusblue","append-icon":"mdi-calendar-month",readonly:""},scopedSlots:e._u([{key:"append",fn:function(){return e._l(e.plusBtn,(function(t){return n("v-btn",{key:t.value,staticClass:"mb-1 ml-1",attrs:{color:"cusblue3 white--text",depressed:"",icon:"",small:"",outlined:""},on:{click:function(n){return e.plusDate(t.value)}}},[e._v("\n                        "+e._s(t.text)+"\n                      ")])}))},proxy:!0}],null,!0),model:{value:e.selectDate,callback:function(t){e.selectDate=t},expression:"selectDate"}},"v-text-field",r,!1),o))]}}]),model:{value:e.menuDate,callback:function(t){e.menuDate=t},expression:"menuDate"}},[e._v(" "),n("v-date-picker",{ref:"picker",attrs:{color:"cusblue",min:(new Date).toISOString().substr(0,10),value:"YYYY-mm",locale:"th","show-current":!1,scrollable:""},model:{value:e.sendAppoint.appointDate,callback:function(t){e.$set(e.sendAppoint,"appointDate",t)},expression:"sendAppoint.appointDate"}})],1)],1),e._v(" "),n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,r=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{disabled:e.loading,rules:e.rules.appointTime,color:"cusblue","append-icon":"mdi-clock-outline","background-color":"white",label:"เวลา",readonly:""},model:{value:e.sendAppoint.appointTime,callback:function(t){e.$set(e.sendAppoint,"appointTime",t)},expression:"sendAppoint.appointTime"}},"v-text-field",r,!1),o))]}}]),model:{value:e.AppointTime,callback:function(t){e.AppointTime=t},expression:"AppointTime"}},[e._v(" "),n("v-time-picker",{ref:"picker",attrs:{color:"cusblue",format:"24hr",scrollable:""},model:{value:e.sendAppoint.appointTime,callback:function(t){e.$set(e.sendAppoint,"appointTime",t)},expression:"sendAppoint.appointTime"}})],1)],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-textarea",{attrs:{disabled:e.loading,rules:e.rules.cause,label:"สาเหตุการนัด",color:"cusblue","auto-grow":"","row-height":"24",rows:"1"},model:{value:e.sendAppoint.cause,callback:function(t){e.$set(e.sendAppoint,"cause",t)},expression:"sendAppoint.cause"}}),e._v(" "),e._l(e.appointType,(function(t){return n("v-chip",{key:t.id,staticClass:"mx-1",attrs:{small:""},on:{click:function(n){return e.addText(t.label)}}},[e._v("\n                "+e._s(t.label)+"\n              ")])}))],2),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-textarea",{attrs:{disabled:e.loading,rules:e.rules.remark,label:"หมายเหตุ",color:"cusblue","auto-grow":"","row-height":"24",rows:"1"},model:{value:e.sendAppoint.remark,callback:function(t){e.$set(e.sendAppoint,"remark",t)},expression:"sendAppoint.remark"}})],1)],1),e._v(" "),n("v-alert",{attrs:{dense:"",text:"",color:"red",transition:"scroll-y-transition",dismissible:""},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[e._v("\n            "+e._s(e.error)+"\n          ")])],1)],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{staticClass:"cusblue2--text text-none",attrs:{disabled:e.loading,text:""},on:{click:function(t){e.appointDialog=!1}}},[e._v("\n          ยกเลิก\n        ")]),e._v(" "),n("v-btn",{staticClass:"cusblue2--text text-none",attrs:{disabled:!e.valid||e.loading,text:""},on:{click:e.submitAppoint}},[n("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"mr-2",attrs:{indeterminate:"",color:"cusblue2",size:15,width:2}}),e._v("\n          บันทึก\n        ")],1)],1)],1)],1),e._v(" "),n("v-dialog",{attrs:{"max-width":"500",scrollable:"",fullscreen:this.$vuetify.breakpoint.xsOnly},model:{value:e.oldAppointDialog,callback:function(t){e.oldAppointDialog=t},expression:"oldAppointDialog"}},[n("v-card",[n("h2",{staticClass:"pa-5 pb-2"},[e._v("นัดหมายเก่า")]),e._v(" "),n("v-btn",{staticClass:"mt-4",attrs:{icon:"",absolute:"",right:""},on:{click:function(t){e.oldAppointDialog=!1}}},[n("v-icon",[e._v("mdi-close")])],1),e._v(" "),n("v-divider",{staticClass:"darker-divider"}),e._v(" "),n("v-tabs",{staticClass:"pb-5",attrs:{"show-arrows":"",grow:"","hide-slider":"",color:"cusblue"}},[e._l(e.oldAppoint,(function(t){return n("v-tab",{key:t.id},[n("v-icon",{attrs:{left:""}},[e._v("mdi-calendar-month")]),e._v("\n          "+e._s(e.$moment(t.appointDate).format("DD/MM/YYYY"))+"\n        ")],1)})),e._v(" "),e._l(e.oldAppoint,(function(t){return n("v-tab-item",{key:t.id},[n("v-card",{attrs:{flat:""}},[n("v-card-text",[n("v-text-field",{attrs:{label:"เจ้าของ",value:t.pet.owner.name,disabled:""}}),e._v(" "),n("v-text-field",{attrs:{label:"แพทย์",value:null!==t.doctor?t.doctor.name:"ไม่ระบุแพทย์",disabled:""}}),e._v(" "),n("v-text-field",{attrs:{label:"สัตว์เลี้ยง",value:t.pet.name+"("+t.pet.type+")",disabled:""}}),e._v(" "),n("v-text-field",{attrs:{label:"นัดเพื่อ",value:t.cause,disabled:""}}),e._v(" "),n("v-text-field",{attrs:{label:"เวลา",value:t.appointTime,disabled:""}})],1)],1)],1)}))],2),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"cusblue2",text:""},on:{click:function(t){e.oldAppointDialog=!1}}},[e._v("\n          ยกเลิก\n        ")]),e._v(" "),n("v-btn",{attrs:{color:"cusblue2",text:""},on:{click:e.showAddDialog}},[e._v(" เพิ่ม ")])],1)],1)],1)],1)}),[],!1,null,null,null);t.a=component.exports;m()(component,{VAlert:x.a,VBtn:k.a,VCard:_.a,VCardActions:y.a,VCardText:y.c,VChip:D.a,VCol:w.a,VDatePicker:C.a,VDialog:I.a,VDivider:O.a,VForm:S.a,VIcon:$.a,VListItem:V.a,VListItemContent:T.a,VListItemTitle:T.b,VMenu:j.a,VProgressCircular:A.a,VRow:P.a,VSelect:E.a,VSpacer:N.a,VTab:M.a,VTabItem:F.a,VTabs:Y.a,VTextField:z.a,VTextarea:B.a,VTimePicker:L.a})},538:function(e,t,n){"use strict";n(11),n(9),n(6),n(4),n(10);var o=n(1);n(51);function r(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var l={data:function(){return{sendCheckDialog:!1,loading:!1,alert:!1,error:"",sendCheck:{petId:"",type:"",time:"",status:"",doctorId:"",important:1,weight:"",temp:"",do:{check:[],other:{text:"",enabled:!1}},problem:"",appointId:""},valid:!0,rules:{important:[function(e){return!!e||"กรุณาเลือกความสำคัญ"}],weight:[function(e){return!!e||"กรุณากรอกน้ำหนัก"},function(e){return/^[0-9]*\.?[0-9]{1,2}$/.test(e)||"กรุณากรอกตัวเลขเท่านั้น"},function(e){return e&&e.split(".")[0].length<=3||"ไม่ควรกรอกน้ำหนักเกิน 3 หลัก"}],temp:[function(e){return!e||/^[0-9]*\.?[0-9]{1,2}$/.test(e)||"กรุณากรอกตัวเลขเท่านั้น"},function(e){return!e||e.split(".")[0].length<=3||"ไม่ควรกรอกอุณหภูมิเกิน 3 หลัก"}]}}},computed:{doctorListItems:function(){return this.$store.state.form.doctor},priorityListItems:function(){return this.$store.state.form.priority}},watch:{sendCheckDialog:function(){!1===this.sendCheckDialog&&this.$refs.form.reset()}},mounted:function(){0===this.$store.state.form.doctor.length&&this.$store.dispatch("form/addDoctor"),0===this.$store.state.form.priority.length&&this.$store.dispatch("form/addPriority")},methods:{open:function(e){this.sendCheck.petId=e,this.sendCheck.doctorId=this.$store.getters.loggedInUser.roles.some((function(e){return 2===e.id}))?this.$store.getters.loggedInUser.id:"",this.sendCheck.appointId=null,this.sendCheckDialog=!0},openWithAppointment:function(e,t,n){this.sendCheck.petId=e,this.sendCheck.doctorId=null!==t?t:"",this.sendCheck.appointId=n,this.sendCheckDialog=!0},submitCheck:function(){var e=this;if(this.$refs.form.validate()){this.loading=!0;var t=function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?r(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):r(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},this.sendCheck);t.do.other.enabled&&""!==t.do.other.text&&t.do.check.push(t.do.other.text);var n={petId:t.petId,doctorId:""===t.doctorId?null:t.doctorId,visitPriorityId:t.important,weight:t.weight,temp:""===t.temp?null:t.temp,visitCause:t.do.check.join(", "),note:t.problem,appointId:""===t.appointId?null:t.appointId};this.$axios.$post("/api/visits",n,{progress:!1}).then((function(n){setTimeout((function(){e.loading=!1,e.alert=!1,e.sendCheckDialog=!1,""!==t.appointId&&e.$emit("updateAppoint",{appointId:t.appointId,respone:n})}),500)})).catch((function(t){e.loading=!1,e.alert=!0,e.error=t.response.data.error.message}))}}}},c=n(41),d=n(50),v=n.n(d),h=n(486),f=n(110),m=n(183),x=n(62),k=n(477),_=n(473),y=n(463),D=n(465),w=n(479),C=n(184),I=n(112),O=n(120),S=n(175),$=n(475),V=n(504),T=n(480),j=n(460),A=n(509),component=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-dialog",{attrs:{"max-width":"700",scrollable:"",fullscreen:this.$vuetify.breakpoint.xsOnly},model:{value:e.sendCheckDialog,callback:function(t){e.sendCheckDialog=t},expression:"sendCheckDialog"}},[n("v-card",[n("h2",{staticClass:"pa-5 pb-2"},[e._v("ส่งตรวจ")]),e._v(" "),n("v-btn",{staticClass:"mt-4",attrs:{icon:"",absolute:"",right:""},on:{click:function(t){e.sendCheckDialog=!1}}},[n("v-icon",[e._v("mdi-close")])],1),e._v(" "),n("v-divider",{staticClass:"darker-divider"}),e._v(" "),n("v-card-text",[n("v-form",{ref:"form",attrs:{"lazy-validation":"",autocomplete:"off"},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{cols:"6"}},[n("v-select",{attrs:{disabled:e.loading,items:e.doctorListItems,"item-text":"name","item-value":"id",color:"cusblue","item-color":"cusblue",label:"แพทย์ผู้ตรวจ","menu-props":{closeOnContentClick:!0}},scopedSlots:e._u([{key:"prepend-item",fn:function(){return[n("v-list-item",{style:""===e.sendCheck.doctorId?"background-color: #e2f5fc":"",attrs:{ripple:""},on:{click:function(t){e.sendCheck.doctorId=""}}},[n("v-list-item-content",[n("v-list-item-title",{class:""===e.sendCheck.doctorId?"cusblue--text":""},[e._v("\n                        ไม่ระบุแพทย์\n                      ")])],1)],1),e._v(" "),n("v-divider",{staticClass:"mt-2"})]},proxy:!0}]),model:{value:e.sendCheck.doctorId,callback:function(t){e.$set(e.sendCheck,"doctorId",t)},expression:"sendCheck.doctorId"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-select",{attrs:{disabled:e.loading,items:e.priorityListItems,"item-text":"label","item-value":"id",color:"cusblue",label:"ความสำคัญ","menu-props":"auto",rules:e.rules.important},model:{value:e.sendCheck.important,callback:function(t){e.$set(e.sendCheck,"important",t)},expression:"sendCheck.important"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{disabled:e.loading,color:"cusblue",label:"นำหนัก / kg",autofocus:"",rules:e.rules.weight},model:{value:e.sendCheck.weight,callback:function(t){e.$set(e.sendCheck,"weight",t)},expression:"sendCheck.weight"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{disabled:e.loading,color:"cusblue",label:"อุณหภูมิ / F°",rules:e.rules.temp},model:{value:e.sendCheck.temp,callback:function(t){e.$set(e.sendCheck,"temp",t)},expression:"sendCheck.temp"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6",sm:"4"}},[n("v-checkbox",{staticClass:"mx-2",attrs:{disabled:e.loading,value:"ดูอาการ",label:"ดูอาการ"},model:{value:e.sendCheck.do.check,callback:function(t){e.$set(e.sendCheck.do,"check",t)},expression:"sendCheck.do.check"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6",sm:"4"}},[n("v-checkbox",{staticClass:"mx-2",attrs:{disabled:e.loading,value:"ทำแผล",label:"ทำแผล"},model:{value:e.sendCheck.do.check,callback:function(t){e.$set(e.sendCheck.do,"check",t)},expression:"sendCheck.do.check"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6",sm:"4"}},[n("v-checkbox",{staticClass:"mx-2",attrs:{disabled:e.loading,value:"ฟังผลตรวจ",label:"ฟังผลตรวจ Lab"},model:{value:e.sendCheck.do.check,callback:function(t){e.$set(e.sendCheck.do,"check",t)},expression:"sendCheck.do.check"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6",sm:"4"}},[n("v-checkbox",{staticClass:"mx-2",attrs:{disabled:e.loading,value:"ฉีดยา",label:"ฉีดยา"},model:{value:e.sendCheck.do.check,callback:function(t){e.$set(e.sendCheck.do,"check",t)},expression:"sendCheck.do.check"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6",sm:"4"}},[n("v-checkbox",{staticClass:"mx-2",attrs:{disabled:e.loading,value:"ให้น้ำเกลือ",label:"ให้น้ำเกลือ"},model:{value:e.sendCheck.do.check,callback:function(t){e.$set(e.sendCheck.do,"check",t)},expression:"sendCheck.do.check"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6",sm:"4"}},[n("v-checkbox",{staticClass:"mx-2",attrs:{disabled:e.loading,value:"Xray / Ultrasound",label:"Xray / Ultrasound"},model:{value:e.sendCheck.do.check,callback:function(t){e.$set(e.sendCheck.do,"check",t)},expression:"sendCheck.do.check"}})],1),e._v(" "),n("v-col",{staticClass:"px-3",attrs:{cols:"12"}},[n("v-row",{attrs:{align:"center","no-gutters":""}},[n("v-checkbox",{staticClass:"shrink mr-2 mt-0",attrs:{disabled:e.loading,"hide-details":"",label:"อื่นๆ"},model:{value:e.sendCheck.do.other.enabled,callback:function(t){e.$set(e.sendCheck.do.other,"enabled",t)},expression:"sendCheck.do.other.enabled"}}),e._v(" "),n("v-text-field",{staticClass:"mt-5",attrs:{color:"cusblue",dense:"",disabled:!e.sendCheck.do.other.enabled||e.loading},model:{value:e.sendCheck.do.other.text,callback:function(t){e.$set(e.sendCheck.do.other,"text",t)},expression:"sendCheck.do.other.text"}})],1)],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-textarea",{attrs:{disabled:e.loading,color:"cusblue",label:"Note","auto-grow":"","row-height":"24",rows:"1"},model:{value:e.sendCheck.problem,callback:function(t){e.$set(e.sendCheck,"problem",t)},expression:"sendCheck.problem"}})],1)],1),e._v(" "),n("v-alert",{attrs:{dense:"",text:"",color:"red",transition:"scroll-y-transition",dismissible:""},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[e._v("\n            "+e._s(e.error)+"\n          ")])],1)],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["ctrl","x"],expression:"['ctrl', 'x']"}],attrs:{color:"cusblue2",disabled:e.loading,text:""},on:{shortkey:function(t){e.sendCheckDialog=!1},click:function(t){e.sendCheckDialog=!1}}},[e._v("\n          ยกเลิก\n        ")]),e._v(" "),n("v-btn",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["ctrl","enter"],expression:"['ctrl', 'enter']"}],attrs:{color:"cusblue2",disabled:!e.valid||e.loading,text:""},on:{shortkey:e.submitCheck,click:e.submitCheck}},[n("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"mr-2",attrs:{indeterminate:"",color:"cusblue2",size:15,width:2}}),e._v("\n          บันทึก\n        ")],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.a=component.exports;v()(component,{VAlert:h.a,VBtn:f.a,VCard:m.a,VCardActions:x.a,VCardText:x.c,VCheckbox:k.a,VCol:_.a,VDialog:y.a,VDivider:D.a,VForm:w.a,VIcon:C.a,VListItem:I.a,VListItemContent:O.a,VListItemTitle:O.b,VProgressCircular:S.a,VRow:$.a,VSelect:V.a,VSpacer:T.a,VTextField:j.a,VTextarea:A.a})},546:function(e,t,n){var content=n(606);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(13).default)("b8390b46",content,!0,{sourceMap:!1})},562:function(e,t,n){"use strict";n(11),n(9),n(6),n(4),n(10);var o=n(1),r=(n(42),n(7));n(125),n(21);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var d={data:function(){var e=this;return{assignModal:!1,valid:!0,loading:!1,alert:!1,error:"",addCustomer:{id:"",prefix:1,f_name:"",l_name:"",houseNo:"",address:"",email:"",tel:[],other:""},rules:{prefix:[function(e){return!!e||"กรุณาใส่คำนำหน้าชื่อ"}],f_name:[function(e){return!!e||"กรุณากรอกชื่อ"},function(e){return e&&e.length<=100||"ไม่ควรกรอกชื่อเกิน 100 ตัวอักษร"}],l_name:[function(e){return!!e||"กรุณากรอกนามสกุล"},function(e){return e&&e.length<=100||"ไม่ควรกรอกนามสกุลเกิน 100 ตัวอักษร"}],houseNo:[function(e){return!!e||"กรุณากรอกบ้านเลขที่"},function(e){return e&&e.length<=300||"ไม่ควรกรอกบ้านเลขที่เกิน 50 ตัวอักษร"}],tel:[function(e){return!!e||"กรุณากรอกเบอร์โทรศัพท์"},function(t){return t&&e.validatePhone(t)||"กรุณากรอกเบอร์ให้ถูกรูปแบบ"}]}}},computed:{prefixes:function(){return this.$store.state.form.prefixes}},mounted:function(){var e=this;0===this.$store.state.form.prefixes.length&&this.$store.dispatch("form/addPrefixes"),this.socket=this.$nuxtSocket({reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,reconnectionDelayMax:5e3,randomizationFactor:.5}),this.socket.on("connect",(function(data){e.socket.emit("set-query",{query:["name","address","photo"]},(function(e){}))})),this.socket.on("disconnect",(function(){setTimeout((function(){e.socket.connect()}),1e3)}))},methods:{open:function(e){var t=this;this.assignModal=!0,this.$route.params.owner?this.addCustomer={id:e.id,prefix:e.prefixId||1,f_name:e.firstName,l_name:e.lastName,houseNo:e.houseNo,address:e.address,email:e.email,tel:e.tels,other:e.remark}:(this.socket.on("smc-data",(function(e){t.loading=!1;var n=e.data,o=n.name,r=o.prefix,l=o.firstname,c=o.lastname,d=n.address,v=d.houseNo,h=d.full;t.addCustomer={id:"",prefix:"นาย"===r?2:"นางสาว"===r?3:"นาง"===r?4:1,f_name:l,l_name:c,houseNo:v,address:h.substring(v.length+1),email:"",tel:[],other:""}})),this.socket.on("smc-error",(function(e){t.loading=!1,t.alert=!0,t.error="อ่านข้อมูลบัตรผิดพลาด ลองใหม่อีกครั้ง"})),this.socket.on("smc-removed",(function(e){t.loading=!1,t.alert=!1})),this.socket.on("smc-incorrect",(function(e){t.loading=!1,t.alert=!0,t.error="เสียบบัตรไม่ถูกต้อง"})),this.socket.on("smc-inserted",(function(e){t.loading=!0,t.alert=!1,t.error=""})))},cancelForm:function(){this.$refs.form.reset(),this.assignModal=!1},onEnter:function(e){this.$refs[e].focus()},validatePhone:function(e){if(0!==e.length)return e.every((function(e){return e.match(/^[0-9]{9,10}$/)}))},onSubmit:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,o,r,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()){t.next=31;break}if(e.loading=!0,n=c({},e.addCustomer),o={prefixId:n.prefix,firstName:n.f_name,lastName:n.l_name,houseNo:n.houseNo,address:n.address,tels:n.tel,email:n.email,remark:n.other},r=!e.addCustomer.id,t.prev=5,l=null,!r){t.next=13;break}return t.next=10,e.$axios.$post("/api/members",o,{progress:!1});case 10:l=t.sent,t.next=16;break;case 13:return t.next=15,e.$axios.$patch("/api/members/".concat(n.id),o,{progress:!1});case 15:l=t.sent;case 16:if(e.loading=!1,e.assignModal=!1,e.alert=!1,e.$refs.form.reset(),r){t.next=23;break}return e.$emit("update",l),t.abrupt("return");case 23:e.$router.push("/record/".concat(l.id)),t.next=31;break;case 26:t.prev=26,t.t0=t.catch(5),e.loading=!1,e.alert=!0,e.error=t.t0.response?t.t0.response.data.error.message:t.t0.message;case 31:case"end":return t.stop()}}),t,null,[[5,26]])})))()}}},v=n(41),h=n(50),f=n.n(h),m=n(486),x=n(110),k=n(183),_=n(62),y=n(473),D=(n(270),n(54),n(19),n(20),n(498),n(504)),w=n(524),C=n(0);function I(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function O(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?I(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):I(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var S=w.a.extend({name:"v-combobox",props:{delimiters:{type:Array,default:function(){return[]}},returnObject:{type:Boolean,default:!0}},data:function(){return{editingIndex:-1}},computed:{computedCounterValue:function(){return this.multiple?this.selectedItems.length:(this.internalSearch||"").toString().length},hasSlot:function(){return D.a.options.computed.hasSlot.call(this)||this.multiple},isAnyValueAllowed:function(){return!0},menuCanShow:function(){return!!this.isFocused&&(this.hasDisplayedItems||!!this.$slots["no-data"]&&!this.hideNoData)}},methods:{onInternalSearchChanged:function(e){if(e&&this.multiple&&this.delimiters.length){var t=this.delimiters.find((function(t){return e.endsWith(t)}));null!=t&&(this.internalSearch=e.slice(0,e.length-t.length),this.updateTags())}this.updateMenuDimensions()},genInput:function(){var input=w.a.options.methods.genInput.call(this);return delete input.data.attrs.name,input.data.on.paste=this.onPaste,input},genChipSelection:function(e,t){var n=this,o=D.a.options.methods.genChipSelection.call(this,e,t);return this.multiple&&(o.componentOptions.listeners=O(O({},o.componentOptions.listeners),{},{dblclick:function(){n.editingIndex=t,n.internalSearch=n.getText(e),n.selectedIndex=-1}})),o},onChipInput:function(e){D.a.options.methods.onChipInput.call(this,e),this.editingIndex=-1},onEnterDown:function(e){e.preventDefault(),this.getMenuIndex()>-1||this.$nextTick(this.updateSelf)},onFilteredItemsChanged:function(e,t){this.autoSelectFirst&&w.a.options.methods.onFilteredItemsChanged.call(this,e,t)},onKeyDown:function(e){var t=e.keyCode;D.a.options.methods.onKeyDown.call(this,e),this.multiple&&t===C.x.left&&0===this.$refs.input.selectionStart?this.updateSelf():t===C.x.enter&&this.onEnterDown(e),this.changeSelectedIndex(t)},onTabDown:function(e){if(this.multiple&&this.internalSearch&&-1===this.getMenuIndex())return e.preventDefault(),e.stopPropagation(),this.updateTags();w.a.options.methods.onTabDown.call(this,e)},selectItem:function(e){this.editingIndex>-1?this.updateEditing():w.a.options.methods.selectItem.call(this,e)},setSelectedItems:function(){null==this.internalValue||""===this.internalValue?this.selectedItems=[]:this.selectedItems=this.multiple?this.internalValue:[this.internalValue]},setValue:function(e){var t;D.a.options.methods.setValue.call(this,null!=(t=e)?t:this.internalSearch)},updateEditing:function(){var e=this.internalValue.slice();e[this.editingIndex]=this.internalSearch,this.setValue(e),this.editingIndex=-1},updateCombobox:function(){var e=Boolean(this.$scopedSlots.selection)||this.hasChips;e&&!this.searchIsDirty||(this.internalSearch!==this.getText(this.internalValue)&&this.setValue(),e&&(this.internalSearch=void 0))},updateSelf:function(){this.multiple?this.updateTags():this.updateCombobox()},updateTags:function(){var e=this.getMenuIndex();if(!(e<0)||this.searchIsDirty){if(this.editingIndex>-1)return this.updateEditing();var t=this.selectedItems.indexOf(this.internalSearch);if(t>-1){var n=this.internalValue.slice();n.splice(t,1),this.setValue(n)}if(e>-1)return this.internalSearch=null;this.selectItem(this.internalSearch),this.internalSearch=null}},onPaste:function(e){if(this.multiple&&!this.searchIsDirty){var t=e.clipboardData.getData("text/vnd.vuetify.autocomplete.item+plain");t&&-1===this.findExistingIndex(t)&&(e.preventDefault(),D.a.options.methods.selectItem.call(this,t))}}}}),$=n(463),V=n(465),T=n(479),j=n(184),A=n(175),P=n(475),E=n(480),N=n(460),M=n(509),component=Object(v.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-dialog",{attrs:{"max-width":"700",scrollable:"",fullscreen:this.$vuetify.breakpoint.xsOnly},model:{value:e.assignModal,callback:function(t){e.assignModal=t},expression:"assignModal"}},[n("v-card",[n("h2",{staticClass:"pa-5 pb-2"},[e._v("\n        "+e._s(e.addCustomer.id?"แก้ไขข้อมูลลูกค้า":"เพิ่มข้อมูลลูกค้า")+"\n      ")]),e._v(" "),n("v-btn",{staticClass:"mt-4",attrs:{icon:"",absolute:"",right:""},on:{click:function(t){e.assignModal=!1}}},[n("v-icon",[e._v("mdi-close")])],1),e._v(" "),n("v-divider",{staticClass:"darker-divider"}),e._v(" "),n("v-card-text",[n("v-form",{ref:"form",attrs:{"lazy-validation":"",autocomplete:"off"},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("div",[n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{cols:"12",sm:"4"}},[n("v-select",{attrs:{color:"cusblue",disabled:e.loading,items:e.prefixes,"item-text":"label","item-value":"id",label:"คำนำหน้าชื่อ","menu-props":"auto",rules:e.rules.prefix,required:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onEnter("f_name")}},model:{value:e.addCustomer.prefix,callback:function(t){e.$set(e.addCustomer,"prefix",t)},expression:"addCustomer.prefix"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",sm:"4"}},[n("v-text-field",{ref:"f_name",attrs:{disabled:e.loading,color:"cusblue",label:"ชื่อ",rules:e.rules.f_name,required:"",autofocus:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onEnter("l_name")}},model:{value:e.addCustomer.f_name,callback:function(t){e.$set(e.addCustomer,"f_name",t)},expression:"addCustomer.f_name"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",sm:"4"}},[n("v-text-field",{ref:"l_name",attrs:{disabled:e.loading,color:"cusblue",label:"นามสกุล",rules:e.rules.l_name,required:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onEnter("houseno")}},model:{value:e.addCustomer.l_name,callback:function(t){e.$set(e.addCustomer,"l_name",t)},expression:"addCustomer.l_name"}})],1),e._v(" "),n("v-col",{attrs:{cols:"4"}},[n("v-text-field",{ref:"houseno",attrs:{disabled:e.loading,color:"cusblue",label:"บ้านเลขที่",rules:e.rules.houseNo,required:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onEnter("address")}},model:{value:e.addCustomer.houseNo,callback:function(t){e.$set(e.addCustomer,"houseNo",t)},expression:"addCustomer.houseNo"}})],1),e._v(" "),n("v-col",{attrs:{cols:"8"}},[n("v-text-field",{ref:"address",attrs:{disabled:e.loading,color:"cusblue",label:"ที่อยู่",rules:e.rules.address,required:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onEnter("tel")}},model:{value:e.addCustomer.address,callback:function(t){e.$set(e.addCustomer,"address",t)},expression:"addCustomer.address"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-combobox",{ref:"tel",attrs:{disabled:e.loading,color:"cusblue",label:"เบอร์ติดต่อ",height:"32","append-icon":"",rules:e.rules.tel,multiple:"","small-chips":"","deletable-chips":""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onEnter("email")}},model:{value:e.addCustomer.tel,callback:function(t){e.$set(e.addCustomer,"tel",t)},expression:"addCustomer.tel"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{ref:"email",attrs:{disabled:e.loading,color:"cusblue",label:"อีเมล์",rules:e.rules.email,required:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onEnter("other")}},model:{value:e.addCustomer.email,callback:function(t){e.$set(e.addCustomer,"email",t)},expression:"addCustomer.email"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-textarea",{ref:"other",attrs:{disabled:e.loading,color:"cusblue",label:"อื่นๆ","auto-grow":"","row-height":"24",rows:"1"},model:{value:e.addCustomer.other,callback:function(t){e.$set(e.addCustomer,"other",t)},expression:"addCustomer.other"}})],1)],1)],1)]),e._v(" "),n("v-alert",{attrs:{dense:"",text:"",color:"red",transition:"scroll-y-transition",dismissible:""},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[e._v("\n          "+e._s(e.error)+"\n        ")])],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["ctrl","x"],expression:"['ctrl', 'x']"}],attrs:{disabled:e.loading,color:"cusblue2",text:""},on:{shortkey:e.cancelForm,click:e.cancelForm}},[e._v("\n          ยกเลิก\n        ")]),e._v(" "),n("v-btn",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["ctrl","enter"],expression:"['ctrl', 'enter']"}],attrs:{color:"cusblue2",disabled:!e.valid||e.loading,text:""},on:{shortkey:e.onSubmit,click:e.onSubmit}},[n("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"mr-2",attrs:{indeterminate:"",color:"cusblue2",size:15,width:2}}),e._v("\n          บันทึก\n        ")],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.a=component.exports;f()(component,{VAlert:m.a,VBtn:x.a,VCard:k.a,VCardActions:_.a,VCardText:_.c,VCol:y.a,VCombobox:S,VDialog:$.a,VDivider:V.a,VForm:T.a,VIcon:j.a,VProgressCircular:A.a,VRow:P.a,VSelect:D.a,VSpacer:E.a,VTextField:N.a,VTextarea:M.a})},564:function(e,t,n){"use strict";n(11),n(9),n(6),n(4),n(10);var o=n(1),r=n(86),l=n.n(r);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var d={data:function(){return{petId:"",depositDialog:!1,valid:!1,loading:!1,alert:!1,error:"",menuDate:!1,DepositDate:!1,DepositTime:!1,sendDeposit:{petId:"",DepositDate:"",DepositTime:"",note:""},rules:{DepositDate:[function(e){return!!e||"กรุณาเลือกวันที่นัด"}],DepositTime:[function(e){return!!e||"กรุณาเลือกเวลานัด"}],note:[function(e){return e.length<=1e3||"ไม่ควรกรอกสาเหตุการนัด 1000 ตัวอักษร"}]}}},computed:{selectDate:function(){return this.sendDeposit.DepositDate?l()(this.sendDeposit.DepositDate).format("DD/MM/YYYY"):null}},methods:{open:function(e){this.sendDeposit.petId=e,this.depositDialog=!0,this.sendDeposit.DepositDate=(new Date).toISOString().substr(0,10),this.sendDeposit.DepositTime=l()().format("HH:mm:ss")},plusDate:function(e){this.sendDeposit.DepositDate=l()(this.sendDeposit.DepositDate).add(e,"days").format("YYYY-MM-DD")},submitDeposit:function(){var e=this;if(this.$refs.form.validate()){var t=function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},this.sendDeposit),n=l()(t.DepositDate+" "+t.DepositTime,"YYYY-MM-DD HH:mm:ss"),r={petId:t.petId,visitAt:n.toISOString(),note:t.note};this.$axios.$post("/api/visits/daycare",r,{progress:!1}).then((function(t){e.successSubmit(t)})).catch((function(t){e.errorSubmit(t)}))}},successSubmit:function(e){var t=this;setTimeout((function(){t.loading=!1,t.alert=!1,t.depositDialog=!1,t.sendDeposit.note="",t.$refs.form.resetValidation()}),500)},errorSubmit:function(e){this.loading=!1,this.alert=!0,this.error=e.response.data.error.message}}},v=n(41),h=n(50),f=n.n(h),m=n(486),x=n(110),k=n(183),_=n(62),y=n(473),D=n(638),w=n(463),C=n(465),I=n(479),O=n(184),S=n(466),$=n(175),V=n(475),T=n(480),j=n(460),A=n(509),P=n(648),component=Object(v.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"max-width":"800",scrollable:"",fullscreen:this.$vuetify.breakpoint.xsOnly},model:{value:e.depositDialog,callback:function(t){e.depositDialog=t},expression:"depositDialog"}},[n("v-card",[n("h2",{staticClass:"pa-5 pb-2"},[e._v("ฝากเลี้ยง")]),e._v(" "),n("v-btn",{staticClass:"mt-4",attrs:{icon:"",absolute:"",right:""},on:{click:function(t){e.depositDialog=!1}}},[n("v-icon",[e._v("mdi-close")])],1),e._v(" "),n("v-divider",{staticClass:"darker-divider"}),e._v(" "),n("v-card-text",{staticClass:"px-7"},[n("v-form",{ref:"form",attrs:{"lazy-validation":"",autocomplete:"off"},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,r=t.attrs;return[n("v-text-field",e._g(e._b({ref:"bd",attrs:{disabled:e.loading,rules:e.rules.selectDate,label:"วันเกิด",color:"cusblue","append-icon":"mdi-calendar-month",readonly:""},model:{value:e.selectDate,callback:function(t){e.selectDate=t},expression:"selectDate"}},"v-text-field",r,!1),o))]}}]),model:{value:e.menuDate,callback:function(t){e.menuDate=t},expression:"menuDate"}},[e._v(" "),n("v-date-picker",{ref:"picker",attrs:{color:"cusblue",min:(new Date).toISOString().substr(0,10),value:"YYYY-mm",locale:"th","show-current":!1,scrollable:""},model:{value:e.sendDeposit.DepositDate,callback:function(t){e.$set(e.sendDeposit,"DepositDate",t)},expression:"sendDeposit.DepositDate"}})],1)],1),e._v(" "),n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,r=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{disabled:e.loading,rules:e.rules.DepositTime,color:"cusblue","append-icon":"mdi-clock-outline","background-color":"white",label:"เวลา",readonly:""},model:{value:e.sendDeposit.DepositTime,callback:function(t){e.$set(e.sendDeposit,"DepositTime",t)},expression:"sendDeposit.DepositTime"}},"v-text-field",r,!1),o))]}}]),model:{value:e.DepositTime,callback:function(t){e.DepositTime=t},expression:"DepositTime"}},[e._v(" "),n("v-time-picker",{ref:"picker",attrs:{color:"cusblue",format:"24hr","use-seconds":"",scrollable:""},model:{value:e.sendDeposit.DepositTime,callback:function(t){e.$set(e.sendDeposit,"DepositTime",t)},expression:"sendDeposit.DepositTime"}})],1)],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-textarea",{attrs:{disabled:e.loading,rules:e.rules.note,label:"Note",color:"cusblue","auto-grow":"","row-height":"24",rows:"1"},model:{value:e.sendDeposit.note,callback:function(t){e.$set(e.sendDeposit,"note",t)},expression:"sendDeposit.note"}})],1)],1),e._v(" "),n("v-alert",{attrs:{dense:"",text:"",color:"red",transition:"scroll-y-transition",dismissible:""},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[e._v("\n          "+e._s(e.error)+"\n        ")])],1)],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{staticClass:"cusblue2--text text-none",attrs:{disabled:e.loading,text:""}},[e._v("\n        ยกเลิก\n      ")]),e._v(" "),n("v-btn",{staticClass:"cusblue2--text text-none",attrs:{disabled:!e.valid||e.loading,text:""},on:{click:e.submitDeposit}},[n("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"mr-2",attrs:{indeterminate:"",color:"cusblue2",size:15,width:2}}),e._v("\n        บันทึก\n      ")],1)],1)],1)],1)}),[],!1,null,null,null);t.a=component.exports;f()(component,{VAlert:m.a,VBtn:x.a,VCard:k.a,VCardActions:_.a,VCardText:_.c,VCol:y.a,VDatePicker:D.a,VDialog:w.a,VDivider:C.a,VForm:I.a,VIcon:O.a,VMenu:S.a,VProgressCircular:$.a,VRow:V.a,VSpacer:T.a,VTextField:j.a,VTextarea:A.a,VTimePicker:P.a})},605:function(e,t,n){"use strict";var o=n(546);n.n(o).a},606:function(e,t,n){(t=n(12)(!1)).push([e.i,".expanded-closing[data-v-c6c347e6]{border-bottom:none!important}",""]),e.exports=t},629:function(e,t,n){"use strict";n.r(t);n(42);var o=n(7),r={props:{defaultSearchKey:{type:Object,required:!1,default:function(){return{label:"บ้านเลขที่",value:"houseNo"}}},defaultSearchValue:{type:String,required:!1,default:""}},data:function(){return{searchKey:this.defaultSearchKey,searchValue:this.defaultSearchValue,items:[{label:"บ้านเลขที่",value:"houseNo"},{label:"เบอร์โทร",value:"tel"},{label:"ชื่อเจ้าของ",value:"firstName"},{label:"นามสกุลเจ้าของ",value:"lastName"},{label:"ชื่อสัตว์เลี้ยง",value:"petName"},{label:"รหัสเจ้าของ",value:"code"},{label:"Microchip No.",value:"microchipNo"}]}},methods:{sendValue:function(){this.$emit("onSearch",{key:this.searchKey,value:this.searchValue})}}},l=n(41),c=n(50),d=n.n(c),v=n(183),h=n(475),f=n(504),m=n(480),x=n(526),k=n(460),component=Object(l.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{color:"grey lighten-4",flat:"",tile:""}},[n("v-row",{class:"second-nav cusblue1 "+(this.$vuetify.breakpoint.xsOnly?"pb-2":""),attrs:{height:"55",align:"center",justify:"center",dense:"",flat:""}},[n("h1",{staticClass:"font-weight-medium col-sm-4 col-12"},[e._v("เวชระเบียน")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-subheader",{directives:[{name:"show",rawName:"v-show",value:!this.$vuetify.breakpoint.smAndDown,expression:"!this.$vuetify.breakpoint.smAndDown"}],staticClass:"cus-subhead"},[e._v("ตัวเลือก :\n    ")]),e._v(" "),n("v-select",{staticClass:"rounded-lg cus-input mr-3",attrs:{"background-color":"cusblue3",items:e.items,"item-text":"label","item-value":"value","return-object":"",dark:"",filled:"",rounded:"","single-line":"",dense:"",flat:"","hide-details":""},on:{change:e.sendValue},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}}),e._v(" "),n("v-text-field",{staticClass:"rounded-lg cus-textfield",attrs:{"background-color":"cusblue3","append-icon":"mdi-magnify",dark:"",filled:"",rounded:"","single-line":"",dense:"",flat:"","hide-details":"",autocomplete:"off",autofocus:""},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendValue(t)}},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1)],1)}),[],!1,null,null,null),_=component.exports;d()(component,{VCard:v.a,VRow:h.a,VSelect:f.a,VSpacer:m.a,VSubheader:x.a,VTextField:k.a});var y=n(487),D=n(538),w=n(564),C=n(537),I={components:{confirmDialog:y.a,sendcheckDialog:D.a,depositDialog:w.a,appointDialog:C.a},props:{pets:{type:Array,required:!0}},data:function(){return{offset:!1,petDetail:[]}},methods:{orderNum:function(data,e){return data.map((function(e){return e.id})).indexOf(e)+1},onClickCheck:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$axios.$get("/api/visits//is-visit/".concat(e),{progress:!1});case 2:if(!n.sent.status){n.next=9;break}return n.next=6,t.$refs.confirm.open("ต้องการส่งอีกครั้งหรือไม่?","สัตว์เลี้ยงตัวนี้ได้ถูกฝากเลี้ยงแล้วคุณต้องการส่งอีกครั้งหรือไม่",{width:350,color:"red"});case 6:if(n.sent){n.next=9;break}return n.abrupt("return");case 9:t.$refs.checkDialog.open(e);case 10:case"end":return n.stop()}}),n)})))()},onClickDepo:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$axios.$get("/api/visits/is-daycare/".concat(e),{progress:!1});case 2:if(!n.sent.status){n.next=9;break}return n.next=6,t.$refs.confirm.open("ต้องการส่งอีกครั้งหรือไม่?","สัตว์เลี้ยงตัวนี้ได้ถูกส่งตรวจแล้วคุณต้องการส่งอีกครั้งหรือไม่",{width:350,color:"red"});case 6:if(n.sent){n.next=9;break}return n.abrupt("return");case 9:t.$refs.depoDialog.open(e);case 10:case"end":return n.stop()}}),n)})))()},onClickApp:function(e){this.$refs.appDialog.open(e)}}},O=n(110),S=n(465),$=n(184),V=n(186),T=n(112),j=n(466),A=n(570),P=Object(l.a)(I,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.pets.length?n("v-simple-table",{attrs:{dense:"","fixed-header":"","max-height":"200"},scopedSlots:e._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-center",attrs:{width:"115"}},[e._v("ลำดับ")]),e._v(" "),n("th",{staticClass:"text-left"},[e._v("ชื่อสัตว์เลี้ยง")]),e._v(" "),n("th",{staticClass:"text-left"},[e._v("ประเภท")]),e._v(" "),n("th",{staticClass:"text-left"},[e._v("เพศ")]),e._v(" "),n("th",{staticClass:"text-left"},[e._v("สี")]),e._v(" "),n("th",{staticClass:"text-left",attrs:{width:"60"}},[e._v("Action")])])]),e._v(" "),n("tbody",e._l(e.pets,(function(t){return n("tr",{key:t.id},[n("td",{staticClass:"text-center"},[e._v(e._s(e.orderNum(e.pets,t.id)))]),e._v(" "),n("td",[e._v(e._s(t.name))]),e._v(" "),n("td",[e._v(e._s(t.type.label))]),e._v(" "),n("td",[e._v(e._s(t.gender.label))]),e._v(" "),n("td",[e._v(e._s(t.color))]),e._v(" "),n("td",[n("v-menu",{attrs:{"offset-x":e.offset,"nudge-left":"150"},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{color:"cusblue2 white--text",icon:"",depressed:""}},"v-btn",r,!1),o),[n("v-icon",[e._v("mdi-dots-horizontal-circle")])],1)]}}],null,!0)},[e._v(" "),n("v-list",{attrs:{width:"150"}},[n("v-list-item",{attrs:{dense:""}},[n("h5",[e._v("Action")])]),e._v(" "),n("v-divider"),e._v(" "),n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:"",small:""},on:{click:function(n){return e.onClickCheck(t.id)}}},[e._v("\n                  ส่งตรวจ\n                ")]),e._v(" "),n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:"",small:""},on:{click:function(n){return e.onClickDepo(t.id)}}},[e._v("\n                  ฝากเลี้ยง\n                ")]),e._v(" "),n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:"",small:""},on:{click:function(n){return e.onClickApp(t.id)}}},[e._v("\n                  ทำนัด\n                ")])],1)],1)],1)])})),0)]},proxy:!0}],null,!1,384324613)}):n("div",{staticClass:"text-center pa-8 grey--text"},[e._v("Not Found Pet")]),e._v(" "),n("sendcheckDialog",{ref:"checkDialog"}),e._v(" "),n("depositDialog",{ref:"depoDialog"}),e._v(" "),n("appointDialog",{ref:"appDialog"}),e._v(" "),n("confirmDialog",{ref:"confirm"})],1)}),[],!1,null,null,null),E=P.exports;d()(P,{VBtn:O.a,VDivider:S.a,VIcon:$.a,VList:V.a,VListItem:T.a,VMenu:j.a,VSimpleTable:A.a});var N={components:{petTable:E},props:{dessert:{default:null,type:Array,required:!1},loading:{type:Boolean,required:!0,default:!1}},data:function(){return{expanded:[],transitioned:[],closeTimeouts:{},singleExpand:!1,header:[{text:"ลำดับ",align:"center",sortable:!1,value:"id",width:"100"},{text:"รหัส",value:"code",width:"200",sortable:!1},{text:"เจ้าของ",value:"fullName",sortable:!1},{text:"เบอร์ติดต่อ",value:"tels",sortable:!1},{text:"ที่อยู่",value:"fullAddress",width:"300",sortable:!1},{text:"ข้อมูลสัตว์เลี้ยง",align:"center",width:"120",value:"data-table-expand"}]}},methods:{orderNum:function(data,e){return data.map((function(e){return e.id})).indexOf(e)+1},dashPhone:function(e){return e.slice(0,3)+"-"+e.slice(3,6)+"-"+e.slice(6,11)},getItemId:function(e){return e.id},toggleExpand:function(e){var t=this,n=e.item,o=this.getItemId(n);e.isExpanded&&this.transitioned[o]?this.closeExpand(n):(clearTimeout(this.closeTimeouts[o]),e.expand(!0),this.$nextTick((function(){return t.$set(t.transitioned,o,!0)})),this.singleExpand&&this.$nextTick((function(){return t.expanded.forEach((function(i){return i!==n&&t.closeExpand(i)}))})))},closeExpand:function(e){var t=this,n=this.getItemId(e);this.$set(this.transitioned,n,!1),this.closeTimeouts[n]=setTimeout((function(){return t.$refs.vDataTable.expand(e,!1)}),600)}}},M=(n(605),n(639)),F=n(65),Y=Object(l.a)(N,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-data-table",{ref:"vDataTable",staticClass:"elevation-4 overflow-y-auto",attrs:{headers:e.header,items:e.dessert,expanded:e.expanded,"show-expand":"","item-key":"id","disable-pagination":"","hide-default-footer":"","fixed-header":"",color:"cusblue",loading:e.loading,height:"calc(100vh - 160px)"},on:{"update:expanded":function(t){e.expanded=t}},scopedSlots:e._u([{key:"item.id",fn:function(t){var o=t.item;return[n("div",[e._v(e._s(e.orderNum(e.dessert,o.id)))])]}},{key:"item.fullName",fn:function(t){var o=t.item;return[n("div",{staticClass:"font-weight-medium"},[n("nuxt-link",{staticClass:"bold-owner text-decoration-none text-truncate",attrs:{to:"/record/"+o.id}},[e._v(e._s(o.fullName)+"\n          "),n("v-icon",{attrs:{color:"cusblue2",small:""}},[e._v("mdi-chevron-right")])],1)],1)]}},{key:"item.data-table-expand",fn:function(t){return[n("v-icon",{class:{"v-data-table__expand-icon":!0,"v-data-table__expand-icon--active":t.isExpanded&&e.transitioned[e.getItemId(t.item)]},on:{click:function(n){return e.toggleExpand(t)}}},[e._v("\n        mdi-chevron-down\n      ")])]}},{key:"expanded-item",fn:function(t){var o=t.headers,r=t.item;return[n("v-expand-transition",[n("td",{class:{"ma-0 pa-0":!0,"expanded-closing":!e.transitioned[e.getItemId(r)]},staticStyle:{height:"auto"},attrs:{colspan:o.length}},[n("v-expand-transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.transitioned[e.getItemId(r)],expression:"transitioned[getItemId(item)]"}]},[n("div",{staticClass:"pa-2",staticStyle:{"min-height":"100px"}},[n("petTable",{attrs:{pets:r.pets}})],1)])])],1)])]}}],null,!0)})],1)}),[],!1,null,"c6c347e6",null),z=Y.exports;d()(Y,{VDataTable:M.a,VExpandTransition:F.a,VIcon:$.a});var B={components:{recordNav:_,recordTable:z,recordDialog:n(562).a},validate:function(e){var t=e.store;return t.getters.loggedInUser.roles.some((function(e){return 1===e.id||2===e.id}))||t.getters.loggedInUser.isAdmin},fetch:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(n=e.filter)&&(n={key:e.defaultSearchKey,value:e.defaultSearchValue}),""!==n.value){t.next=5;break}return e.members=[],t.abrupt("return");case 5:return(o={})[n.key.value]=n.value,t.prev=7,t.next=10,e.$axios.$get("/api/registration",{params:o});case 10:r=t.sent,e.members=r.results,t.next=17;break;case 14:t.prev=14,t.t0=t.catch(7),e.members=[];case 17:case"end":return t.stop()}}),t,null,[[7,14]])})))()},fetchOnServer:!1,data:function(){return{filter:null,members:[]}},computed:{defaultSearchKey:function(){if(localStorage.getItem("registerFilters"))return JSON.parse(localStorage.getItem("registerFilters")).key},defaultSearchValue:function(){return localStorage.getItem("registerFilters")?JSON.parse(localStorage.getItem("registerFilters")).value:""}},methods:{addMemberDialog:function(){this.$refs.addMemberDialog.open()},search:function(e){var t=e.key,n=e.value,o=void 0===n?"":n;this.filter={key:t,value:o},localStorage.setItem("registerFilters",JSON.stringify(this.filter)),this.$fetch()}}},L=Object(l.a)(B,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("recordNav",{attrs:{"default-search-key":e.defaultSearchKey,"default-search-value":e.defaultSearchValue},on:{onSearch:e.search}}),e._v(" "),n("div",{staticClass:"custom-container"},[n("recordTable",{attrs:{dessert:e.members,loading:e.$fetchState.pending}})],1),e._v(" "),n("recordDialog",{ref:"addMemberDialog"}),e._v(" "),n("v-btn",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["ctrl","alt","n"],expression:"['ctrl', 'alt', 'n']"}],key:e.$nuxt.$route.path,attrs:{color:"cusblue2",fixed:"",fab:"",small:this.$vuetify.breakpoint.mobile,large:!this.$vuetify.breakpoint.mobile,dark:"",bottom:"",right:""},on:{shortkey:e.addMemberDialog,click:function(t){return t.stopPropagation(),e.addMemberDialog(t)}}},[n("v-icon",[e._v("mdi-plus")])],1)],1)}),[],!1,null,null,null);t.default=L.exports;d()(L,{VBtn:O.a,VIcon:$.a})}}]);