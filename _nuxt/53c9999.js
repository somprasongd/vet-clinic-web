(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{378:function(t,e,r){"use strict";r(4);var n={data:function(){return{dialog:!1,resolve:null,reject:null,message:null,title:null,options:{color:"primary",width:290,zIndex:200}}},computed:{show:{get:function(){return this.dialog},set:function(t){this.dialog=t,!1===t&&this.cancel()}}},methods:{open:function(title,t,e){var r=this;return this.dialog=!0,this.title=title,this.message=t,this.options=Object.assign(this.options,e),new Promise((function(t,e){r.resolve=t,r.reject=e}))},agree:function(){this.resolve(!0),this.dialog=!1},cancel:function(){this.reject(!0),this.dialog=!1}}},l=r(56),o=r(74),c=r.n(o),d=r(99),v=r(357),f=r(354),h=r(510),m=r(371),component=Object(l.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{style:{zIndex:t.options.zIndex},attrs:{"max-width":t.options.width},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.cancel(e)}},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[r("v-card",[r("h2",{staticClass:"pl-6 pt-3 pb-2"},[t._v(t._s(t.title))]),t._v(" "),r("v-card-text",{directives:[{name:"show",rawName:"v-show",value:!!t.message,expression:"!!message"}]},[t._v(" "+t._s(t.message)+" ")]),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{color:t.options.color,text:""},nativeOn:{click:function(e){return t.agree(e)}}},[t._v(" ใช่ ")]),t._v(" "),r("v-btn",{attrs:{color:"grey",text:""},nativeOn:{click:function(e){return t.cancel(e)}}},[t._v(" ไม่ ")])],1)],1)],1)}),[],!1,null,null,null);e.a=component.exports;c()(component,{VBtn:d.a,VCard:v.a,VCardActions:f.a,VCardText:f.c,VDialog:h.a,VSpacer:m.a})},410:function(t,e,r){var content=r(468);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(13).default)("9ca9ccf0",content,!0,{sourceMap:!1})},446:function(t,e,r){"use strict";var n={data:function(){return{tab:null,lists:[{title:"ระบบ",list:[{name:"สถานพยาบาล",link:"/setting/"},{name:"ผู้ใช้งาน",link:"/setting/users"}]},{title:"ตัวช่วย",list:[{name:"Chief Complaint",link:"/setting/Chief-Complaint"},{name:"Differencial Diagnosis",link:"/setting/Differential-Diagnosis"},{name:"History Ranking",link:"/setting/History-Ranking"},{name:"Physical Examination",link:"/setting/Physical-Examination"}]},{title:"รายการตรวจ",list:[{name:"รายการตรวจ",link:"/setting/check"}]}]}},created:function(){var path=this.$nuxt.$route.path;this.tab="/setting/Chief-Complaint"===path||"/setting/Differential-Diagnosis"===path||"/setting/History-Ranking"===path||"/setting/Physical-Examination"===path?1:"/setting/check"===path?2:0}},l=r(56),o=r(74),c=r.n(o),d=r(357),v=r(354),f=r(458),h=r(158),m=r(160),k=r(100),y=r(109),_=r(372),x=r(466),w=r(373),C=r(219),component=Object(l.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[this.$vuetify.breakpoint.smAndUp?r("div",t._l(t.lists,(function(e){return r("v-card",{key:e.index,staticClass:"mb-3 elevation-4"},[r("v-card-title",{staticClass:"pa-0 pl-5 pt-3"},[t._v(t._s(e.title))]),t._v(" "),r("v-divider"),t._v(" "),r("v-list",{staticClass:"pa-0",attrs:{dense:""}},t._l(e.list,(function(e){return r("v-list-item",{key:e.index,attrs:{link:"",to:e.link,exact:""}},[r("v-icon",{staticClass:"mr-3",attrs:{color:"cusblue3","x-small":""}},[t._v("mdi-record")]),t._v(" "),r("v-list-item-content",[t._v("\n            "+t._s(e.name)+"\n          ")])],1)})),1)],1)})),1):r("div",[r("v-card",{staticClass:"mb-3 elevation-4"},[r("v-tabs",{attrs:{color:"cusblue3"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.lists,(function(e){return r("v-tab",{key:e.title},[t._v("\n          "+t._s(e.title)+"\n        ")])})),1),t._v(" "),r("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.lists,(function(e){return r("v-tab-item",{key:e.title},[r("v-card",{attrs:{flat:""}},[r("v-list",{staticClass:"pa-0",attrs:{dense:""}},t._l(e.list,(function(e){return r("v-list-item",{key:e.index,attrs:{link:"",to:e.link,exact:""}},[r("v-icon",{staticClass:"mr-3",attrs:{color:"cusblue3","x-small":""}},[t._v("\n                  mdi-record\n                ")]),t._v(" "),r("v-list-item-content",[t._v("\n                  "+t._s(e.name)+"\n                ")])],1)})),1)],1)],1)})),1)],1)],1)])}),[],!1,null,null,null);e.a=component.exports;c()(component,{VCard:d.a,VCardTitle:v.d,VDivider:f.a,VIcon:h.a,VList:m.a,VListItem:k.a,VListItemContent:y.a,VTab:_.a,VTabItem:x.a,VTabs:w.a,VTabsItems:C.a})},448:function(t,e,r){"use strict";var n=r(56),l=r(74),o=r.n(l),c=r(366),d=r(368),component=Object(n.a)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("v-row",{staticClass:"cusblue1 second-nav1",attrs:{align:"center",justify:"center",dense:""}},[e("v-col",{attrs:{cols:"12"}},[e("h1",{staticClass:"font-weight-medium"},[this._v("ตั้งค่า")])])],1)}),[],!1,null,null,null);e.a=component.exports;o()(component,{VCol:c.a,VRow:d.a})},455:function(t,e,r){"use strict";r(19);var n={props:{avatarid:{type:Number,required:!1,default:null},avatars:{type:String,default:"",required:!1},deleteImg:{type:Boolean,required:!1,default:!0},size:{type:Number,required:!1,default:130},typeAvatar:{type:String,required:!1,default:"users"}},data:function(){return{avatar:this.avatars,loadingAvatar:!1,avatarErr:!0}},computed:{userAvatar:function(){return this.avatar}},methods:{onClickAvatar:function(){this.$refs.inputAvatar.click()},onFilePicked:function(t){var e=t.target.files[0];this.uploadProfile(this.avatarid,e)},uploadProfile:function(t,img){var e=this;this.loadingAvatar=!0;var r=new FormData;r.append("avatar",img),this.$axios.$post("/api/".concat(null===t?"upload/avatar":"".concat(this.typeAvatar,"/").concat(t,"/avatar")),r,{headers:{"Content-Type":"multipart/form-data"},progress:!1}).then((function(data){e.avatarSuccess(URL.createObjectURL(img)),e.$emit("getId",data.id)})).catch((function(t){e.avatarError(t),alert(t)}))},deleteProfile:function(t){var e=this;this.loadingAvatar=!0,this.$axios.$delete("/api/".concat(this.typeAvatar,"/").concat(t,"/avatar"),{progress:!1}).then((function(data){e.avatarSuccess(r(168))})).catch((function(t){e.avatarError(t),alert(t)}))},avatarSuccess:function(img){var t=this;setTimeout((function(){t.loadingAvatar=!1,t.avatar=img}),1e3)},avatarError:function(){var t=this;this.avatarErr=!1,setTimeout((function(){t.avatarErr=!0,t.loadingAvatar=!1}),2e3)}}},l=(r(467),r(56)),o=r(74),c=r.n(o),d=r(159),v=r(99),f=r(158),h=r(224),m=r(157),k=r(368),component=Object(l.a)(n,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"userAvatar"},[n("v-avatar",{staticClass:"avatarImg elevation-2",staticStyle:{border:"5px solid white"},attrs:{size:t.size},on:{click:t.onClickAvatar}},[n("v-img",{attrs:{src:t.userAvatar,"lazy-src":r(168)}},[t.loadingAvatar?n("v-row",{staticClass:"fill-height ma-0 loadingAvatar",attrs:{align:"center",justify:"center"}},[t.avatarErr?n("v-progress-circular",{attrs:{indeterminate:"",color:"white"}}):n("v-icon",{attrs:{color:"red"}},[t._v("mdi-alert")])],1):n("v-row",{staticClass:"fill-height ma-0 hoverAvatar",attrs:{align:"center",justify:"center"}},[n("v-icon",{attrs:{color:"white"}},[t._v("mdi-cloud-upload")])],1)],1)],1),t._v(" "),n("input",{ref:"inputAvatar",staticClass:"d-none",attrs:{type:"file",accept:"image/*"},on:{change:t.onFilePicked}}),t._v(" "),t.deleteImg?n("v-btn",{staticClass:"del-avatar pa-3",attrs:{color:"red",fab:"","x-small":"",dark:""},on:{click:function(e){return t.deleteProfile(t.avatarid)}}},[n("v-icon",[t._v("mdi-trash-can")])],1):t._e()],1)}),[],!1,null,"fcddf0f6",null);e.a=component.exports;c()(component,{VAvatar:d.a,VBtn:v.a,VIcon:f.a,VImg:h.a,VProgressCircular:m.a,VRow:k.a})},467:function(t,e,r){"use strict";var n=r(410);r.n(n).a},468:function(t,e,r){(e=r(12)(!1)).push([t.i,".userAvatar[data-v-fcddf0f6]{position:relative}.userAvatar .avatarImg[data-v-fcddf0f6]{background:#fff}.userAvatar .del-avatar[data-v-fcddf0f6]{position:absolute;bottom:0;right:0}.userAvatar .hoverAvatar[data-v-fcddf0f6],.userAvatar .loadingAvatar[data-v-fcddf0f6]{transition:.2s;background:rgba(0,0,0,.5)}.userAvatar .hoverAvatar[data-v-fcddf0f6]{opacity:0}.userAvatar .hoverAvatar[data-v-fcddf0f6]:hover{transition:.2s;opacity:1;cursor:pointer}",""]),t.exports=e},574:function(t,e,r){"use strict";r.r(e);r(133);var n=r(448),l=r(446),o=(r(226),r(28),r(30),{components:{confirmDialog:r(378).a},props:{alluser:{default:null,type:Array,required:!1}},data:function(){return{search:""}},computed:{filterUser:function(){var t=this;return this.alluser.filter((function(e){return e.username.toLowerCase().includes(t.search.toLowerCase())}))}},methods:{deleteUser:function(t){var e=this;this.$refs.confirm.open("คุณแน่ใจหรือไม่?","คุณแน่ใจหรือไม่ที่จะลบข้อมูลนี้",{width:290,color:"red"}).then((function(r){e.$axios.$delete("/api/users/".concat(t),{progress:!1}).then((function(r){e.$emit("removed",t)})).catch((function(t){alert(t)}))})).catch((function(){}))}}}),c=r(56),d=r(74),v=r.n(d),f=r(99),h=r(357),m=r(354),k=r(366),y=r(458),_=r(158),x=r(100),w=r(161),C=r(109),U=r(368),V=r(403),A=r(477),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h3",{staticClass:"pl-5 pt-3 font-weight-medium"},[t._v("ผู้ใช้งาน")]),t._v(" "),r("v-divider",{staticClass:"darker-divider"}),t._v(" "),r("v-row",{staticClass:"pt-3",attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("v-card",{staticClass:"elevation-4",attrs:{height:"540"}},[r("div",{staticClass:"px-7 py-5"},[r("v-text-field",{staticClass:"rounded-lg",attrs:{color:"cusblue",label:"ค้นหา","append-icon":"mdi-magnify",outlined:"","single-line":"",dense:"",flat:"","hide-details":"",autocomplete:"off"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),r("div",{staticClass:"px-7 py-5"},[r("v-card-title",{staticClass:"pa-0 px-3 py-1"},[t._v(" User List ")]),t._v(" "),r("v-divider"),t._v(" "),r("v-virtual-scroll",{attrs:{items:t.filterUser,"item-height":50,height:"400  "},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item;return[r("v-list-item",{staticClass:"pa-0 px-5"},[r("v-list-item-content",[r("v-list-item-title",[t._v("\n                    "+t._s(n.username)+"\n                  ")])],1),t._v(" "),r("v-list-item-action",[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"6"}},[r("v-btn",{staticClass:"mr-1",attrs:{icon:"","x-small":""},on:{click:function(e){return t.$emit("edituser",n.id)}}},[r("v-icon",{attrs:{color:"black"}},[t._v("mdi-pencil")])],1)],1),t._v(" "),r("v-col",{attrs:{cols:"6"}},[r("v-btn",{staticClass:"ml-1",attrs:{icon:"","x-small":""},on:{click:function(e){return t.deleteUser(n.id)}}},[r("v-icon",{attrs:{color:"black"}},[t._v("mdi-trash-can")])],1)],1)],1)],1)],1)]}}])})],1)])],1)],1),t._v(" "),r("confirmDialog",{ref:"confirm"})],1)}),[],!1,null,null,null),$=component.exports;v()(component,{VBtn:f.a,VCard:h.a,VCardTitle:m.d,VCol:k.a,VDivider:y.a,VIcon:_.a,VListItem:x.a,VListItemAction:w.a,VListItemContent:C.a,VListItemTitle:C.b,VRow:U.a,VTextField:V.a,VVirtualScroll:A.a});r(11),r(7),r(6),r(4),r(9);var O=r(2),E=(r(22),r(19),r(551),r(45),r(33),r(37),r(20),r(21),r(43),r(8));function I(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return j(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0,n=function(){};return{s:n,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){c=!0,l=t},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw l}}}}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}var D={props:{alert:{type:Boolean,required:!0},defaultrole:{default:null,type:Array,required:!1},disable:{type:Boolean,required:!0}},data:function(){return{selected:null,enableValidate:!1,overBtn:!0,lessBtn:!0,rankList:{},alerts:!1}},computed:{selectedRank:function(){var t=[],e=[];for(var r in this.rankList)!0===this.rankList[r].active&&(t.push(this.rankList[r]),e.push(this.rankList[r].id));return 0===e.length&&this.enableValidate?(this.alerts=!0,this.$emit("error",!0)):(this.alerts=!1,this.$emit("error",!1)),this.$emit("rank",e),t},allRank:function(){var t,e=[];for(t in this.rankList)!1===this.rankList[t].active&&e.push(this.rankList[t]);return e}},watch:{defaultrole:function(){var t=this;null===this.defaultrole?this.resetRole():(this.selected=null,setTimeout((function(){t.roleDefault()}),100))},selected:function(){this.enableValidate=!0,null==this.selected?(this.overBtn=!0,this.lessBtn=!0):!1===this.selected.active?(this.overBtn=!1,this.lessBtn=!0):!0===this.selected.active?(this.overBtn=!0,this.lessBtn=!1):(this.overBtn=!1,this.lessBtn=!1)},alert:function(){this.alerts=!0}},created:function(){var t=this;return Object(E.a)(regeneratorRuntime.mark((function e(){var r,n,l,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("/api/master/user-roles",{progress:!1});case 2:r=e.sent,n=[],l=I(r.results);try{for(l.s();!(o=l.n()).done;)c=o.value,n.push({id:c.id,label:c.label,active:!1})}catch(t){l.e(t)}finally{l.f()}t.rankList=n,t.defaultrole&&t.roleDefault();case 8:case"end":return e.stop()}}),e)})))()},methods:{roleDefault:function(){var t,e=this,r=I(this.defaultrole);try{var n=function(){var r=t.value,n=e.rankList.findIndex((function(t){return t.id===r.id}));e.rankList[n].active=!0};for(r.s();!(t=r.n()).done;)n()}catch(t){r.e(t)}finally{r.f()}},resetRole:function(){for(var t in this.enableValidate=!1,this.selected=null,this.rankList)this.rankList[t].active=!1},clickSelect:function(){var t=this,e=this.rankList.findIndex((function(e){return e.id===t.selected.id}));this.rankList[e].active=!this.rankList[e].active,this.selected=null,this.overBtn=!0,this.lessBtn=!0}}},L=r(509),R=r(570),S=r(47),P=Object(c.a)(D,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-item-group",{model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[r("v-row",{attrs:{align:"center",justify:"center",dense:this.$vuetify.breakpoint.xsOnly}},[r("v-col",{attrs:{cols:"12",sm:"5"}},[r("v-card",{staticClass:"elevation-4",attrs:{height:"180",disabled:t.disable}},[r("v-card-title",{staticClass:"pa-0 pl-5 pt-3"},[t._v(" สิทธิทั้งหมด ")]),t._v(" "),r("v-divider"),t._v(" "),r("v-row",{attrs:{dense:""}},t._l(t.allRank,(function(e,i){return r("v-item",{key:e.index,staticClass:"col-6",attrs:{value:e},scopedSlots:t._u([{key:"default",fn:function(n){var l=n.active,o=n.toggle;return[r("div",{class:i%2==1?"pt-3 pl-3 pr-6":"pt-3 pl-6 pr-3"},[r("v-card",{staticClass:"text-center elevation-0",attrs:{color:l?"cusblue":"grey lighten-2",light:"",height:"22","max-width":"95"},on:{click:function(t){return o()}}},[r("span",{class:l?"white--text text-uppercase":"black--text text-uppercase"},[t._v("\n                  "+t._s(e.label)+"\n                ")])])],1)]}}],null,!0)})})),1)],1)],1),t._v(" "),r("v-col",{staticClass:"px-2",attrs:{cols:"12",sm:"1"}},[r("v-row",{attrs:{"no-gutters":this.$vuetify.breakpoint.xsOnly}},[r("v-col",{attrs:{cols:"6",sm:"12"}},[r("div",{staticClass:"text-center"},[r("v-btn",{staticClass:"cusblue2 white--text",attrs:{disabled:t.overBtn,fab:"",small:"",depressed:""},on:{click:t.clickSelect}},[r("v-icon",[t._v(t._s(this.$vuetify.breakpoint.xsOnly?"mdi-chevron-down":"mdi-chevron-right"))])],1)],1)]),t._v(" "),r("v-col",{attrs:{cols:"6",sm:"12"}},[r("div",{staticClass:"text-center"},[r("v-btn",{staticClass:"cusblue2 white--text",attrs:{disabled:t.lessBtn,fab:"",small:"",depressed:""},on:{click:t.clickSelect}},[r("v-icon",[t._v(t._s(this.$vuetify.breakpoint.xsOnly?"mdi-chevron-up":"mdi-chevron-left"))])],1)],1)])],1)],1),t._v(" "),r("v-col",{attrs:{cols:"12",sm:"5"}},[r("v-card",{staticClass:"elevation-4",attrs:{height:"180",disabled:t.disable}},[r("v-card-title",{staticClass:"pa-0 pl-5 pt-3"},[r("span",{class:t.alerts?"red--text":""},[t._v("สิทธิที่เลือก")]),t._v(" "),r("v-chip",{directives:[{name:"show",rawName:"v-show",value:t.alerts,expression:"alerts"}],staticClass:"ma-2",attrs:{color:"red",outlined:"",pill:"","x-small":""}},[t._v("\n            กรุณาเลือกสิทธิ\n          ")])],1),t._v(" "),r("v-divider"),t._v(" "),r("v-row",{attrs:{dense:""}},t._l(t.selectedRank,(function(e,i){return r("v-item",{key:e.index,staticClass:"col-6",attrs:{value:e},scopedSlots:t._u([{key:"default",fn:function(n){var l=n.active,o=n.toggle;return[r("div",{class:i%2==1?"pt-3 pl-3 pr-6":"pt-3 pl-6 pr-3"},[r("v-card",{staticClass:"text-center elevation-0",attrs:{color:l?"cusblue":"grey lighten-2",light:"",height:"22","max-width":"95"},on:{click:function(t){return o()}}},[r("span",{class:l?"white--text text-uppercase":"black--text text-uppercase"},[t._v(t._s(e.label))])])],1)]}}],null,!0)})})),1)],1)],1)],1)],1)}),[],!1,null,null,null),B=P.exports;function T(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function M(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?T(Object(source),!0).forEach((function(e){Object(O.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):T(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}v()(P,{VBtn:f.a,VCard:h.a,VCardTitle:m.d,VChip:L.a,VCol:k.a,VDivider:y.a,VIcon:_.a,VItem:R.a,VItemGroup:S.b,VRow:U.a});var z={components:{roleSelect:B,userAvatar:r(455).a},props:{alluser:{default:null,type:Array,required:!1}},data:function(){var t=this;return{color:"cusblue",assignModal:!1,showPass:!1,valid:!0,loading:!1,alert:!1,error:"",roleAlert:!1,defaultRole:[],avatar:"",addUser:{id:"",name:"",username:"",email:"",password:"",confirm:"",isAdmin:!1,rank:[]},rules:{name:[function(t){return!!t||"กรุณากรอกชื่อ"},function(t){return t&&t.length>=2||"กรุณากรอกชื่อขั้นต่ำ 2 ตัวอักษร"},function(t){return t&&t.length<=100||"ไม่ควรกรอกชื่อเกิน 100 ตัวอักษร"}],username:[function(t){return!!t||"กรุณากรอกชื่อผู้ใช้"},function(t){return t&&t.length>=3||"กรุณากรอกชื่อผู้ใช้ขั้นต่ำ 3 ตัวอักษร"},function(t){return/^[a-z0-9]+$/i.test(t)||"สามารถใช้ตัวอักษรภาษาอังกฤษและตัวเลขเท่านั้น"},function(t){return t&&t.length<=50||"ไม่ควรกรอกชื่อผู้ใช้เกิน 50 ตัวอักษร"},function(e){return e&&t.checkDuplicate(e)||"ชื่อผูัใช้นี้ถูกใช้งานแล้ว"}],email:[function(t){return!!t||"กรุณากรอกอีเมล์"},function(t){return t&&t.length<=50||"ไม่ควรกรอกอีเมล์เกิน 50 ตัวอักษร"},function(t){return/.+@.+\..+/.test(t)||"กรุณากรอกอีเมล์ให้ถูกรูปแบบ"}],password:[function(t){return!!t||"กรุณากรอกรหัสผ่าน"},function(t){return t&&t.length>=5||"รหัสผ่านต้องมีมากกว่าหรือเท่ากับ 5 ตัวอักษร"},function(t){return t&&t.length<=50||"รหัสผ่านต้องมีน้อยหรือเท่ากับ 50 ตัวอักษร"}],password1:[function(t){return t&&t.length>=5||"รหัสผ่านต้องมีมากกว่าหรือเท่ากับ 5 ตัวอักษร"},function(t){return t&&t.length<=50||"รหัสผ่านต้องมีน้อยหรือเท่ากับ 50 ตัวอักษร"}],confirm:[function(e){return e===t.addUser.password||"รหัสผ่านไม่ตรงกัน"}]}}},watch:{assignModal:function(){var t=this;!1===this.assignModal&&setTimeout((function(){t.newItem()}),150)}},methods:{newItem:function(){this.defaultRole=null,this.$refs.form.reset(),this.alert=!1,this.addUser.id="",this.addUser.username="",this.avatar=""},roleError:function(t){this.valid=!t},onEnter:function(t){this.$refs[t].focus()},addRank:function(t){this.addUser.rank=t},checkDuplicate:function(t){var e=this;return""===this.addUser.id?!this.alluser.some((function(e){return e.username===t})):!this.alluser.some((function(r){return r.username===t&&r.id!==e.addUser.id}))},open:function(t){var e=this;Number.isInteger(t)?this.$axios.$get("/api/users/".concat(t),{progress:!1}).then((function(r){e.addUser={id:r.id,name:r.name,username:r.username,email:r.email,password:"",confirm:"",isAdmin:r.isAdmin,rank:r.roles},e.defaultRole=r.roles,e.avatar="".concat("https://api.vet-clinic.somprasongd.work","/api/users/").concat(t,"/avatar"),e.assignModal=!0})):this.assignModal=!0},submitUser:function(){var t=this;if(this.$refs.form.validate()&&0!==this.addUser.rank.length){this.roleAlert=!1,this.loading=!0;var e=M({},this.addUser);this.$axios.$post("/api/users",{username:e.username.toLowerCase(),name:e.name,email:e.email,password:e.password,isAdmin:e.isAdmin,roles:e.rank},{progress:!1}).then((function(e){setTimeout((function(){t.$refs.form.reset(),t.assignModal=!1,t.$emit("response",e),t.loading=!1}),500)})).catch((function(e){t.requestError(e)}))}else this.roleAlert=!0},updateUser:function(){var t=this;if(this.$refs.form.validate()&&0!==this.addUser.rank.length){this.roleAlert=!1,this.loading=!0;var e=M({},this.addUser),r={username:e.username.toLowerCase(),name:e.name,email:e.email,password:""===e.password?null:e.password,isAdmin:e.isAdmin,roles:e.rank};this.$axios.$put("/api/users/".concat(e.id),r,{progress:!1}).then((function(e){t.updateSuccess(e)})).catch((function(e){t.requestError(e)}))}else 0===this.addUser.rank.length&&(this.roleAlert=!0)},updateSuccess:function(t){var e=this;setTimeout((function(){e.assignModal=!1,e.$refs.form.reset(),e.$emit("update",t),e.loading=!1}),500)},requestError:function(t){this.alert=!0,this.error=t.response.data.error.message,this.loading=!1}}},N=r(430),F=r(504),H=r(510),J=r(400),G=r(157),K=r(371),Q=Object(c.a)(z,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-dialog",{attrs:{"max-width":"700",scrollable:"",fullscreen:this.$vuetify.breakpoint.xsOnly},model:{value:t.assignModal,callback:function(e){t.assignModal=e},expression:"assignModal"}},[r("v-card",[r("h2",{staticClass:"pa-5 pb-2"},[t._v("\n        "+t._s(""==t.addUser.id?"เพิ่ม":"แก้ไข")+"\n      ")]),t._v(" "),r("v-btn",{staticClass:"mt-4",attrs:{icon:"",absolute:"",right:""},on:{click:function(e){t.assignModal=!1}}},[r("v-icon",[t._v("mdi-close")])],1),t._v(" "),r("v-divider",{staticClass:"darker-divider"}),t._v(" "),r("v-card-text",[""==!t.addUser.id?r("v-row",{staticClass:"pt-2",attrs:{justify:"center",align:"center","no-gutters":""}},[r("userAvatar",{attrs:{avatarid:t.addUser.id,avatars:t.avatar,"type-avatar":"users"}}),t._v(" "),r("div",{staticClass:"col-12 text-center"},[r("h1",{staticClass:"my-4"},[t._v(t._s(t.addUser.username))]),t._v(" "),r("v-divider")],1)],1):t._e(),t._v(" "),r("v-form",{ref:"form",attrs:{"lazy-validation":"",disabled:t.loading,autocomplete:"off"},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-row",{attrs:{dense:""}},[r("v-col",{attrs:{cols:"6"}},[r("v-text-field",{ref:"name",attrs:{color:t.color,rules:t.rules.name,label:"name",type:"text"},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;""==t.addUser.id?t.onEnter("username"):t.onEnter("email")}},model:{value:t.addUser.name,callback:function(e){t.$set(t.addUser,"name",e)},expression:"addUser.name"}})],1),t._v(" "),""==t.addUser.id?r("v-col",{attrs:{cols:"6"}},[r("v-text-field",{ref:"username",attrs:{color:t.color,rules:t.rules.username,label:"username",type:"text"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onEnter("email")}},model:{value:t.addUser.username,callback:function(e){t.$set(t.addUser,"username",e)},expression:"addUser.username"}})],1):t._e(),t._v(" "),r("v-col",{attrs:{cols:"6"}},[r("v-text-field",{ref:"email",attrs:{color:t.color,rules:t.rules.email,label:"email",type:"email"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onEnter("password")}},model:{value:t.addUser.email,callback:function(e){t.$set(t.addUser,"email",e)},expression:"addUser.email"}})],1),t._v(" "),r("v-col",{attrs:{cols:"6"}},[r("v-text-field",{ref:"password",attrs:{color:t.color,type:t.showPass?"text":"password","append-icon":t.showPass?"mdi-eye":"mdi-eye-off",rules:""==t.addUser.id?t.rules.password:""!==t.addUser.password?t.rules.password1:[],label:""==t.addUser.id?"password":"password (not required)"},on:{"click:append":function(e){t.showPass=!t.showPass},keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;""==t.addUser.id?t.onEnter("confirm"):t.updateUser()}},model:{value:t.addUser.password,callback:function(e){t.$set(t.addUser,"password",e)},expression:"addUser.password"}})],1),t._v(" "),""==t.addUser.id?r("v-col",{attrs:{cols:"6"}},[r("v-text-field",{ref:"confirm",attrs:{color:t.color,rules:t.rules.confirm,label:"confirm password",type:"password"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitUser(e)}},model:{value:t.addUser.confirm,callback:function(e){t.$set(t.addUser,"confirm",e)},expression:"addUser.confirm"}})],1):t._e(),t._v(" "),r("v-col",{attrs:{cols:"6"}},[r("v-checkbox",{attrs:{color:t.color,label:"ผู้ดูแลระบบ"},model:{value:t.addUser.isAdmin,callback:function(e){t.$set(t.addUser,"isAdmin",e)},expression:"addUser.isAdmin"}})],1)],1),t._v(" "),r("roleSelect",{attrs:{alert:t.roleAlert,defaultrole:t.defaultRole,disable:t.loading},on:{rank:t.addRank,error:t.roleError}}),t._v(" "),r("v-alert",{attrs:{dense:"",text:"",color:"red",transition:"scroll-y-transition",dismissible:""},model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[t._v("\n            "+t._s(t.error)+"\n          ")])],1)],1),t._v(" "),r("v-divider"),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{staticClass:"cusblue2--text text-none",attrs:{text:"",disabled:t.loading},on:{click:function(e){t.assignModal=!1}}},[t._v("\n          Cancel\n        ")]),t._v(" "),r("v-btn",{staticClass:"cusblue2--text text-none",attrs:{text:"",disabled:t.loading},on:{click:t.newItem}},[t._v("\n          New\n        ")]),t._v(" "),r("v-btn",{staticClass:"cusblue2--text text-none",attrs:{text:"",disabled:!t.valid||t.loading},on:{click:function(e){""==t.addUser.id?t.submitUser():t.updateUser()}}},[r("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"mr-2",attrs:{indeterminate:"",color:"cusblue2",size:15,width:2}}),t._v("\n          "+t._s(""==t.addUser.id?"Save":"Update")+"\n        ")],1)],1)],1)],1)],1)}),[],!1,null,null,null),W=Q.exports;v()(Q,{VAlert:N.a,VBtn:f.a,VCard:h.a,VCardActions:m.a,VCardText:m.c,VCheckbox:F.a,VCol:k.a,VDialog:H.a,VDivider:y.a,VForm:J.a,VIcon:_.a,VProgressCircular:G.a,VRow:U.a,VSpacer:K.a,VTextField:V.a});var X={components:{settingNav:n.a,settingTab:l.a,userForm:$,userDialog:W},data:function(){return{allUser:[]}},mounted:function(){var t=this;this.$axios.get("/api/users",{progress:!1}).then((function(e){t.allUser=e.data.results}))},methods:{openUserDialog:function(t){this.$refs.userDialog.open(t)},addRespone:function(t){this.allUser.push(t)},updateRespone:function(t){var e=this.allUser.findIndex((function(e){return e.id===t.id}));this.allUser.splice(e,1,t)},removeUser:function(t){var e=this.allUser.findIndex((function(e){return e.id===t}));this.allUser.splice(e,1)}}},Y=Object(c.a)(X,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("settingNav"),t._v(" "),r("div",{staticClass:"custom-container"},[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{class:this.$vuetify.breakpoint.smAndUp?"px-2":"",attrs:{cols:"12",sm:"4",md:"3",lg:"2"}},[r("settingTab")],1),t._v(" "),r("v-col",{class:this.$vuetify.breakpoint.smAndUp?"px-2":"",attrs:{cols:"12",sm:"8",md:"9",lg:"10"}},[r("userForm",{attrs:{alluser:t.allUser},on:{removed:t.removeUser,edituser:t.openUserDialog}})],1)],1)],1),t._v(" "),r("userDialog",{ref:"userDialog",attrs:{alluser:t.allUser},on:{response:t.addRespone,update:t.updateRespone}}),t._v(" "),r("v-btn",{attrs:{color:"cusblue2",fixed:"",fab:"",large:"",dark:"",bottom:"",right:""},on:{click:function(e){return e.stopPropagation(),t.openUserDialog(e)}}},[r("v-icon",[t._v("mdi-plus")])],1)],1)}),[],!1,null,null,null);e.default=Y.exports;v()(Y,{VBtn:f.a,VCol:k.a,VIcon:_.a,VRow:U.a})}}]);