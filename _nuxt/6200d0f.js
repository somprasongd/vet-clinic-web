(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{487:function(e,t,n){"use strict";n(4);var o={data:function(){return{dialog:!1,resolve:null,reject:null,message:null,title:null,options:{color:"primary",width:290,zIndex:200}}},computed:{show:{get:function(){return this.dialog},set:function(e){this.dialog=e,!1===e&&this.cancel()}}},methods:{open:function(title,e,t){var n=this;return this.dialog=!0,this.title=title,this.message=e,this.options=Object.assign(this.options,t),new Promise((function(e,t){n.resolve=e,n.reject=t}))},agree:function(){this.resolve(!0),this.dialog=!1,this.$emit("onOk")},cancel:function(){this.dialog=!1,this.resolve(!1),this.$emit("onCancel")}}},r=n(41),l=n(50),c=n.n(l),d=n(110),v=n(183),f=n(63),x=n(484),h=n(480),component=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{style:{zIndex:e.options.zIndex},attrs:{"max-width":e.options.width},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancel(t)}},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("h2",{staticClass:"pl-6 pt-3 pb-2"},[e._v(e._s(e.title))]),e._v(" "),n("v-card-text",{directives:[{name:"show",rawName:"v-show",value:!!e.message,expression:"!!message"}]},[e._v(" "+e._s(e.message)+" ")]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:e.options.color,text:""},nativeOn:{click:function(t){return e.agree(t)}}},[e._v(" ใช่ ")]),e._v(" "),n("v-btn",{attrs:{color:"grey",text:""},nativeOn:{click:function(t){return e.cancel(t)}}},[e._v(" ไม่ ")])],1)],1)],1)}),[],!1,null,null,null);t.a=component.exports;c()(component,{VBtn:d.a,VCard:v.a,VCardActions:f.a,VCardText:f.c,VDialog:x.a,VSpacer:h.a})},493:function(e,t,n){var content=n(494);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(13).default)("5c8fbe94",content,!0,{sourceMap:!1})},494:function(e,t,n){(t=n(12)(!1)).push([e.i,".v-textarea textarea{align-self:stretch;flex:1 1 auto;line-height:1.75rem;max-width:100%;min-height:32px;outline:none;padding:0;width:100%}.v-textarea .v-text-field__prefix,.v-textarea .v-text-field__suffix{padding-top:2px;align-self:start}.v-textarea.v-text-field--box .v-text-field__prefix,.v-textarea.v-text-field--box textarea,.v-textarea.v-text-field--enclosed .v-text-field__prefix,.v-textarea.v-text-field--enclosed textarea{margin-top:24px}.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) textarea,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) textarea,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) textarea,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) textarea{margin-top:10px}.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) .v-label,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) .v-label,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) .v-label,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) .v-label{top:18px}.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense textarea,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense textarea,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense textarea,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense textarea{margin-top:6px}.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__prepend-outer,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__prepend-outer,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__prepend-outer,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__prepend-outer{align-self:flex-start;margin-top:8px}.v-textarea.v-text-field--solo{align-items:flex-start}.v-textarea.v-text-field--solo .v-input__append-inner,.v-textarea.v-text-field--solo .v-input__append-outer,.v-textarea.v-text-field--solo .v-input__prepend-inner,.v-textarea.v-text-field--solo .v-input__prepend-outer{align-self:flex-start;margin-top:12px}.v-application--is-ltr .v-textarea.v-text-field--solo .v-input__append-inner{padding-left:12px}.v-application--is-rtl .v-textarea.v-text-field--solo .v-input__append-inner{padding-right:12px}.v-textarea--auto-grow textarea{overflow:hidden}.v-textarea--no-resize textarea{resize:none}.v-textarea.v-text-field--enclosed .v-text-field__slot{align-self:stretch}.v-application--is-ltr .v-textarea.v-text-field--enclosed .v-text-field__slot{margin-right:-12px}.v-application--is-rtl .v-textarea.v-text-field--enclosed .v-text-field__slot{margin-left:-12px}.v-application--is-ltr .v-textarea.v-text-field--enclosed .v-text-field__slot textarea{padding-right:12px}.v-application--is-rtl .v-textarea.v-text-field--enclosed .v-text-field__slot textarea{padding-left:12px}",""]),e.exports=t},502:function(e,t,n){"use strict";var o={data:function(){return{sendDoctor:!1,doctor:this.$store.state.form.doctor,visitId:"",oldDoc:"",newDoc:"",loading:!1}},created:function(){var e=this;0===this.$store.state.form.doctor.length&&this.$store.dispatch("form/addDoctor").then((function(t){e.doctor=t}))},methods:{open:function(e,t){this.visitId=t,this.oldDoc=e,this.sendDoctor=!0},submitSend:function(){var e=this;this.loading=!0,this.$axios.$patch("/api/visits/".concat(this.visitId),{doctorId:""===this.newDoc?null:this.newDoc},{progress:!1}).then((function(t){setTimeout((function(){e.sendDoctor=!1,e.loading=!1,e.$emit("updateDoctor",t)}),500)})).catch((function(t){e.loading=!1,alert(t)}))}}},r=n(41),l=n(50),c=n.n(l),d=n(110),v=n(183),f=n(63),x=n(484),h=n(464),m=n(112),_=n(120),k=n(175),C=n(503),y=n(480),w=n(460),component=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"max-width":"450",scrollable:"",fullscreen:this.$vuetify.breakpoint.xsOnly,transition:"dialog-transition"},model:{value:e.sendDoctor,callback:function(t){e.sendDoctor=t},expression:"sendDoctor"}},[n("v-card",[n("h2",{staticClass:"pa-5 pb-2"},[e._v("ส่งต่อ")]),e._v(" "),n("v-divider"),e._v(" "),n("v-card-text",[n("v-text-field",{attrs:{label:"แพทย์ผู้ตรวจ (เดิม)",disabled:""},model:{value:e.oldDoc,callback:function(t){e.oldDoc=t},expression:"oldDoc"}}),e._v(" "),n("v-select",{attrs:{items:e.doctor,"item-text":"name","item-value":"id",color:"cusblue","item-color":"cusblue",label:"แพทย์ผู้ตรวจ (ใหม่)",disabled:e.loading,"menu-props":{closeOnContentClick:!0}},scopedSlots:e._u([{key:"prepend-item",fn:function(){return[n("v-list-item",{style:""===e.newDoc?"background-color: #e2f5fc":"",attrs:{ripple:""},on:{click:function(t){e.newDoc=""}}},[n("v-list-item-content",[n("v-list-item-title",{class:""===e.newDoc?"cusblue--text":""},[e._v("\n                ไม่ระบุแพทย์\n              ")])],1)],1),e._v(" "),n("v-divider",{staticClass:"mt-2"})]},proxy:!0}]),model:{value:e.newDoc,callback:function(t){e.newDoc=t},expression:"newDoc"}})],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"cusblue2",disabled:e.loading,text:""},on:{click:function(t){e.sendDoctor=!1}}},[e._v("\n        ไม่ส่ง\n      ")]),e._v(" "),n("v-btn",{attrs:{color:"cusblue2",disabled:e.loading,text:""},on:{click:e.submitSend}},[n("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"mr-2",attrs:{indeterminate:"",color:"cusblue2",size:15,width:2}}),e._v("\n        ยืนยัน\n      ")],1)],1)],1)],1)}),[],!1,null,null,null);t.a=component.exports;c()(component,{VBtn:d.a,VCard:v.a,VCardActions:f.a,VCardText:f.c,VDialog:x.a,VDivider:h.a,VListItem:m.a,VListItemContent:_.a,VListItemTitle:_.b,VProgressCircular:k.a,VSelect:C.a,VSpacer:y.a,VTextField:w.a})},509:function(e,t,n){"use strict";n(11),n(9),n(6),n(4),n(10);var o=n(1),r=(n(17),n(493),n(460)),l=n(3);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var d=Object(l.a)(r.a);t.a=d.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(e){return!isNaN(parseFloat(e))}},rows:{type:[Number,String],default:5,validator:function(e){return!isNaN(parseInt(e,10))}}},computed:{classes:function(){return function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle},r.a.options.computed.classes.call(this))},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{lazyValue:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var e=this;setTimeout((function(){e.autoGrow&&e.calculateInputHeight()}),0)},methods:{calculateInputHeight:function(){var input=this.$refs.input;if(input){input.style.height="0";var e=input.scrollHeight,t=parseInt(this.rows,10)*parseFloat(this.rowHeight);input.style.height=Math.max(t,e)+"px"}},genInput:function(){var input=r.a.options.methods.genInput.call(this);return input.tag="textarea",delete input.data.attrs.type,input.data.attrs.rows=this.rows,input},onInput:function(e){r.a.options.methods.onInput.call(this,e),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(e){this.isFocused&&13===e.keyCode&&e.stopPropagation(),this.$emit("keydown",e)}}})},538:function(e,t,n){"use strict";n(11),n(9),n(6),n(4),n(10);var o=n(1);n(51);function r(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var l={data:function(){return{sendCheckDialog:!1,loading:!1,alert:!1,error:"",sendCheck:{petId:"",type:"",time:"",status:"",doctorId:"",important:1,weight:"",temp:"",do:{check:[],other:{text:"",enabled:!1}},problem:"",appointId:""},valid:!0,rules:{important:[function(e){return!!e||"กรุณาเลือกความสำคัญ"}],weight:[function(e){return!!e||"กรุณากรอกน้ำหนัก"},function(e){return/^[0-9]*\.?[0-9]{1,2}$/.test(e)||"กรุณากรอกตัวเลขเท่านั้น"},function(e){return e&&e.split(".")[0].length<=3||"ไม่ควรกรอกน้ำหนักเกิน 3 หลัก"}],temp:[function(e){return!e||/^[0-9]*\.?[0-9]{1,2}$/.test(e)||"กรุณากรอกตัวเลขเท่านั้น"},function(e){return!e||e.split(".")[0].length<=3||"ไม่ควรกรอกอุณหภูมิเกิน 3 หลัก"}]}}},computed:{doctorListItems:function(){return this.$store.state.form.doctor},priorityListItems:function(){return this.$store.state.form.priority}},watch:{sendCheckDialog:function(){!1===this.sendCheckDialog&&this.$refs.form.reset()}},mounted:function(){0===this.$store.state.form.doctor.length&&this.$store.dispatch("form/addDoctor"),0===this.$store.state.form.priority.length&&this.$store.dispatch("form/addPriority")},methods:{open:function(e){this.sendCheck.petId=e,this.sendCheck.doctorId=this.$store.getters.loggedInUser.roles.some((function(e){return 2===e.id}))?this.$store.getters.loggedInUser.id:"",this.sendCheck.appointId=null,this.sendCheckDialog=!0},openWithAppointment:function(e,t,n){this.sendCheck.petId=e,this.sendCheck.doctorId=null!==t?t:"",this.sendCheck.appointId=n,this.sendCheckDialog=!0},submitCheck:function(){var e=this;if(this.$refs.form.validate()){this.loading=!0;var t=function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?r(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):r(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},this.sendCheck);t.do.other.enabled&&""!==t.do.other.text&&t.do.check.push(t.do.other.text);var n={petId:t.petId,doctorId:""===t.doctorId?null:t.doctorId,visitPriorityId:t.important,weight:t.weight,temp:""===t.temp?null:t.temp,visitCause:t.do.check.join(", "),note:t.problem,appointId:""===t.appointId?null:t.appointId};this.$axios.$post("/api/visits",n,{progress:!1}).then((function(n){setTimeout((function(){e.loading=!1,e.alert=!1,e.sendCheckDialog=!1,""!==t.appointId&&e.$emit("updateAppoint",{appointId:t.appointId,respone:n})}),500)})).catch((function(t){e.loading=!1,e.alert=!0,e.error=t.response.data.error.message}))}}}},c=n(41),d=n(50),v=n.n(d),f=n(476),x=n(110),h=n(183),m=n(63),_=n(477),k=n(472),C=n(484),y=n(464),w=n(479),I=n(184),D=n(112),$=n(120),V=n(175),S=n(474),O=n(503),T=n(480),j=n(460),N=n(509),component=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-dialog",{attrs:{"max-width":"700",scrollable:"",fullscreen:this.$vuetify.breakpoint.xsOnly},model:{value:e.sendCheckDialog,callback:function(t){e.sendCheckDialog=t},expression:"sendCheckDialog"}},[n("v-card",[n("h2",{staticClass:"pa-5 pb-2"},[e._v("ส่งตรวจ")]),e._v(" "),n("v-btn",{staticClass:"mt-4",attrs:{icon:"",absolute:"",right:""},on:{click:function(t){e.sendCheckDialog=!1}}},[n("v-icon",[e._v("mdi-close")])],1),e._v(" "),n("v-divider",{staticClass:"darker-divider"}),e._v(" "),n("v-card-text",[n("v-form",{ref:"form",attrs:{"lazy-validation":"",autocomplete:"off"},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{cols:"6"}},[n("v-select",{attrs:{disabled:e.loading,items:e.doctorListItems,"item-text":"name","item-value":"id",color:"cusblue","item-color":"cusblue",label:"แพทย์ผู้ตรวจ","menu-props":{closeOnContentClick:!0}},scopedSlots:e._u([{key:"prepend-item",fn:function(){return[n("v-list-item",{style:""===e.sendCheck.doctorId?"background-color: #e2f5fc":"",attrs:{ripple:""},on:{click:function(t){e.sendCheck.doctorId=""}}},[n("v-list-item-content",[n("v-list-item-title",{class:""===e.sendCheck.doctorId?"cusblue--text":""},[e._v("\n                        ไม่ระบุแพทย์\n                      ")])],1)],1),e._v(" "),n("v-divider",{staticClass:"mt-2"})]},proxy:!0}]),model:{value:e.sendCheck.doctorId,callback:function(t){e.$set(e.sendCheck,"doctorId",t)},expression:"sendCheck.doctorId"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-select",{attrs:{disabled:e.loading,items:e.priorityListItems,"item-text":"label","item-value":"id",color:"cusblue",label:"ความสำคัญ","menu-props":"auto",rules:e.rules.important},model:{value:e.sendCheck.important,callback:function(t){e.$set(e.sendCheck,"important",t)},expression:"sendCheck.important"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{disabled:e.loading,color:"cusblue",label:"นำหนัก / kg",autofocus:"",rules:e.rules.weight},model:{value:e.sendCheck.weight,callback:function(t){e.$set(e.sendCheck,"weight",t)},expression:"sendCheck.weight"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{disabled:e.loading,color:"cusblue",label:"อุณหภูมิ / F°",rules:e.rules.temp},model:{value:e.sendCheck.temp,callback:function(t){e.$set(e.sendCheck,"temp",t)},expression:"sendCheck.temp"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6",sm:"4"}},[n("v-checkbox",{staticClass:"mx-2",attrs:{disabled:e.loading,value:"ดูอาการ",label:"ดูอาการ"},model:{value:e.sendCheck.do.check,callback:function(t){e.$set(e.sendCheck.do,"check",t)},expression:"sendCheck.do.check"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6",sm:"4"}},[n("v-checkbox",{staticClass:"mx-2",attrs:{disabled:e.loading,value:"ทำแผล",label:"ทำแผล"},model:{value:e.sendCheck.do.check,callback:function(t){e.$set(e.sendCheck.do,"check",t)},expression:"sendCheck.do.check"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6",sm:"4"}},[n("v-checkbox",{staticClass:"mx-2",attrs:{disabled:e.loading,value:"ฟังผลตรวจ",label:"ฟังผลตรวจ Lab"},model:{value:e.sendCheck.do.check,callback:function(t){e.$set(e.sendCheck.do,"check",t)},expression:"sendCheck.do.check"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6",sm:"4"}},[n("v-checkbox",{staticClass:"mx-2",attrs:{disabled:e.loading,value:"ฉีดยา",label:"ฉีดยา"},model:{value:e.sendCheck.do.check,callback:function(t){e.$set(e.sendCheck.do,"check",t)},expression:"sendCheck.do.check"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6",sm:"4"}},[n("v-checkbox",{staticClass:"mx-2",attrs:{disabled:e.loading,value:"ให้น้ำเกลือ",label:"ให้น้ำเกลือ"},model:{value:e.sendCheck.do.check,callback:function(t){e.$set(e.sendCheck.do,"check",t)},expression:"sendCheck.do.check"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6",sm:"4"}},[n("v-checkbox",{staticClass:"mx-2",attrs:{disabled:e.loading,value:"Xray / Ultrasound",label:"Xray / Ultrasound"},model:{value:e.sendCheck.do.check,callback:function(t){e.$set(e.sendCheck.do,"check",t)},expression:"sendCheck.do.check"}})],1),e._v(" "),n("v-col",{staticClass:"px-3",attrs:{cols:"12"}},[n("v-row",{attrs:{align:"center","no-gutters":""}},[n("v-checkbox",{staticClass:"shrink mr-2 mt-0",attrs:{disabled:e.loading,"hide-details":"",label:"อื่นๆ"},model:{value:e.sendCheck.do.other.enabled,callback:function(t){e.$set(e.sendCheck.do.other,"enabled",t)},expression:"sendCheck.do.other.enabled"}}),e._v(" "),n("v-text-field",{staticClass:"mt-5",attrs:{color:"cusblue",dense:"",disabled:!e.sendCheck.do.other.enabled||e.loading},model:{value:e.sendCheck.do.other.text,callback:function(t){e.$set(e.sendCheck.do.other,"text",t)},expression:"sendCheck.do.other.text"}})],1)],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-textarea",{attrs:{disabled:e.loading,color:"cusblue",label:"Note","auto-grow":"","row-height":"24",rows:"1"},model:{value:e.sendCheck.problem,callback:function(t){e.$set(e.sendCheck,"problem",t)},expression:"sendCheck.problem"}})],1)],1),e._v(" "),n("v-alert",{attrs:{dense:"",text:"",color:"red",transition:"scroll-y-transition",dismissible:""},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[e._v("\n            "+e._s(e.error)+"\n          ")])],1)],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["ctrl","x"],expression:"['ctrl', 'x']"}],attrs:{color:"cusblue2",disabled:e.loading,text:""},on:{shortkey:function(t){e.sendCheckDialog=!1},click:function(t){e.sendCheckDialog=!1}}},[e._v("\n          ยกเลิก\n        ")]),e._v(" "),n("v-btn",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["ctrl","enter"],expression:"['ctrl', 'enter']"}],attrs:{color:"cusblue2",disabled:!e.valid||e.loading,text:""},on:{shortkey:e.submitCheck,click:e.submitCheck}},[n("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"mr-2",attrs:{indeterminate:"",color:"cusblue2",size:15,width:2}}),e._v("\n          บันทึก\n        ")],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.a=component.exports;v()(component,{VAlert:f.a,VBtn:x.a,VCard:h.a,VCardActions:m.a,VCardText:m.c,VCheckbox:_.a,VCol:k.a,VDialog:C.a,VDivider:y.a,VForm:w.a,VIcon:I.a,VListItem:D.a,VListItemContent:$.a,VListItemTitle:$.b,VProgressCircular:V.a,VRow:S.a,VSelect:O.a,VSpacer:T.a,VTextField:j.a,VTextarea:N.a})},628:function(e,t,n){"use strict";n.r(t);n(122),n(42);var o=n(7),r=(n(17),{props:{queueCount:{type:Number,required:!1,default:0},defaultVisitTypeId:{type:Number,required:!1,default:0},defaultDoctorId:{type:Number,required:!1,default:0}},data:function(){return{selectedVisitTypeId:this.defaultVisitTypeId,selectedDoctorId:this.defaultDoctorId}},computed:{visitTypes:function(){return this.$store.state.form.visitType},doctors:function(){return this.$store.state.form.doctor}},created:function(){0===this.$store.state.form.doctor.length&&this.$store.dispatch("form/addDoctor"),0===this.$store.state.form.visitType.length&&this.$store.dispatch("form/addVisitType")},methods:{sendValue:function(){this.$emit("onSearch",{visitTypeId:this.selectedVisitTypeId,doctorId:this.selectedDoctorId})}}}),l=n(41),c=n(50),d=n.n(c),v=n(183),f=n(464),x=n(112),h=n(120),m=n(474),_=n(503),k=n(480),C=n(526),component=Object(l.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{color:"grey lighten-4",flat:"",tile:""}},[n("v-row",{class:"second-nav cusblue1 "+(this.$vuetify.breakpoint.xsOnly?"pb-2":""),attrs:{height:"55",align:"center",justify:"center",dense:"",flat:""}},[n("h1",{staticClass:"font-weight-medium col-sm-2 col-12"},[e._v("คิว ("+e._s(e.queueCount)+")")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-subheader",{directives:[{name:"show",rawName:"v-show",value:!this.$vuetify.breakpoint.smAndDown,expression:"!this.$vuetify.breakpoint.smAndDown"}],staticClass:"cus-subhead"},[e._v("ประเภทการตรวจ :\n    ")]),e._v(" "),n("v-select",{staticClass:"rounded-lg cus-input mr-3",attrs:{items:e.visitTypes,"item-text":"label","item-value":"id","background-color":"cusblue3","item-color":"cusblue",dark:"",filled:"",rounded:"","single-line":"",dense:"",flat:"","hide-details":""},on:{change:e.sendValue},model:{value:e.selectedVisitTypeId,callback:function(t){e.selectedVisitTypeId=t},expression:"selectedVisitTypeId"}}),e._v(" "),n("v-subheader",{directives:[{name:"show",rawName:"v-show",value:!this.$vuetify.breakpoint.smAndDown,expression:"!this.$vuetify.breakpoint.smAndDown"}],staticClass:"cus-subhead"},[e._v("แพทย์ผู้ตรวจ :\n    ")]),e._v(" "),n("v-select",{staticClass:"rounded-lg cus-input",attrs:{items:e.doctors,"item-text":"name","item-value":"id","menu-props":{closeOnContentClick:!0},"background-color":"cusblue3","item-color":"cusblue",label:"แสดงทั้งหมด",dark:"",filled:"",rounded:"","single-line":"",dense:"",flat:"","hide-details":""},on:{change:e.sendValue},scopedSlots:e._u([{key:"prepend-item",fn:function(){return[n("v-list-item",{style:0===e.selectedDoctorId?"background-color: #e2f5fc":"",attrs:{ripple:""},on:{click:function(t){e.selectedDoctorId=0},change:e.sendValue}},[n("v-list-item-content",[n("v-list-item-title",{class:0===e.selectedDoctorId?"cusblue--text":""},[e._v("\n              แสดงทั้งหมด\n            ")])],1)],1),e._v(" "),n("v-divider",{staticClass:"mt-2"})]},proxy:!0}]),model:{value:e.selectedDoctorId,callback:function(t){e.selectedDoctorId=t},expression:"selectedDoctorId"}})],1)],1)}),[],!1,null,null,null),y=component.exports;d()(component,{VCard:v.a,VDivider:f.a,VListItem:x.a,VListItemContent:h.a,VListItemTitle:h.b,VRow:m.a,VSelect:_.a,VSpacer:k.a,VSubheader:C.a});var w=n(16),I=n(502),D=n(86),$=n.n(D),V={fetch:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("/api/config/items/1",{progress:!1});case 3:e.item=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e.item={};case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},fetchOnServer:!1,data:function(){return{item:{},id:null,date:new Date,qty:1,price:0,assignModal:!1,loading:!1}},computed:{visitDate:function(){return $()(this.date).format("DD/MM/YYYY")},visitTime:function(){return $()(this.date).format("HH:mm:ss")},summaryTime:function(){var e=$.a.duration($()().diff(this.date));return"".concat(e.days()," วัน ").concat(e.hours()," ชั่วโมง ").concat(e.minutes()," นาที")}},methods:{open:function(e,t){this.id=e,this.date=t;var n=$.a.duration($()().diff(t)),o=0===n.days()?1:n.days();parseInt(n.hours())>=1&&(o=parseInt(n.days())+1),this.qty=o,this.price=this.item.price||0,this.assignModal=!0},isNumber:function(e){var t=e.keyCode?e.keyCode:e.which;(t<48||t>57)&&e.preventDefault()},takeHome:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var data,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,data={qty:e.qty,price:""===e.price?0:e.price},t.prev=2,t.next=5,e.$axios.$patch("/api/visits/".concat(e.id,"/status/take-home"),data,{progress:!1});case 5:n=t.sent,e.assignModal=!1,e.$emit("onSuccess",e.id),n&&e.$router.push("/pos/".concat(n.id)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),e.loading=!1;case 14:case"end":return t.stop()}}),t,null,[[2,11]])})))()}}},S=n(110),O=n(63),T=n(472),j=n(484),N=n(175),P=n(460),A=Object(l.a)(V,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-dialog",{attrs:{"max-width":"450",scrollable:"",fullscreen:this.$vuetify.breakpoint.xsOnly,transition:"dialog-transition"},model:{value:e.assignModal,callback:function(t){e.assignModal=t},expression:"assignModal"}},[n("v-card",[n("h2",{staticClass:"pa-5 pb-2"},[e._v("รับกลับบ้าน")]),e._v(" "),n("v-divider"),e._v(" "),n("v-card-text",[n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{value:e.visitDate,disabled:"",color:"cusblue",label:"วันที่รับฝาก"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{value:e.visitTime,disabled:"",color:"cusblue",label:"เวลารับฝาก"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{value:e.summaryTime,disabled:"",color:"cusblue",label:"สรุประยะเวลา"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{autocomplete:"nope",disabled:e.loading,color:"cusblue",label:"จำนวนวันฝาก"},on:{keypress:function(t){return e.isNumber(t)}},model:{value:e.qty,callback:function(t){e.qty=t},expression:"qty"}})],1),e._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{autocomplete:"nope",disabled:e.loading,color:"cusblue",label:"ราคาต่อวัน"},on:{keypress:function(t){return e.isNumber(t)}},model:{value:e.price,callback:function(t){e.price=t},expression:"price"}})],1)],1)],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"cusblue2",disabled:e.loading,text:""},on:{click:function(t){e.assignModal=!1}}},[e._v("\n          ยกเลิก\n        ")]),e._v(" "),n("v-btn",{attrs:{color:"cusblue2",disabled:e.loading,text:""},on:{click:function(t){return e.takeHome()}}},[n("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"mr-2",attrs:{indeterminate:"",color:"cusblue2",size:15,width:2}}),e._v("\n          ตกลง\n        ")],1)],1)],1)],1)],1)}),[],!1,null,null,null),M=A.exports;d()(A,{VBtn:S.a,VCard:v.a,VCardActions:O.a,VCardText:O.c,VCol:T.a,VDialog:j.a,VDivider:f.a,VProgressCircular:N.a,VRow:m.a,VSpacer:k.a,VTextField:P.a});var H=n(487),F={components:{sendDoctorDialog:I.a,takeHomeDialog:M,confirmDialog:H.a},props:{dessert:{default:null,type:Array,required:!1},loading:{type:Boolean,required:!0,default:!1}},data:function(){return{offset:!1,dialog:!1,sendDoctor:!1,headers:[{text:"ลำดับ",align:"center",sortable:!1,value:"id",class:"font-weight-bold"},{text:"เจ้าของ",value:"name",sortable:!1},{text:"สัตว์เลี้ยง",value:"pet",sortable:!1},{text:"ระยะเวลา",value:"time",sortable:!1},{text:"ความสำคัญ",value:"important",sortable:!1},{text:"แพทย์",value:"doctor",sortable:!1},{text:"สถานะ",value:"status",align:"left",sortable:!1},{text:"Action",value:"action",align:"center",sortable:!1}]}},computed:{},methods:{permission:function(e){var t=this,n=function(n){if(t.$store.getters.loggedInUser.roles.some((function(t){return t.id===e[n]}))||t.$store.getters.loggedInUser.isAdmin)return{v:!0}};for(var o in e){var r=n(o);if("object"===Object(w.a)(r))return r.v}return!1},backHome:function(e,t){this.$refs.takeHomeDialog.open(e,t)},openSendDocs:function(e,t){this.$refs.sendDoctor.open(e,t)},updateSend:function(e){this.$emit("update",e)},removeFromQueue:function(e){this.$emit("delete",e)},orderNum:function(data,e){return data.map((function(e){return e.id})).indexOf(e)+1},getColor:function(e){return 1===e?"rgb(255, 98, 98)":2===e?"rgb(255, 191, 72)":3===e?"rgb(79, 155, 255)":4===e?"rgb(214, 185, 81)":9===e?"rgb(255, 145, 98)":"rgb(87, 243, 87)"},updateStatus:function(e,t,n){var o=this;this.$refs.confirm.open("ยืนยัน".concat(2===t?"เข้ารับการตรวจ":3===t?"การรอผลตรวจ":4===t?"การรายงานผล":7===t?"การจบการรับบริการ":8===t&&9===n?"ยกเลิกการฝาก":8===t?"ยกเลิกการรักษา":"การจบการรักษา","?"),"ต้องการยืนยัน".concat(2===t?"เข้ารับการตรวจ":3===t?"การรอผลตรวจ":4===t?"การรายงานผล":7===t?"การจบการรับบริการ":8===t&&9===n?"ยกเลิกการฝากเลี้ยง":8===t?"ยกเลิกการรักษา":"การจบการรักษา","ใช่หรือไม่"),{width:290,color:8===t?"red":3===t?"primary":4===t?"rgb(214, 185, 81)":"green"}).then((function(n){o.$axios.$patch("/api/visits/".concat(e),{visitStatusId:t},{progress:!1}).then((function(n){2===t?o.$router.push("/queue/".concat(e)):8===t?(o.removeFromQueue(e),o.cancelQueueDialog=!1):o.$emit("updateStatus",{visitId:e,visitStatusId:t})})).catch((function(e){alert(e)}))})).catch((function(){}))},discharge:function(e){var t=this;this.$refs.confirm.open("ยืนยันการจบการรับชำระ?","ต้องการยืนยันรับชำระเงินใช่หรือไม่",{width:300,color:"green"}).then((function(n){t.$axios.$patch("/api/visits/".concat(e,"/status/discharge"),null,{progress:!1}).then((function(n){void 0!==n.id&&t.$store.getters.loggedInUser.roles.some((function(e){return 6===e.id}))?t.$router.push("/pos/"+n.id):t.$emit("delete",e)})).catch((function(e){alert(e)}))})).catch((function(){}))}}},L=n(463),z=n(639),R=n(184),U=n(186),E=n(465),Q=Object(l.a)(F,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-data-table",{staticClass:"elevation-4 overflow-y-auto",attrs:{headers:e.headers,items:e.dessert,loading:e.loading,"disable-pagination":"","hide-default-footer":"","fixed-header":"",height:"calc(100vh - 160px)"},scopedSlots:e._u([{key:"item.id",fn:function(t){var o=t.item;return[n("div",{staticClass:"text-center"},[e._v("\n        "+e._s(e.orderNum(e.dessert,o.id))+"\n      ")])]}},{key:"item.name",fn:function(t){var o=t.item;return[e.permission([2,3,4,5])&&6!==o.visitStatus.id?n("div",{staticClass:"font-weight-medium"},[e.$store.getters.loggedInUser.roles.some((function(e){return 3===e.id||4===e.id||5===e.id}))&&1===o.visitStatus.id&&!e.permission([2])?n("span",[e._v("\n          "+e._s(o.pet.owner.name)+"\n        ")]):n("nuxt-link",{staticClass:"bold-owner text-decoration-none text-truncate",attrs:{to:e.$store.getters.loggedInUser.roles.some((function(e){return 3===e.id||4===e.id||5===e.id}))&&!e.permission([2])?"/queue/"+o.id+"/checklist":"/queue/"+o.id}},[e._v("\n          "+e._s(o.pet.owner.name)+"\n          "),n("v-icon",{attrs:{color:"cusblue2",small:""}},[e._v("mdi-chevron-right")])],1)],1):n("div",[e._v(e._s(o.pet.owner.name))])]}},{key:"item.pet",fn:function(t){var o=t.item;return[n("div",[e._v(e._s(o.pet.name+" ("+o.pet.type+")"))])]}},{key:"item.time",fn:function(t){var o=t.item;return[n("div",[e._v(e._s(e.$moment(o.visitAt).fromNow()))])]}},{key:"item.important",fn:function(t){var o=t.item;return[n("div",[e._v(e._s(o.visitPriority.label))])]}},{key:"item.doctor",fn:function(t){var o=t.item;return[n("div",[e._v(e._s(null!==o.doctor?o.doctor.name:""))])]}},{key:"item.status",fn:function(t){var o=t.item;return[n("v-chip",{attrs:{color:e.getColor(o.visitStatus.id),dark:"",small:"",label:""}},[e._v("\n        "+e._s(o.visitStatus.label)+"\n      ")])]}},{key:"item.action",fn:function(t){var o=t.item;return[n("v-menu",{attrs:{"offset-x":e.offset,"nudge-left":"200"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,l=t.attrs;return[n("v-btn",e._g(e._b({attrs:{color:"cusblue2 white--text",disabled:1===o.visitStatus.id&&!e.permission([1,2])||2===o.visitStatus.id&&!e.permission([2,3,4])||3===o.visitStatus.id&&!e.permission([2,3,4])||4===o.visitStatus.id&&!e.permission([2,3,4])||6===o.visitStatus.id&&!e.permission([1,2,6]),icon:"",depressed:""}},"v-btn",l,!1),r),[n("v-icon",[e._v("mdi-dots-horizontal-circle")])],1)]}}],null,!0)},[e._v(" "),n("v-list",{attrs:{width:"200"}},[n("v-list-item",[n("h4",[e._v("Action")])]),e._v(" "),n("v-divider"),e._v(" "),1===o.visitType.id||2===o.visitType.id?n("div",[1===o.visitStatus.id?n("div",[e.permission([2])?n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:""},on:{click:function(t){return e.updateStatus(o.id,2,o.visitStatus.id)}}},[e._v("\n                เข้ารับการตรวจ\n              ")]):e._e(),e._v(" "),e.permission([1,2])?n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:""},on:{click:function(t){return e.openSendDocs(null!==o.doctor?o.doctor.name:"none",o.id)}}},[e._v("\n                ส่งต่อ\n              ")]):e._e(),e._v(" "),e.permission([1,2])?n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:""},on:{click:function(t){return e.updateStatus(o.id,8,o.visitStatus.id)}}},[e._v("\n                ยกเลิกการรักษา\n              ")]):e._e()],1):2===o.visitStatus.id?n("div",[e.permission([2,3,4])?n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:""},on:{click:function(t){return e.updateStatus(o.id,3,o.visitStatus.id)}}},[e._v("\n                รอผลตรวจ\n              ")]):e._e(),e._v(" "),e.permission([2])?n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:""},on:{click:function(t){return e.updateStatus(o.id,6,o.visitStatus.id)}}},[e._v("\n                จบการรักษา\n              ")]):e._e()],1):3===o.visitStatus.id?n("div",[e.permission([2,3,4])?n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:""},on:{click:function(t){return e.updateStatus(o.id,4,o.visitStatus.id)}}},[e._v("\n                รายงานผล\n              ")]):e._e(),e._v(" "),e.permission([2])?n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:""},on:{click:function(t){return e.updateStatus(o.id,6,o.visitStatus.id)}}},[e._v("\n                จบการรักษา\n              ")]):e._e()],1):4===o.visitStatus.id?n("div",[e.permission([2,3,4])?n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:""},on:{click:function(t){return e.updateStatus(o.id,3,o.visitStatus.id)}}},[e._v("\n                รอผลตรวจ\n              ")]):e._e(),e._v(" "),e.permission([2])?n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:""},on:{click:function(t){return e.updateStatus(o.id,6,o.visitStatus.id)}}},[e._v("\n                จบการรักษา\n              ")]):e._e()],1):n("div",[e.permission([1,2,6])?n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:""},on:{click:function(t){return e.discharge(o.id)}}},[e._v("\n                รับชำระเงิน\n              ")]):e._e(),e._v(" "),e.permission([2])?n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:""},on:{click:function(t){return e.updateStatus(o.id,7,o.visitStatus.id)}}},[e._v("\n                จบการรับบริการ\n              ")]):e._e()],1)]):n("div",[e.permission([1,2,6])?n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:""},on:{click:function(t){return e.backHome(o.id,o.visitAt)}}},[e._v("\n              รับกลับบ้าน\n            ")]):e._e(),e._v(" "),e.permission([1,2])?n("v-btn",{staticClass:"cusblue2--text",attrs:{block:"",text:"",tile:""},on:{click:function(t){return e.updateStatus(o.id,8,o.visitStatus.id)}}},[e._v("\n              ยกเลิก\n            ")]):e._e()],1)],1)],1)]}}],null,!0)}),e._v(" "),n("sendDoctorDialog",{ref:"sendDoctor",on:{updateDoctor:e.updateSend}}),e._v(" "),n("takeHomeDialog",{ref:"takeHomeDialog",on:{onSuccess:e.removeFromQueue}}),e._v(" "),n("confirmDialog",{ref:"confirm"})],1)}),[],!1,null,null,null),B=Q.exports;d()(Q,{VBtn:S.a,VChip:L.a,VDataTable:z.a,VDivider:f.a,VIcon:R.a,VList:U.a,VListItem:x.a,VMenu:E.a});n(21),n(23),n(26);var Y={components:{sendcheckDialog:n(538).a},data:function(){return{assignModal:!1,menuDate:!1,offset:!0,date:null,appointQueue:[],ownerName:""}},computed:{selectDate:function(){return this.date?$()(this.date).format("DD/MM/YYYY"):null},appointFilter:function(){var e=this;return this.appointQueue.filter((function(t){return t.pet.owner.name.toLowerCase().includes(e.ownerName.toLowerCase())}))}},watch:{date:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("/api/appoints?date=".concat(e.date),{progress:!1});case 3:n=t.sent,e.appointQueue=n.results,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),alert(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},mounted:function(){this.date=(new Date).toISOString().substr(0,10)},methods:{sendCheck:function(e,t,n){var o=this;this.assignModal=!1,setTimeout((function(){o.$refs.checkDialog.openWithAppointment(e,t,n)}),150)},UpdateAppoint:function(e){var t=this.appointQueue.findIndex((function(t){return t.id===e.appointId}));this.appointQueue.splice(t,1),this.$emit("updateVisit",e.respone)}}},G=n(638),J=n(67),W=Object(l.a)(Y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-btn",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["ctrl","alt","a"],expression:"['ctrl', 'alt', 'a']"}],key:e.$nuxt.$route.path,attrs:{color:"cusblue2",fixed:"",fab:"",small:this.$vuetify.breakpoint.mobile,large:!this.$vuetify.breakpoint.mobile,dark:"",bottom:"",right:""},on:{shortkey:function(t){e.assignModal=!0},click:function(t){t.stopPropagation(),e.assignModal=!0}}},[n("v-icon",[e._v("mdi-calendar-month")])],1),e._v(" "),n("v-dialog",{attrs:{"max-width":"450",scrollable:"",fullscreen:this.$vuetify.breakpoint.xsOnly},model:{value:e.assignModal,callback:function(t){e.assignModal=t},expression:"assignModal"}},[n("v-card",[n("h2",{staticClass:"pa-5 pb-2"},[e._v("ตารางนัดหมาย")]),e._v(" "),n("v-btn",{staticClass:"mt-4",attrs:{icon:"",absolute:"",right:""},on:{click:function(t){e.assignModal=!1}}},[n("v-icon",[e._v("mdi-close")])],1),e._v(" "),n("v-divider"),e._v(" "),n("div",{staticClass:"px-10 pb-10"},[n("v-row",{attrs:{align:"center",justify:"center",dense:""}},[n("v-col",{attrs:{cols:"12"}},[n("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,r=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{color:"cusblue","append-icon":"mdi-calendar-month","background-color":"white",label:"วันที่นัดหมาย",readonly:"","hide-details":""},model:{value:e.selectDate,callback:function(t){e.selectDate=t},expression:"selectDate"}},"v-text-field",r,!1),o))]}}]),model:{value:e.menuDate,callback:function(t){e.menuDate=t},expression:"menuDate"}},[e._v(" "),n("v-date-picker",{ref:"picker",attrs:{color:"cusblue",min:"1950-01-01",locale:"th"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{color:"cusblue","background-color":"white",label:"ชื่อ","hide-details":""},model:{value:e.ownerName,callback:function(t){e.ownerName=t},expression:"ownerName"}})],1)],1)],1),e._v(" "),n("v-divider",{staticClass:"darker-divider"}),e._v(" "),n("v-card-text",{staticClass:"pa-0",staticStyle:{height:"350px"}},[0!==e.appointQueue.length&&e.appointQueue!==[]?n("div",e._l(e.appointFilter,(function(t){return n("v-menu",{key:t.id,attrs:{"offset-x":e.offset,"max-width":"200"},scopedSlots:e._u([{key:"activator",fn:function(o){var r=o.on,l=o.attrs;return[n("v-list-item",e._g(e._b({staticClass:"py-5 px-10",staticStyle:{"border-bottom":"1px solid rgb(204, 204, 204)"},attrs:{link:""}},"v-list-item",l,!1),r),[n("v-row",{attrs:{align:"center",justify:"center","no-gutters":""}},[n("v-col",{staticClass:"font-weight-medium",attrs:{cols:"3"}},[e._v("เจ้าของ")]),e._v(" "),n("v-col",{staticClass:"font-weight-medium text-center",attrs:{cols:"1"}},[e._v(":")]),e._v(" "),n("v-col",{staticClass:"font-weight-medium",attrs:{cols:"8"}},[e._v("\n                    "+e._s(t.pet.owner.name)+"\n                  ")]),e._v(" "),n("v-col",{attrs:{cols:"3"}},[e._v("แพทย์")]),e._v(" "),n("v-col",{staticClass:"text-center",attrs:{cols:"1"}},[e._v(":")]),e._v(" "),n("v-col",{attrs:{cols:"8"}},[e._v("\n                    "+e._s(null!==t.doctor?t.doctor.name:"")+"\n                  ")]),e._v(" "),n("v-col",{attrs:{cols:"3"}},[e._v("สัตว์เลี้ยง")]),e._v(" "),n("v-col",{staticClass:"text-center",attrs:{cols:"1"}},[e._v(":")]),e._v(" "),n("v-col",{attrs:{cols:"8"}},[e._v("\n                    "+e._s(t.pet.name+"("+t.pet.type+")")+"\n                  ")]),e._v(" "),n("v-col",{attrs:{cols:"3"}},[e._v("นัดเพื่อ")]),e._v(" "),n("v-col",{staticClass:"text-center",attrs:{cols:"1"}},[e._v(":")]),e._v(" "),n("v-col",{attrs:{cols:"8"}},[e._v(e._s(t.cause))]),e._v(" "),n("v-col",{attrs:{cols:"3"}},[e._v("เวลา")]),e._v(" "),n("v-col",{staticClass:"text-center",attrs:{cols:"1"}},[e._v(":")]),e._v(" "),n("v-col",{attrs:{cols:"8"}},[e._v(e._s(t.appointTime)+" น.")])],1)],1)]}}],null,!0)},[e._v(" "),n("v-list",{staticClass:"pa-0"},[n("div",{staticClass:"px-2 pt-3"},[n("h3",[e._v("ยืนยันเข้ารับบริการ?")]),e._v(" "),n("v-divider"),e._v(" "),n("v-card-actions",{staticClass:"pa-0 pt-2"},[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"cusblue2",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("\n                    ยกเลิก\n                  ")]),e._v(" "),n("v-btn",{attrs:{color:"cusblue2",text:""},on:{click:function(n){return n.stopPropagation(),e.sendCheck(t.pet.id,null!==t.doctor?t.doctor.id:"",t.id)}}},[e._v("\n                    ตกลง\n                  ")])],1)],1)])],1)})),1):n("v-sheet",{attrs:{height:"100%",tile:""}},[n("v-row",{staticClass:"fill-height",attrs:{align:"center",justify:"center","no-gutters":""}},[n("span",{staticClass:"grey--text"},[e._v("Not Found Appoint")])])],1)],1)],1)],1),e._v(" "),n("sendcheckDialog",{ref:"checkDialog",on:{updateAppoint:e.UpdateAppoint}})],1)}),[],!1,null,null,null),X=W.exports;d()(W,{VBtn:S.a,VCard:v.a,VCardActions:O.a,VCardText:O.c,VCol:T.a,VDatePicker:G.a,VDialog:j.a,VDivider:f.a,VIcon:R.a,VList:U.a,VListItem:x.a,VMenu:E.a,VRow:m.a,VSheet:J.a,VSpacer:k.a,VTextField:P.a});var K={components:{queueNav:y,queueTable:B,queueDialog:X},validate:function(e){var t=e.store;return t.getters.loggedInUser.roles.some((function(e){return 1===e.id||2===e.id||3===e.id||4===e.id||5===e.id||6===e.id}))||t.getters.loggedInUser.isAdmin},fetch:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null===(n=e.filter)&&(n={visitTypeId:e.defaultVisitTypeId,doctorId:e.defaultDoctorId}),0===n.doctorId&&delete n.doctorId,t.prev=3,t.next=6,e.$axios.$get("/api/visits",{params:n});case 6:o=t.sent,e.queues=o.results,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),e.queues=[];case 13:case"end":return t.stop()}}),t,null,[[3,10]])})))()},fetchOnServer:!1,data:function(){return{filter:null,queues:[],polling:null}},computed:{defaultVisitTypeId:function(){return localStorage.getItem("queueFilters")?JSON.parse(localStorage.getItem("queueFilters")).visitTypeId:1},defaultDoctorId:function(){return localStorage.getItem("queueFilters")?JSON.parse(localStorage.getItem("queueFilters")).doctorId:this.$store.getters.loggedInUser.roles.some((function(e){return 2===e.id}))?this.$store.getters.loggedInUser.id:0}},mounted:function(){this.pollData()},beforeDestroy:function(){clearInterval(this.polling)},methods:{search:function(e){var t=e.visitTypeId,n=e.doctorId;this.filter={visitTypeId:t,doctorId:n},localStorage.setItem("queueFilters",JSON.stringify(this.filter)),this.refresh()},refresh:function(){this.$fetch()},pollData:function(){var e=this;this.polling=setInterval((function(){e.$fetch()}),3e4)},deleteQueue:function(e){var t=this.queues.findIndex((function(t){return t.id===e}));this.queues.splice(t,1)}}},Z=Object(l.a)(K,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("queueNav",{attrs:{"queue-count":e.queues.length,"default-visit-type-id":e.defaultVisitTypeId,"default-doctor-id":e.defaultDoctorId},on:{onSearch:e.search}}),e._v(" "),n("div",{staticClass:"custom-container"},[n("queueTable",{attrs:{dessert:e.queues,loading:e.$fetchState.pending},on:{update:e.refresh,delete:e.deleteQueue,updateStatus:e.refresh}})],1),e._v(" "),n("queueDialog",{on:{updateVisit:e.refresh}})],1)}),[],!1,null,null,null);t.default=Z.exports}}]);