(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{384:function(t,e,r){"use strict";var n={data:function(){return{lists:[{title:"ระบบ",list:[{name:"สถานพยาบาล",link:"/setting/hospital"},{name:"ผู้ใช้งาน",link:"/setting/users"}]},{title:"ตัวช่วย",list:[{name:"Chief Complaint",link:"/setting/Chief-Complaint"},{name:"Differencial Diagnosis",link:"/setting/Differential-Diagnosis"},{name:"History Ranking",link:"/setting/History-Ranking"},{name:"Physical Examination",link:"/setting/Physical-Examination"}]},{title:"รายการตรวจ",list:[{name:"รายการตรวจ",link:"/setting/check"}]}]}}},l=r(55),c=r(74),o=r.n(c),d=r(350),v=r(349),m=r(387),f=r(157),h=r(158),k=r(99),_=r(107),component=Object(l.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",t._l(t.lists,(function(e){return r("v-card",{key:e.index,staticClass:"mb-3 elevation-4"},[r("v-card-title",{staticClass:"pa-0 pl-5 pt-3"},[t._v(t._s(e.title))]),t._v(" "),r("v-divider"),t._v(" "),r("v-list",{staticClass:"pa-0",attrs:{dense:""}},t._l(e.list,(function(e){return r("v-list-item",{key:e.index,attrs:{link:"",to:e.link}},[r("v-icon",{staticClass:"mr-3",attrs:{color:"cusblue3","x-small":""}},[t._v("mdi-record")]),t._v(" "),r("v-list-item-content",[t._v("\n          "+t._s(e.name)+"\n        ")])],1)})),1)],1)})),1)}),[],!1,null,null,null);e.a=component.exports;o()(component,{VCard:d.a,VCardTitle:v.d,VDivider:m.a,VIcon:f.a,VList:h.a,VListItem:k.a,VListItemContent:_.a})},385:function(t,e,r){"use strict";var n=r(55),l=r(74),c=r.n(l),o=r(362),d=r(364),component=Object(n.a)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("v-row",{staticClass:"cusblue1 px-10",attrs:{align:"center",justify:"center",dense:""}},[e("v-col",{attrs:{cols:"12"}},[e("h1",{staticClass:"font-weight-medium"},[this._v("ตั้งค่า")])])],1)}),[],!1,null,null,null);e.a=component.exports;c()(component,{VCol:o.a,VRow:d.a})},544:function(t,e,r){"use strict";r.r(e);r(44);var n=r(11),l=r(385),c=r(384),o={props:{alluser:{default:null,type:Array,required:!1}},data:function(){return{confirmDel:!1,newItemDialog:!1,listItem:null}}},d=r(55),v=r(74),m=r.n(v),f=r(154),h=r(350),k=r(349),_=r(362),x=r(405),w=r(387),C=r(157),y=r(158),V=r(99),D=r(159),O=r(107),U=r(364),$=r(367),j=r(446),component=Object(d.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h3",{staticClass:"pl-5 pt-3 font-weight-medium"},[t._v("ผู้ใช้งาน")]),t._v(" "),r("v-divider",{staticClass:"darker-divider"}),t._v(" "),r("v-row",{staticClass:"pt-3",attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("v-card",{staticClass:"elevation-4",attrs:{height:"540"}},[r("div",{staticClass:"px-7 py-5"},[r("v-text-field",{staticClass:"rounded-lg",attrs:{color:"cusblue",label:"ค้นหา","append-icon":"mdi-magnify",outlined:"","single-line":"",dense:"",flat:"","hide-details":""}})],1),t._v(" "),r("div",{staticClass:"px-7 py-5"},[r("v-card-title",{staticClass:"pa-0 px-3 py-1"},[t._v("\n            List\n            "),r("v-spacer"),t._v(" "),r("v-btn",{staticClass:"cusblue3 float-right text-none",attrs:{dark:"",depressed:""},on:{click:function(e){e.stopPropagation(),t.newItemDialog=!0}}},[t._v("New item")]),t._v(" "),r("v-dialog",{attrs:{"max-width":"700"},model:{value:t.newItemDialog,callback:function(e){t.newItemDialog=e},expression:"newItemDialog"}},[r("v-card",[r("h2",{staticClass:"pa-5 pb-2"},[t._v("New Item")]),t._v(" "),r("v-divider",{staticClass:"darker-divider"}),t._v(" "),r("div",{staticClass:"py-5 px-10"},[r("v-row",{attrs:{dense:""}},[r("v-col",{attrs:{cols:"6"}},[r("v-text-field",{attrs:{color:"cusblue",label:"ชื่อ item"}})],1),t._v(" "),r("v-col",{attrs:{cols:"6"}},[r("v-text-field",{attrs:{color:"cusblue",label:"สถานะ"}})],1),t._v(" "),r("v-col",{attrs:{cols:"6"}},[r("v-text-field",{attrs:{color:"cusblue",label:"จำนวน"}})],1)],1)],1),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{color:"cusblue2",text:""},on:{click:function(e){t.newItemDialog=!1}}},[t._v("\n                    ยกเลิก\n                  ")]),t._v(" "),r("v-btn",{attrs:{color:"cusblue2",text:""},on:{click:function(e){t.newItemDialog=!1}}},[t._v("\n                    ตกลง\n                  ")])],1)],1)],1)],1),t._v(" "),r("v-divider"),t._v(" "),r("v-list",{staticClass:"pa-0 px-5"},t._l(t.alluser,(function(e){return r("v-list-item",{key:e.index},[r("v-list-item-content",[r("v-list-item-title",[t._v(" "+t._s(e.username)+" ")])],1),t._v(" "),r("v-list-item-action",[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"6"}},[r("v-btn",{staticClass:"mr-1",attrs:{icon:"","x-small":""}},[r("v-icon",{attrs:{color:"black"}},[t._v("mdi-pencil")])],1)],1),t._v(" "),r("v-col",{attrs:{cols:"6"}},[r("v-btn",{staticClass:"ml-1",attrs:{icon:"","x-small":""},on:{click:function(e){t.confirmDel=!0}}},[r("v-icon",{attrs:{color:"black"}},[t._v("mdi-trash-can")])],1)],1)],1)],1)],1)})),1)],1)]),t._v(" "),r("v-dialog",{attrs:{"max-width":"290"},model:{value:t.confirmDel,callback:function(e){t.confirmDel=e},expression:"confirmDel"}},[r("v-card",[r("h2",{staticClass:"pl-6 pt-3 pb-2"},[t._v("คุณแน่ใจหรือไม่?")]),t._v(" "),r("v-card-text",[t._v(" คุณแน่ใจหรือไม่ที่จะลบข้อมูลนี้ ")]),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{color:"red",text:""},on:{click:function(e){t.confirmDel=!1}}},[t._v(" ลบ ")]),t._v(" "),r("v-btn",{attrs:{color:"grey",text:""},on:{click:function(e){t.confirmDel=!1}}},[t._v("\n              ยกเลิก\n            ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null),I=component.exports;m()(component,{VBtn:f.a,VCard:h.a,VCardActions:k.a,VCardText:k.c,VCardTitle:k.d,VCol:_.a,VDialog:x.a,VDivider:w.a,VIcon:C.a,VList:y.a,VListItem:V.a,VListItemAction:D.a,VListItemContent:O.a,VListItemTitle:O.b,VRow:U.a,VSpacer:$.a,VTextField:j.a});r(10),r(7),r(6),r(4),r(8),r(16);var L=r(2),B={data:function(){return{selected:null,overBtn:!0,lessBtn:!0,rankList:{register:{id:1,rank:"register",state:!1},doctor:{id:2,rank:"doctor",state:!1},lab:{id:3,rank:"lab",state:!1},xray:{id:4,rank:"xray",state:!1},pharmacy:{id:5,rank:"pharmacy",state:!1},cashier:{id:6,rank:"cashier",state:!1}}}},computed:{selectedRank:function(){var t=[],e=[];for(var r in this.rankList)!0===this.rankList[r].state&&(t.push(this.rankList[r]),e.push(this.rankList[r].id));return this.$emit("rank",e),t},allRank:function(){var t,e=[];for(t in this.rankList)!1===this.rankList[t].state&&e.push(this.rankList[t]);return e}},methods:{buttonSwitch:function(){null==this.selected?(this.overBtn=!0,this.lessBtn=!0):!1===this.selected.state?(this.overBtn=!1,this.lessBtn=!0):!0===this.selected.state&&(this.overBtn=!0,this.lessBtn=!1)},clickSelect:function(){this.rankList[this.selected.rank].state=!this.rankList[this.selected.rank].state,this.selected=null,this.overBtn=!0,this.lessBtn=!0}}},R=r(538),S=r(47),P=Object(d.a)(B,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-item-group",{model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[r("v-row",{attrs:{align:"center",justify:"center",dense:this.$vuetify.breakpoint.xsOnly}},[r("v-col",{attrs:{cols:"12",sm:"5"}},[r("v-card",{staticClass:"elevation-4",attrs:{height:"180"}},[r("v-card-title",{staticClass:"pa-0 pl-5 pt-3"},[t._v(" สิทธิทั้งหมด ")]),t._v(" "),r("v-divider"),t._v(" "),r("v-row",{attrs:{dense:""}},t._l(t.allRank,(function(e,i){return r("v-item",{key:e.index,staticClass:"col-6",attrs:{value:e},scopedSlots:t._u([{key:"default",fn:function(n){var l=n.active,c=n.toggle;return[r("div",{class:i%2==1?"pt-3 pl-3 pr-6":"pt-3 pl-6 pr-3"},[r("v-card",{staticClass:"text-center elevation-0",attrs:{color:l?"cusblue":"grey lighten-2",light:"",height:"22","max-width":"95"},on:{click:function(e){c(),t.buttonSwitch()}}},[r("span",{class:l?"white--text text-uppercase":"black--text text-uppercase"},[t._v("\n                  "+t._s(e.rank)+"\n                ")])])],1)]}}],null,!0)})})),1)],1)],1),t._v(" "),r("v-col",{staticClass:"px-2",attrs:{cols:"12",sm:"1"}},[r("v-row",{attrs:{"no-gutters":this.$vuetify.breakpoint.xsOnly}},[r("v-col",{attrs:{cols:"6",sm:"12"}},[r("div",{staticClass:"text-center"},[r("v-btn",{staticClass:"cusblue2 white--text",attrs:{disabled:t.overBtn,fab:"",small:"",depressed:""},on:{click:t.clickSelect}},[r("v-icon",[t._v(t._s(this.$vuetify.breakpoint.xsOnly?"mdi-chevron-down":"mdi-chevron-right"))])],1)],1)]),t._v(" "),r("v-col",{attrs:{cols:"6",sm:"12"}},[r("div",{staticClass:"text-center"},[r("v-btn",{staticClass:"cusblue2 white--text",attrs:{disabled:t.lessBtn,fab:"",small:"",depressed:""},on:{click:t.clickSelect}},[r("v-icon",[t._v(t._s(this.$vuetify.breakpoint.xsOnly?"mdi-chevron-up":"mdi-chevron-left"))])],1)],1)])],1)],1),t._v(" "),r("v-col",{attrs:{cols:"12",sm:"5"}},[r("v-card",{staticClass:"elevation-4",attrs:{height:"180"}},[r("v-card-title",{staticClass:"pa-0 pl-5 pt-3"},[t._v("สิทธิที่เลือก")]),t._v(" "),r("v-divider"),t._v(" "),r("v-row",{attrs:{dense:""}},t._l(t.selectedRank,(function(e,i){return r("v-item",{key:e.index,staticClass:"col-6",attrs:{value:e},scopedSlots:t._u([{key:"default",fn:function(n){var l=n.active,c=n.toggle;return[r("div",{class:i%2==1?"pt-3 pl-3 pr-6":"pt-3 pl-6 pr-3"},[r("v-card",{staticClass:"text-center elevation-0",attrs:{color:l?"cusblue":"grey lighten-2",light:"",height:"22","max-width":"95"},on:{click:function(e){c(),t.buttonSwitch()}}},[r("span",{class:l?"white--text text-uppercase":"black--text text-uppercase"},[t._v(t._s(e.rank))])])],1)]}}],null,!0)})})),1)],1)],1)],1)],1)}),[],!1,null,null,null),A=P.exports;function E(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}m()(P,{VBtn:f.a,VCard:h.a,VCardTitle:k.d,VCol:_.a,VDivider:w.a,VIcon:C.a,VItem:R.a,VItemGroup:S.b,VRow:U.a});var T={components:{roleSelect:A},props:{alluser:{default:null,type:Array,required:!1}},data:function(){var t=this;return{color:"cusblue",assignModal:!1,valid:!0,addUser:{name:"",username:"",email:"",password:"",confirm:"",isAdmin:!1,rank:[]},rules:{name:[function(t){return!!t||"กรุณากรอกชื่อ"}],username:[function(t){return!!t||"กรุณากรอกชื่อผู้ใช้"},function(t){return t&&t.length<=100||"ไม่ควรกรอกชื่อเกิน 100 ตัวอักษร"},function(e){return e&&t.checkDuplicate(e)||"ชื่อผูัใช้นี้ถูกใช้งานแล้ว"}],email:[function(t){return!!t||"กรุณากรอกอีเมล์"},function(t){return/.+@.+\..+/.test(t)||"กรุณากรอกอีเมล์ให้ถูกรูปแบบ"}],password:[function(t){return!!t||"กรุณากรอกรหัสผ่าน"},function(t){return t&&t.length>=6||"รหัสผ่านต้องมีมากกว่าหรือเท่ากับ 6 ตัวอักษร"},function(t){return t&&t.length<=48||"รหัสผ่านต้องมีน้อยหรือเท่ากับ 48 ตัวอักษร"}],confirm:[function(t){return!!t||"กรุณากรอกรหัสผ่านอีกครั้ง"},function(e){return e&&e===t.addUser.password||"รหัสผ่านไม่ตรงกัน"}]}}},computed:{},methods:{addRank:function(t){this.addUser.rank=t},submitUser:function(){if(this.$refs.form.validate()){var t=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?E(Object(source),!0).forEach((function(e){Object(L.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):E(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},this.addUser);this.$axios.$post("/api/users",{username:t.username,name:t.name,email:t.email,password:t.password,isAdmin:t.isAdmin,roles:t.rank}).then((function(t){this.$refs.form.reset(),this.assignModal=!1})).catch((function(t){console.log(t)}))}},checkDuplicate:function(t){return!this.alluser.some((function(e){return e.username===t}))}}},M=r(448),F=r(404),N=r(155),z=Object(d.a)(T,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-btn",{key:t.$nuxt.$route.path,attrs:{color:"cusblue2",fixed:"",fab:"",large:"",dark:"",bottom:"",right:""},on:{click:function(e){e.stopPropagation(),t.assignModal=!0}}},[r("v-icon",[t._v("mdi-plus")])],1),t._v(" "),r("v-dialog",{attrs:{"max-width":"700",scrollable:""},model:{value:t.assignModal,callback:function(e){t.assignModal=e},expression:"assignModal"}},[r("v-card",[r("v-form",{ref:"form",attrs:{"lazy-validation":"",autocomplete:"off"},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("h2",{staticClass:"pa-5 pb-2"},[t._v("เพิ่ม/แก้ไข")]),t._v(" "),r("v-divider",{staticClass:"darker-divider"}),t._v(" "),r("v-card-text",{staticClass:"px-7"},[r("v-row",{attrs:{dense:""}},[r("v-col",{attrs:{cols:"6"}},[r("v-text-field",{attrs:{color:t.color,rules:t.rules.name,label:"name",type:"text"},model:{value:t.addUser.name,callback:function(e){t.$set(t.addUser,"name",e)},expression:"addUser.name"}})],1),t._v(" "),r("v-col",{attrs:{cols:"6"}},[r("v-text-field",{attrs:{color:t.color,rules:t.rules.username,label:"username",type:"text"},model:{value:t.addUser.username,callback:function(e){t.$set(t.addUser,"username",e)},expression:"addUser.username"}})],1),t._v(" "),r("v-col",{attrs:{cols:"6"}},[r("v-text-field",{attrs:{color:t.color,rules:t.rules.email,label:"email",type:"email"},model:{value:t.addUser.email,callback:function(e){t.$set(t.addUser,"email",e)},expression:"addUser.email"}})],1),t._v(" "),r("v-col",{attrs:{cols:"6"}},[r("v-text-field",{attrs:{color:t.color,rules:t.rules.password,label:"password",type:"password"},model:{value:t.addUser.password,callback:function(e){t.$set(t.addUser,"password",e)},expression:"addUser.password"}})],1),t._v(" "),r("v-col",{attrs:{cols:"6"}},[r("v-text-field",{attrs:{color:t.color,rules:t.rules.confirm,label:"confirm password",type:"password"},model:{value:t.addUser.confirm,callback:function(e){t.$set(t.addUser,"confirm",e)},expression:"addUser.confirm"}})],1),t._v(" "),r("v-col",{attrs:{cols:"6"}},[r("v-checkbox",{attrs:{color:t.color,label:"ผู้ดูแลระบบ"},model:{value:t.addUser.isAdmin,callback:function(e){t.$set(t.addUser,"isAdmin",e)},expression:"addUser.isAdmin"}})],1)],1),t._v(" "),r("roleSelect",{on:{rank:t.addRank}})],1),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{staticClass:"cusblue2--text text-none",attrs:{text:"",disabled:!t.valid},on:{click:t.submitUser}},[r("v-progress-circular",{staticClass:"mr-2",attrs:{indeterminate:"",color:"cusblue2",size:15,width:2}}),t._v("\n            Save\n          ")],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null),H=z.exports;m()(z,{VBtn:f.a,VCard:h.a,VCardActions:k.a,VCardText:k.c,VCheckbox:M.a,VCol:_.a,VDialog:x.a,VDivider:w.a,VForm:F.a,VIcon:C.a,VProgressCircular:N.a,VRow:U.a,VSpacer:$.a,VTextField:j.a});var J={components:{settingNav:l.a,settingTab:c.a,userForm:I,userDialog:H},fetch:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("/api/users").then((function(e){t.allUser=e.data.results}));case 2:case"end":return e.stop()}}),e)})))()},data:function(){return{allUser:null}}},G=Object(d.a)(J,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("settingNav"),this._v(" "),e("div",{staticClass:"custom-container"},[e("v-row",{attrs:{"no-gutters":""}},[e("v-col",{attrs:{cols:"4",sm:"3",md:"2"}},[e("settingTab")],1),this._v(" "),e("v-col",{staticClass:"pl-5",attrs:{cols:"8",sm:"9",md:"10"}},[e("userForm",{attrs:{alluser:this.allUser}})],1)],1)],1),this._v(" "),e("userDialog",{attrs:{alluser:this.allUser}})],1)}),[],!1,null,null,null);e.default=G.exports;m()(G,{VCol:_.a,VRow:U.a})}}]);